{"version":3,"file":"simplebar.esm.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["// Helper function to retrieve options from element attributes\nexport const getOptions = function (obj) {\n  const options = Array.prototype.reduce.call(\n    obj,\n    (acc, attribute) => {\n      const option = attribute.name.match(/data-simplebar-(.+)/);\n      if (option) {\n        const key = option[1].replace(/\\W+(.)/g, (x, chr) => chr.toUpperCase());\n        switch (attribute.value) {\n          case 'true':\n            acc[key] = true;\n            break;\n          case 'false':\n            acc[key] = false;\n            break;\n          case undefined:\n            acc[key] = true;\n            break;\n          default:\n            acc[key] = attribute.value;\n        }\n      }\n      return acc;\n    },\n    {}\n  );\n  return options;\n};\n","import canUseDOM from 'can-use-dom';\nimport SimpleBar from 'simplebar-core';\n\nimport { getOptions } from './helpers';\n\nSimpleBar.initDOMLoadedElements = function () {\n  document.removeEventListener('DOMContentLoaded', this.initDOMLoadedElements);\n  window.removeEventListener('load', this.initDOMLoadedElements);\n\n  Array.prototype.forEach.call(\n    document.querySelectorAll('[data-simplebar]'),\n    (el) => {\n      if (\n        el.getAttribute('data-simplebar') !== 'init' &&\n        !SimpleBar.instances.has(el)\n      )\n        new SimpleBar(el, getOptions(el.attributes));\n    }\n  );\n};\n\nSimpleBar.removeObserver = function () {\n  this.globalObserver.disconnect();\n};\n\nSimpleBar.initHtmlApi = function () {\n  this.initDOMLoadedElements = this.initDOMLoadedElements.bind(this);\n\n  // MutationObserver is IE11+\n  if (typeof MutationObserver !== 'undefined') {\n    // Mutation observer to observe dynamically added elements\n    this.globalObserver = new MutationObserver(SimpleBar.handleMutations);\n\n    this.globalObserver.observe(document, { childList: true, subtree: true });\n  }\n\n  // Taken from jQuery `ready` function\n  // Instantiate elements already present on the page\n  if (\n    document.readyState === 'complete' ||\n    (document.readyState !== 'loading' && !document.documentElement.doScroll)\n  ) {\n    // Handle it asynchronously to allow scripts the opportunity to delay init\n    window.setTimeout(this.initDOMLoadedElements);\n  } else {\n    document.addEventListener('DOMContentLoaded', this.initDOMLoadedElements);\n    window.addEventListener('load', this.initDOMLoadedElements);\n  }\n};\n\nSimpleBar.handleMutations = (mutations) => {\n  mutations.forEach((mutation) => {\n    Array.prototype.forEach.call(mutation.addedNodes, (addedNode) => {\n      if (addedNode.nodeType === 1) {\n        if (addedNode.hasAttribute('data-simplebar')) {\n          !SimpleBar.instances.has(addedNode) &&\n            new SimpleBar(addedNode, getOptions(addedNode.attributes));\n        } else {\n          Array.prototype.forEach.call(\n            addedNode.querySelectorAll('[data-simplebar]'),\n            function (el) {\n              if (\n                el.getAttribute('data-simplebar') !== 'init' &&\n                !SimpleBar.instances.has(el)\n              )\n                new SimpleBar(el, getOptions(el.attributes));\n            }\n          );\n        }\n      }\n    });\n\n    Array.prototype.forEach.call(mutation.removedNodes, (removedNode) => {\n      if (removedNode.nodeType === 1) {\n        if (removedNode.hasAttribute('data-simplebar')) {\n          SimpleBar.instances.has(removedNode) &&\n            SimpleBar.instances.get(removedNode).unMount();\n        } else {\n          Array.prototype.forEach.call(\n            removedNode.querySelectorAll('[data-simplebar=\"init\"]'),\n            (el) => {\n              SimpleBar.instances.has(el) &&\n                SimpleBar.instances.get(el).unMount();\n            }\n          );\n        }\n      }\n    });\n  });\n};\n\nSimpleBar.getOptions = getOptions;\nSimpleBar.default = SimpleBar;\n\n/**\n * HTML API\n * Called only in a browser env.\n */\nif (canUseDOM) {\n  SimpleBar.initHtmlApi();\n}\n\nexport default SimpleBar;\n"],"names":["getOptions","obj","options","Array","prototype","reduce","call","acc","attribute","option","name","match","key","replace","x","chr","toUpperCase","value","undefined","SimpleBar","initDOMLoadedElements","document","removeEventListener","window","forEach","querySelectorAll","el","getAttribute","instances","has","attributes","removeObserver","globalObserver","disconnect","initHtmlApi","bind","MutationObserver","handleMutations","observe","childList","subtree","readyState","documentElement","doScroll","setTimeout","addEventListener","mutations","mutation","addedNodes","addedNode","nodeType","hasAttribute","removedNodes","removedNode","get","unMount","default","canUseDOM"],"mappings":"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"}