var e=Object.defineProperty,i=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(i,d,s)=>d in i?e(i,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[d]=s;import{c as a}from"./index.d7dc1ff6.js";import{_ as t}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as o,a as l}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as c}from"./VModal.31b4f4ba.js";import{p as n,a as p,d as u,r as m,S as b,q as v,k as y,E as f,o as A,y as h,au as z,F as g,x as q,g as V,h as _,t as E,G as j,i as K,e as k,I as O,K as I,V as D,n as w,ai as S,H as $}from"./vendor.1c8b4573.js";import{p as x,s as C}from"./useGuardSalesmanOrder.0724c123.js";import{i as N}from"./useTextHelper.08cd3a6d.js";n("data-v-005a6565");const P={class:"modal-form"},U=["onUpdate:modelValue","placeholder","readonly"],B=j("Save");p();var Z=u({props:{modelValue:{type:Boolean,default:!1,required:!0},orderId:{type:Number,required:!0},address:{type:Object,required:!0},canEdit:{type:Boolean,required:!0},isEdit:{type:Boolean,required:!0}},emits:["update:modelValue","save","edit","on-close","on-edit"],setup(e,{emit:n}){const p=e,u=m(x.data);b((()=>p.modelValue),(e=>{e?T():H()}));const N={no:"",subDistrict:"",district:"",province:"",zipcode:""},Z=m(!1),F=v(((e,a)=>{for(var t in a||(a={}))d.call(a,t)&&r(e,t,a[t]);if(i)for(var t of i(a))s.call(a,t)&&r(e,t,a[t]);return e})({},N)),G=v({zipcodeAddress:""}),H=()=>{Object.assign(F,N),G.zipcodeAddress=""},M=async e=>(await C(e||"")).map((e=>({district:null==e?void 0:e.district,amphoe:null==e?void 0:e.amphoe,province:null==e?void 0:e.province,zipcode:null==e?void 0:e.zipcode,value:`${e.district} - ${e.amphoe} - ${e.province} - ${e.zipcode}`})))||[],T=async()=>{var e;Z.value=!0;const i=(null==(e=(await M(p.address.zipcode)).find((e=>e.amphoe===p.address.district)))?void 0:e.value)||"";G.zipcodeAddress=i,Object.assign(F,{no:p.address.no,subDistrict:p.address.subDistrict,district:p.address.district,province:p.address.province,zipcode:p.address.zipcode}),Z.value=!1},J=()=>{n("on-close"),n("update:modelValue",!1)},L=()=>{n("save",F),J()},Q=y((()=>Object.values(F).every((e=>e)))),R=[{label:"Number",icon:"lnil lnil-home",editAddressKey:"no",placeholder:"Address Number",required:"Address number is required."},{label:"Zipcode",icon:"lnir lnir-zip",editAddressKey:"zipcode",placeholder:"Address Zipcode",required:"Address zipcode is required."},{label:"Province",icon:"lnil lnil-bridge",editAddressKey:"province",placeholder:"Address province",required:"Address province is required."},{label:"Subdistrict",icon:"lnil lnil-apartment-alt",editAddressKey:"subDistrict",placeholder:"Address subdistrict",required:"Address subdistrict is required."},{label:"District",icon:"lnil lnil-apartment",editAddressKey:"district",placeholder:"Address district",required:"Address district is required."}],W=(e,i)=>{const{amphoe:d,district:s,province:r,zipcode:a}=i;F.zipcode=a,F.district=d,F.subDistrict=s,F.province=r},X=y((()=>!p.isEdit));return(i,d)=>{const s=a,r=t,m=o,b=f("Multiselect"),v=l,y=c;return A(),h(y,{"is-edit":p.isEdit,"can-edit":p.canEdit,open:e.modelValue,title:`Edit Address (Order ID: ${e.orderId})`,size:"medium",actions:"right","cancel-label":p.isEdit?"Cancel":"Close",onClose:J},z({title:g((()=>[_("h3",null,E(p.isEdit?"Edit":"View")+" Address (Order ID: "+E(e.orderId)+") ",1),!p.isEdit&&p.canEdit?(A(),h(s,{key:`${p.isEdit}`,class:"ml-auto",color:"primary",icon:p.isEdit?"feather:eye":"feather:edit",raised:"",onClick:d[0]||(d[0]=e=>n("on-edit"))},{default:g((()=>[j(E(p.isEdit?"View":"Edit"),1)])),_:1},8,["icon"])):K("",!0)])),content:g((()=>[_("form",P,[(A(),k($,null,O(R,((e,i)=>q(v,{key:i},{default:g((()=>[_("label",null,E(e.label),1),"Zipcode"===e.label?(A(),h(m,{key:0,icon:e.icon,class:"province-option"},{default:g((()=>[Z.value?K("",!0):(A(),h(r,{key:0,modelValue:V(G).zipcodeAddress,"onUpdate:modelValue":[d[1]||(d[1]=e=>V(G).zipcodeAddress=e),W],"value-prop":"value","track-by":"zipcode","label-by":"zipcode",class:"province-option",disabled:V(X),"callback-search":M,"no-options-text":"พิมพ์รหัสไปรษณีย์ เพื่อเลือกที่อยู่ของนักเรียน","search-value":V(F).zipcode},{option:g((e=>[j(E(e.option.district)+" - "+E(e.option.amphoe)+" - "+E(e.option.province)+" - "+E(e.option.zipcode),1)])),_:1},8,["modelValue","disabled","search-value"])),I(_("p",{class:"help is-danger"},E(e.required),513),[[D,!V(F)[e.editAddressKey]]])])),_:2},1032,["icon"])):"Province"===e.label?(A(),h(m,{key:1,icon:e.icon,class:"province-option"},{default:g((()=>[q(b,{modelValue:V(F)[e.editAddressKey],"onUpdate:modelValue":i=>V(F)[e.editAddressKey]=i,name:"province",options:u.value,class:w([V(F)[e.editAddressKey]?"is-primary-focus":"is-danger-focus"]),disabled:V(X)},null,8,["modelValue","onUpdate:modelValue","options","class","disabled"]),I(_("p",{class:"help is-danger"},E(e.required),513),[[D,!V(F)[e.editAddressKey]]])])),_:2},1032,["icon"])):(A(),h(m,{key:2,icon:e.icon},{default:g((()=>[I(_("input",{"onUpdate:modelValue":i=>V(F)[e.editAddressKey]=i,type:"text",class:w(["input",[V(F)[e.editAddressKey]?"is-primary-focus":"is-danger-focus"]]),placeholder:e.placeholder,readonly:V(X)},null,10,U),[[S,V(F)[e.editAddressKey]]]),I(_("p",{class:"help is-danger"},E(e.required),513),[[D,!V(F)[e.editAddressKey]]])])),_:2},1032,["icon"]))])),_:2},1024))),64))])])),_:2},[p.isEdit?{name:"action",fn:g((()=>[q(s,{color:"primary",raised:"",disabled:!V(Q),onClick:L},{default:g((()=>[B])),_:1},8,["disabled"])]))}:void 0]),1032,["is-edit","can-edit","open","title","cancel-label"])}}});Z.__scopeId="data-v-005a6565",n("data-v-9b9a7c28");const F=["src"];p();var G=u({props:{bankName:{type:String,default:""}},setup(e){const i=e,d=y((()=>N(i.bankName)));return(e,i)=>{const s=f("tippy");return A(),h(s,{class:"has-help-cursor",interactive:"",offset:[0,10],placement:"top-start"},{content:g((()=>[_("p",null,E(V(d).name),1)])),default:g((()=>[_("img",{src:`/images/${V(d).img}`,class:"bank-logo"},null,8,F)])),_:1})}}});G.__scopeId="data-v-9b9a7c28";export{Z as _,G as a};
