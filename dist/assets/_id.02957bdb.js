var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(r)for(var t of r(a))i.call(a,t)&&o(e,t,a[t]);return e},d=(e,r)=>a(e,t(r));import{e as m,E as u,p,c as l}from"./index.d7dc1ff6.js";import{_ as c}from"./AdminForm.5eb2f573.js";import{_ as f}from"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import{q as v,A as b,b as y,k as j,Y as g,ae as h,d as _,o as O,e as A,h as E,x as I,F as q,g as w,y as x,au as P,i as V,G as k}from"./vendor.1c8b4573.js";import{u as F}from"./useAdminApi.d2988da1.js";import{u as M}from"./useNotyf.ddf08f06.js";import{i as B}from"./avatar.helper.68db04c2.js";import{u as S}from"./useGuardAdmin.5c78da19.js";import"./VAvatarEdit.vue_vue&type=style&index=0&lang.91cda85a.js";import"./ModalFileManager.vue_vue&type=script&setup=true&lang.3ed79754.js";import"./FileManager.643166ab.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VPlaceholderPage.vue_vue&type=script&setup=true&lang.e3e86478.js";import"./index.8f8d8101.js";import"./VIconBox.vue_vue&type=script&setup=true&lang.7bffdb35.js";import"./VModal.31b4f4ba.js";import"./search-4-dark.fb3880a5.js";import"./text.helper.174bd8fa.js";import"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import"./VCheckbox.0efaaab1.js";import"./useOptionApi.f4dc99b9.js";import"./quiz.enum.fc8b95fc.js";function z(){const e=v({loading:!1,adminInfo:void 0,formData:void 0,validate:{}}),a=M(),{getAdminById:t,putAdminInfo:r}=F(),s=b(),i=y(),o=j((()=>s.params.id)),u=j((()=>"#edit"===s.hash));return g((()=>{(async()=>{e.loading=!0;const a=await t(+o.value);if(!a)return;const{firstname:r,lastname:s}=a,{initials:i,color:m}=B(r,s);e.adminInfo=d(n({},a),{firstname:r,lastname:s,initials:i,color:m}),e.loading=!1})()})),d(n({},h(e)),{saveInfo:async t=>{const{status:d,message:u}=await r(+o.value,t);200===d?(console.log("ddd",n({},s.query)),a.success("Success!"),i.push({name:"admins-:id",query:n({},s.query)})):"object"==typeof u?e.validate=u:a.error(m(u))},isEdit:u})}const D={class:"page-content-inner"},G={class:"form-layout"},C=k(" Back "),L=k("Edit");var N=_({setup(e){const{adminInfo:a,loading:t,validate:r,isEdit:s,saveInfo:i}=z(),{capabilities:o}=S(),{capabilities:d}=u(),m=b(),v=j((()=>{var e;return"member"===(null==(e=m.query)?void 0:e.from)}));return p.value=v.value?"Members":"Admins",(e,r)=>{const u=l,p=c,b=f;return O(),A("div",D,[E("div",G,[I(b,{size:"small",lighter:"",grey:"",translucent:"",active:w(t)},{default:q((()=>[w(a)?(O(),x(p,{key:0,header:"View Profile",info:w(a),readonly:!w(s),"is-member":w(v),onEdit:w(i)},P({back:q((()=>[I(u,{icon:"feather:arrow-left",to:{name:w(v)?"admins-members":"admins"},raised:""},{default:q((()=>[C])),_:1},8,["to"])])),_:2},[w(s)||!w(o).canEdit&&!w(d).canEdit?void 0:{name:"buttons",fn:q((()=>[I(u,{icon:"feather:edit-2",to:{name:"admins-:id",params:{id:`${w(a).id}`},query:n({},w(m).query),hash:"#edit"},color:"primary"},{default:q((()=>[L])),_:1},8,["to"])]))}]),1032,["info","readonly","is-member","onEdit"])):V("",!0)])),_:1},8,["active"])])])}}});export default N;
