var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{u as l,p as c,c as n}from"./index.d7dc1ff6.js";import{_ as d}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as u}from"./Datatable.aae3ef08.js";import{q as p,Y as m,ae as f,k as b,d as v,X as g,o as y,e as j,x as h,au as P,g as k,F as E,h as _,G as x,t as D}from"./vendor.1c8b4573.js";import{t as V}from"./date.helper.6ae3fc87.js";import{u as w}from"./useRedeemApi.76e2bf5d.js";import{u as O}from"./usePaginationRoute.780ca235.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";function A(){const e=p({data:[],total:0,isLoading:!1}),{currentPage:l,perPage:c,search:n}=O(),d=w();m((async()=>{(async()=>{e.isLoading=!0;const a=await d.getAllRedeems({currentPage:l,perPage:c,search:n});e.isLoading=!1,a&&(e.data=a.data,e.total=a.total)})()}));return u=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))o.call(a,t)&&i(e,t,a[t]);return e})({},f(e)),a(u,t({redeemTableHeaders:[{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"partnerName",label:"Partner"},{key:"packageName",label:"Package"},{key:"status",label:"Status"},{key:"usedDate",label:"Activated"},{key:"createdAt",label:"Created"},{key:"expireDate",label:"Expire"}]}));var u}const C={class:"page-content-inner"},R={class:"is-flex is-justify-content-flex-end"},L=x("Create Redeem"),T=x("View");var F=v({setup(e){c.value="Code Management",g({title:"Whitehouse: Codes"});const{total:a,data:t,redeemTableHeaders:r,isLoading:s}=A(),{capabilities:o}={capabilities:b((()=>({canCreate:l(["CREATE_REDEEM"]),canView:l(["VIEW_REDEEM"])})))};return(e,i)=>{const l=n,c=d,p=u;return y(),j("div",C,[h(p,{headers:k(r),data:k(t),total:k(a),"is-loading":k(s),"is-action":k(o).canView},P({type:E((({value:e})=>[h(c,{color:"default"===e?"purple":"danger",label:e,curved:"",outlined:""},null,8,["color","label"])])),createdAt:E((({value:e})=>[x(D(e?k(V)(e):"-"),1)])),usedDate:E((({value:e})=>[x(D(e?k(V)(e):"-"),1)])),expireDate:E((({value:e})=>[x(D(e?k(V)(e):"-"),1)])),status:E((({value:e})=>[h(c,{color:e?"success":"solid",label:e?"Activated":"Deactivated",rounded:"",elevated:""},null,8,["color","label"])])),_:2},[k(o).canCreate?{name:"custom-right",fn:E((()=>[_("div",R,[h(l,{color:"primary",icon:"feather:plus-circle",to:{name:"codes-redeems-create"}},{default:E((()=>[L])),_:1})])]))}:void 0,k(o).canView?{name:"action",fn:E((({value:e})=>[h(l,{icon:"lnil lnil-eye",to:{name:"codes-redeems-:id",params:{id:`${e.id}`}}},{default:E((()=>[T])),_:2},1032,["to"])]))}:void 0]),1032,["headers","data","total","is-loading","is-action"])])}}});export default F;
