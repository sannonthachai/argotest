var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&o(e,a,l[a]);if(t)for(var a of t(l))i.call(l,a)&&o(e,a,l[a]);return e},u=(e,t)=>l(e,a(t));import{c as d,j as r,h as c,e as v}from"./index.d7dc1ff6.js";import{_ as m}from"./ValidateMessageBox.vue_vue&type=script&setup=true&lang.ac2d19e3.js";import{_ as p,a as f}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as y}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as b}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{_ as h}from"./VMessage.vue_vue&type=script&setup=true&lang.1bdbe413.js";import{_ as g}from"./VModal.31b4f4ba.js";import{p as _,a as k,d as x,r as j,k as V,S as I,o as C,y as E,F as w,h as S,x as U,K as A,ai as O,e as D,H as N,I as B,G as P,t as $,i as L,aj as T,g as F,Y as K,E as M,q as z,A as q,b as G,ae as H}from"./vendor.1c8b4573.js";import{u as X}from"./useNotyf.ddf08f06.js";import{_ as Y}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{_ as J}from"./FormTemplate.a6fb27bf.js";import{u as Q}from"./useOptionApi.f4dc99b9.js";import{u as R}from"./useAssessmentEvaluationApi.428f57a1.js";_("data-v-861d3f74");const W={class:"modal-form"},Z={class:"columns is-multiline"},ee={class:"column is-12"},le=S("label",null,"Title",-1),ae={class:"column is-12"},te=S("label",null,"Objective",-1),se={class:"column is-12"},ie=S("label",{class:"detail-label"},"Detail",-1),oe={key:0,class:"content"},ne=["onKeypress"],ue=P("Submit"),de=P("Update"),re=P("Add");k();var ce=x({props:{modelValue:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},item:{type:Object,default:void 0}},emits:["add","update","update:modelValue"],setup(e,{emit:l}){const a=e,t=X(),s=j({idx:a.items.length,title:"Evaluation Item",key:`evaluation-item-${a.items.length+1}`,objective:"",detail:[]}),i=j(""),o=j([]),r=V((()=>s.value.title&&s.value.key&&s.value.objective&&o.value.length)),c=()=>{l("update:modelValue",!1),o.value=[],s.value={idx:a.items.length,title:"Evaluation Item",key:`evaluation-item-${a.items.length+1}`,objective:"",detail:[]}},v=()=>{a.items.some((e=>e.idx===+s.value.idx))?t.warning("Duplicate oreder index of item"):(l("add",u(n({},s.value),{idx:+s.value.idx,detail:o.value})),c())},m=()=>{l("update",u(n({},s.value),{detail:o.value})),c()},y=()=>{i.value&&(o.value.push(i.value),i.value="")};I((()=>a.item),(()=>{a.item&&(s.value=n({},a.item),o.value=[...a.item.detail])}));return(l,a)=>{const t=p,n=f,u=h,b=p,_=d,k=f,x=g;return C(),E(x,{title:"Add Evaluation Item",size:"large",open:e.modelValue,onClose:c},{content:w((()=>[S("div",W,[S("div",Z,[S("div",ee,[U(n,null,{default:w((()=>[le,U(t,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.title=e),type:"text",class:"input",placeholder:"Evaluation Item X"},null,512),[[O,s.value.title]])])),_:1})])),_:1})]),S("div",ae,[U(n,null,{default:w((()=>[te,U(t,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.objective=e),type:"text",class:"input",placeholder:"Objective of item"},null,512),[[O,s.value.objective]])])),_:1})])),_:1})]),S("div",se,[ie,o.value.length?(C(),D("div",oe,[(C(!0),D(N,null,B(o.value,((e,l)=>(C(),E(u,{key:e,closable:"",onClose:e=>(e=>{o.value.splice(e,1)})(l)},{default:w((()=>[P($(e),1)])),_:2},1032,["onClose"])))),128))])):L("",!0),U(k,{addons:""},{default:w((()=>[U(b,{expanded:""},{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),type:"text",class:"input",placeholder:"Detail of item",onKeypress:T(y,["enter"])},null,40,ne),[[O,i.value]])])),_:1}),U(b,null,{default:w((()=>[U(_,{color:"primary",disabled:!i.value,onClick:y},{default:w((()=>[ue])),_:1},8,["disabled"])])),_:1})])),_:1})])])])])),action:w((()=>[e.item?(C(),E(_,{key:0,color:"primary",disabled:!F(r),onClick:m},{default:w((()=>[de])),_:1},8,["disabled"])):(C(),E(_,{key:1,color:"primary",disabled:!F(r),onClick:v},{default:w((()=>[re])),_:1},8,["disabled"]))])),_:1},8,["open"])}}});ce.__scopeId="data-v-861d3f74",_("data-v-4704a266");const ve={class:"modal-form"},me={class:"columns is-multiline"},pe={class:"column is-9"},fe=S("label",null,"Title",-1),ye={class:"column is-3"},be=S("label",null,"Score",-1),he={class:"column is-12"},ge=S("label",null,"Description",-1),_e=P("Update"),ke=P("Add");k();var xe=x({props:{modelValue:{type:Boolean,default:!1},score:{type:Object,default:void 0},scores:{type:Array,default:()=>[]}},emits:["add","update","update:modelValue"],setup(e,{emit:l}){const a=e,t=X(),s=j({title:"",value:0,text:""}),i=V((()=>s.value.title&&s.value.value&&s.value.text)),o=()=>{l("update:modelValue",!1),s.value={title:"",value:0,text:""}},r=()=>{a.scores.some((e=>e.value===+s.value.value))?t.warning("Duplicate score value"):(l("add",u(n({},s.value),{value:+s.value.value})),o())},c=()=>{l("update",u(n({},s.value),{value:+s.value.value})),o()};return I((()=>a.score),(()=>{a.score&&(s.value=n({},a.score))})),(l,a)=>{const t=p,n=f,u=d,v=g;return C(),E(v,{title:"Add Score",size:"large",open:e.modelValue,onClose:o},{content:w((()=>[S("div",ve,[S("div",me,[S("div",pe,[U(n,null,{default:w((()=>[fe,U(t,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.title=e),type:"text",class:"input",placeholder:"title (Advanced Understanding, ...)"},null,512),[[O,s.value.title]])])),_:1})])),_:1})]),S("div",ye,[U(n,null,{default:w((()=>[be,U(t,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.value=e),type:"text",class:"input",placeholder:"score point"},null,512),[[O,s.value.value]])])),_:1})])),_:1})]),S("div",he,[U(n,null,{default:w((()=>[ge,U(t,null,{default:w((()=>[A(S("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.text=e),class:"textarea",rows:"3",placeholder:"Explain here"},null,512),[[O,s.value.text]])])),_:1})])),_:1})])])])])),action:w((()=>[e.score?(C(),E(u,{key:0,color:"primary",disabled:!F(i),onClick:c},{default:w((()=>[_e])),_:1},8,["disabled"])):(C(),E(u,{key:1,color:"primary",disabled:!F(i),onClick:r},{default:w((()=>[ke])),_:1},8,["disabled"]))])),_:1},8,["open"])}}});xe.__scopeId="data-v-4704a266",_("data-v-d60a65be");const je=P("Back"),Ve=P("Edit"),Ie=P("Submit"),Ce={key:0,class:"form-fieldset"},Ee=S("div",{class:"fieldset-heading"},[S("h4",null,"Evaluation Information")],-1),we={class:"columns is-multiline"},Se={class:"column is-12"},Ue=S("label",null,"Title",-1),Ae=["readonly"],Oe={class:"column is-9"},De=S("label",null,"Curriculum",-1),Ne={class:"column is-3"},Be=S("label",null,"Lesson No.",-1),Pe=["readonly"],$e={class:"form-fieldset"},Le={class:"fieldset-heading"},Te={class:"is-flex is-align-items-center is-justify-content-space-between"},Fe=S("h4",{class:"mr-3"},"Evaluation Item",-1),Ke={key:0},Me={class:"header"},ze={class:"title is-6 is-narrow is-bolder"},qe={key:0},Ge=["onClick"],He=[S("div",{class:"icon"},[S("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),S("div",{class:"meta"},[S("span",{class:"dark-inverted"},"Edit"),S("span",null,"Edit this record")],-1)],Xe=["onClick"],Ye=[S("div",{class:"icon"},[S("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),S("div",{class:"meta"},[S("span",{class:"dark-inverted"},"Delete"),S("span",null,"Delete this record")],-1)],Je=S("strong",null,"Objective:",-1),Qe={key:0,class:"content"},Re={class:"form-fieldset"},We={class:"fieldset-heading"},Ze={class:"is-flex is-align-items-center is-justify-content-space-between"},el=S("h4",{class:"mr-3"},"Score Evaluation",-1),ll={key:0},al={class:"header"},tl={class:"title is-6 is-narrow is-bolder"},sl={key:0},il=["onClick"],ol=[S("div",{class:"icon"},[S("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),S("div",{class:"meta"},[S("span",{class:"dark-inverted"},"Edit"),S("span",null,"Edit this record")],-1)],nl=["onClick"],ul=[S("div",{class:"icon"},[S("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),S("div",{class:"meta"},[S("span",{class:"dark-inverted"},"Delete"),S("span",null,"Delete this record")],-1)],dl={class:"content mx-auto"},rl={class:"default-score"},cl={class:"mt-3"},vl=P("Use Default");k();var ml=x({props:{title:{type:String,default:"Create Assessment Evaluation"},validate:{type:Object,default:void 0},evaluationInfo:{type:Object,default:void 0},readonly:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:l}){const a=e,{getCurriculums:t}=Q(),s=j(!1),i=j([{title:"Advanced Understanding",value:4,text:"Student has met the learning objectives. Student demonstrates mastery of the performance expectations or learning goals and shows ability to apply and transfer learning with depth and complexit."},{title:"Proficient",value:3,text:"Student has met the learning objectives. Student demonstrates mastery of the performance expectations or learning goals."},{title:"Approaching",value:2,text:"Student is approaching the learning objectives. Student demonstrates partial mastery of the performance expectations or learning goals."},{title:"Novice",value:1,text:"Student has not met the learning objectives. Student provides little evidence of meeting the performance expectations or learning goals."}]),o=j({title:"",lessonNo:0,curriculumId:0,items:[],scores:[]}),v=j(!1),h=j(!1),g=j(void 0),_=j(void 0),k=()=>{v.value=!v.value},x=()=>{h.value=!h.value},V=e=>{o.value.items.push(e)},I=e=>{o.value.scores.push(e)},T=e=>{const l=o.value.items.findIndex((l=>l.idx===e.idx));o.value.items[l]=e},z=e=>{const l=o.value.scores.findIndex((l=>l.value===e.value));o.value.scores[l]=e},q=()=>{o.value.items=o.value.items.map(((e,l)=>u(n({},e),{key:`evaluation-item-${l+1}`,idx:l})))},G=()=>{l("update",o.value)};return K((async()=>{var e,l,t,i,n;s.value=!0,await void(a.evaluationInfo&&(o.value.title=null==(e=a.evaluationInfo)?void 0:e.title,o.value.lessonNo=(null==(l=a.evaluationInfo)?void 0:l.lessonNo)||0,o.value.curriculumId=(null==(t=a.evaluationInfo)?void 0:t.curriculumId)||0,o.value.items=(null==(i=a.evaluationInfo)?void 0:i.items)||[],o.value.scores=(null==(n=a.evaluationInfo)?void 0:n.scores)||[])),s.value=!1})),(l,a)=>{const n=d,u=m,j=p,K=f,H=y,X=r,Q=c,R=b,W=M("VueDraggable"),Z=ce,ee=Y,le=xe,ae=J;return C(),E(ae,{title:e.title},{buttons:w((()=>[U(n,{icon:"feather:arrow-left",onClick:a[0]||(a[0]=e=>l.$router.go(-1))},{default:w((()=>[je])),_:1}),e.readonly?(C(),E(n,{key:0,icon:"feather:edit",color:"primary",to:"#edit"},{default:w((()=>[Ve])),_:1})):(C(),E(n,{key:1,icon:"feather:check",color:"primary",onClick:G},{default:w((()=>[Ie])),_:1}))])),default:w((()=>[U(u,{validate:e.validate},null,8,["validate"]),s.value?L("",!0):(C(),D("div",Ce,[Ee,S("div",we,[S("div",Se,[U(K,null,{default:w((()=>[Ue,U(j,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.title=e),type:"text",class:"input",placeholder:"evaluation",readonly:e.readonly},null,8,Ae),[[O,o.value.title]])])),_:1})])),_:1})]),S("div",Oe,[U(K,null,{default:w((()=>[De,U(j,null,{default:w((()=>[U(H,{modelValue:o.value.curriculumId,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.curriculumId=e),"callback-search":F(t),"close-on-select":!1,"close-on-search":!1,"can-clear":!1,"track-by":"id","value-prop":"id","label-by":"name",readonly:e.readonly},null,8,["modelValue","callback-search","readonly"])])),_:1})])),_:1})]),S("div",Ne,[U(K,null,{default:w((()=>[Be,U(j,null,{default:w((()=>[A(S("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.lessonNo=e),type:"number",min:"1",max:"48",class:"input",placeholder:"No.",readonly:e.readonly},null,8,Pe),[[O,o.value.lessonNo]])])),_:1})])),_:1})])])])),S("div",$e,[S("div",Le,[S("div",Te,[Fe,e.readonly?L("",!0):(C(),E(X,{key:0,color:"info",icon:"feather:plus",circle:"",outlined:"",onClick:k}))])]),o.value.items.length?(C(),D("div",Ke,[U(W,{modelValue:o.value.items,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.items=e),"item-key":"idx",class:"list-group","ghost-class":"ghost",disabled:e.readonly,onChange:q},{item:w((({element:l})=>[U(R,{class:"score-card",elevated:""},{default:w((()=>[S("div",Me,[S("div",null,[S("h2",ze," (idx: "+$(l.idx)+") "+$(l.title),1),S("p",null,"("+$(l.key)+")",1)]),e.readonly?L("",!0):(C(),D("div",qe,[U(Q,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[S("a",{role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{g.value=e,k()})(l)},He,8,Ge),S("a",{role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{const l=o.value.items.findIndex((l=>l.idx===e));o.value.items.splice(l,1),q()})(l.idx)},Ye,8,Xe)])),_:2},1024)]))]),S("p",null,[Je,P(" "+$(l.objective),1)]),l.detail.length?(C(),D("div",Qe,[S("ul",null,[(C(!0),D(N,null,B(l.detail,((e,l)=>(C(),D("li",{key:`d-${l}`},[S("p",null,$(e),1)])))),128))])])):L("",!0)])),_:2},1024)])),_:1},8,["modelValue","disabled"])])):L("",!0),U(Z,{modelValue:v.value,"onUpdate:modelValue":[a[5]||(a[5]=e=>v.value=e),a[6]||(a[6]=e=>g.value=void 0)],items:o.value.items,item:g.value,onAdd:V,onUpdate:T},null,8,["modelValue","items","item"])]),S("div",Re,[S("div",We,[S("div",Ze,[el,e.readonly?L("",!0):(C(),E(X,{key:0,color:"warning",icon:"feather:plus",circle:"",outlined:"",onClick:x}))])]),o.value.scores.length?(C(),D("div",ll,[(C(!0),D(N,null,B(o.value.scores,(l=>(C(),E(R,{key:l.value,class:"score-card",elevated:""},{default:w((()=>[S("div",al,[S("h2",tl,$(l.title)+" - "+$(l.value),1),e.readonly?L("",!0):(C(),D("div",sl,[U(Q,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[S("a",{role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{_.value=e,x()})(l)},ol,8,il),S("a",{role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{const l=o.value.scores.findIndex((l=>l.value===+e));o.value.scores.splice(l,1)})(l.value)},ul,8,nl)])),_:2},1024)]))]),S("p",null,$(l.text),1)])),_:2},1024)))),128))])):(C(),E(R,{key:1},{default:w((()=>[U(ee,{title:"Use Evaluation Score Default",subtitle:"or create new evaluation score"},{action:w((()=>[S("div",dl,[S("ul",rl,[(C(!0),D(N,null,B(i.value,(e=>(C(),D("li",{key:e.value},$(e.title)+" - "+$(e.value),1)))),128))])]),S("div",cl,[U(n,{color:"primary",onClick:a[7]||(a[7]=e=>o.value.scores=i.value)},{default:w((()=>[vl])),_:1})])])),_:1})])),_:1})),U(le,{modelValue:h.value,"onUpdate:modelValue":[a[8]||(a[8]=e=>h.value=e),a[9]||(a[9]=e=>_.value=void 0)],score:_.value,onAdd:I,onUpdate:z},null,8,["modelValue","score"])])])),_:1},8,["title"])}}});function pl(){const e=z({isLoading:!1,assessmentEvaluationInfo:void 0,validate:{}}),l=X(),a=q(),t=G(),{createEvaluation:s,getEvaluationById:i,updateEvaluationById:o}=R(),d=V((()=>parseInt(a.params.id))),r=V((()=>"#edit"===a.hash)),c=async()=>{e.isLoading=!0;const l=await i(d.value);e.isLoading=!1,e.assessmentEvaluationInfo=l};return K((()=>{d.value&&c()})),u(n({},H(e)),{isEdit:r,createAssessmentEval:async a=>{const{code:i,message:o}=await s(a);i?"object"==typeof o?e.validate=o:l.error(v(o)):(l.success(`Create ${a.title} Success!`),t.push({name:"products-assessments"}))},fetchEvaluationByEvalId:c,updateAssessmentEval:async a=>{const{code:s,message:i}=await o(d.value,a);s?"object"==typeof i?e.validate=i:l.error(v(i)):(l.success(`Update ${a.title} Success!`),t.push({name:"products-assessments"}))}})}ml.__scopeId="data-v-d60a65be";export{ml as _,pl as u};
