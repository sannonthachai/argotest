var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,d=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&t(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&t(e,l,a[l]);return e},n=(e,s)=>a(e,l(s));import{C as r,g as c,z as u,c as p,o as v}from"./index.d7dc1ff6.js";import{_ as m}from"./CustomTabs.vue_vue&type=script&setup=true&lang.b78bee55.js";import{_ as y}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as f,a as h}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as b}from"./VRadio.89eaf975.js";import{G as k,a as _,b as g,c as w,d as O,e as C,f as V}from"./classroom.enum.d4d52ed5.js";import{p as I,a as A,d as U,r as T,o as S,e as L,h as D,H as E,I as G,t as M,i as R,G as j,b as x,A as N,k as P,Y as H,E as B,y as Z,F as q,x as W,g as K,K as F,ai as z,ao as Y,ap as $,V as J,q as Q,ae as X,D as ee}from"./vendor.1c8b4573.js";import{_ as ae}from"./Datatable.aae3ef08.js";import{_ as le}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{_ as se}from"./VModal.31b4f4ba.js";import{_ as ie}from"./FormTemplate.a6fb27bf.js";import{u as oe,a as te}from"./useGuardGroupClass.2120035c.js";import"./useNotyf.ddf08f06.js";import{u as de}from"./useOptionApi.f4dc99b9.js";import{c as ne}from"./csv.helper.d14e8c45.js";import{u as re}from"./useClassroomApi.cba9f1f2.js";I("data-v-749cffee");const ce=D("h4",null," ถ้าไม่ได้ใส่ column description ระบบจะดึง Description ที่ท่านใส่ไว้ใน Curriculum มาให้ (ถ้ามี) ",-1),ue=D("h4",{class:"red"}," * Master Class และ Workshop ไม่สามารถทำผ่านอัปโหลด csv ได้ ",-1),pe={key:0,class:"table-container"},ve={class:"table is-hoverable is-fullwidth"},me={key:1,class:"table-container"},ye={class:"table is-hoverable is-fullwidth"},fe=D("thead",null,[D("tr",null,[D("th",{scope:"col"},[j("topic"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},"description_en"),D("th",{scope:"col"},"description_th"),D("th",{scope:"col"},"description_vn"),D("th",{scope:"col"},[j("teacher_id"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},[j("time"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},[j("duration"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},[j("status"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},[j("access_limit"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},"level"),D("th",{scope:"col"},"link"),D("th",{scope:"col"},[j("type"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},[j("country"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},"curriculum_id"),D("th",{scope:"col"},[j("service"),D("span",{class:"red"},"*")]),D("th",{scope:"col"},"host"),D("th",{scope:"col"},"student_group"),D("th",{scope:"col"},"campaign"),D("th",{scope:"col"},"student_ids")])],-1);A();var he=U({props:{headers:{type:Array,required:!1,default:void 0},dataList:{type:Array,required:!1,default:void 0},groupClassIssue:{type:Array,default:void 0}},setup(e){const a=e,l=T([{topic:"Business for student th",description_en:"Test",description_th:"ทดสอบ",description_vn:"kiểm tra",teacher_id:145,time:"2021-09-15 19:00",duration:55,status:"approve",access_limit:4,level:"Intermediate (A2-B1)",link:"https://www.crowdcast.io/e/ways-to-sound-more",type:"group",country:"th",curriculum_id:269,service:k.ETC,host:"",student_group:_.NORMAL,campaign:"",student_ids:""},{topic:"Business for student vn",description_en:"Test",description_th:"ทดสอบ",description_vn:"kiểm tra",teacher_id:145,time:"2021-09-15 19:00",duration:55,status:"approve",access_limit:4,level:"Intermediate (A2-B1)",link:"https://www.crowdcast.io/e/ways-to-sound-more",type:"group",country:"vn",curriculum_id:269,service:k.ETC,host:"",student_group:_.NORMAL,campaign:"",student_ids:""},{topic:"Movie 4",description_en:"Test",description_th:"ทดสอบ",description_vn:"kiểm tra",teacher_id:146,time:"2021-09-15 19:00",duration:55,status:"approve",access_limit:4,level:"Intermediate (A2-B1)",link:"https://www.crowdcast.io/e/ways-to-sound-more",type:"group",country:"th",curriculum_id:269,service:k.ETC,host:"",student_group:_.NORMAL,campaign:"",student_ids:""},{topic:"Psychology",description_en:"Test",description_th:"ทดสอบ",description_vn:"kiểm tra",teacher_id:147,time:"2021-09-15 19:00",duration:55,status:"approve",access_limit:4,level:"Advance (B2)",link:"https://www.crowdcast.io/e/ways-to-sound-more",type:"group",country:"th",curriculum_id:314,service:k.ETC,host:"",student_group:_.NORMAL,campaign:"",student_ids:""},{topic:"B2S",description_en:"Test",description_th:"ทดสอบ",description_vn:"kiểm tra",teacher_id:145,time:"2021-09-15 19:00",duration:55,status:g.APPROVE,access_limit:4,level:"",link:"",type:w.GROUP,country:r.TH,curriculum_id:"",service:k.ZOOM_EDUCATION,host:"064Rpnj2QI2LjWcJ8VrtVg",student_group:_.NORMAL,campaign:O.B2S,student_ids:"1132,5103"}]);return(s,i)=>(S(),L(E,null,[ce,ue,a.dataList?(S(),L("div",pe,[D("table",ve,[D("thead",null,[D("tr",null,[(S(!0),L(E,null,G(a.headers,(e=>(S(),L("th",{key:e,scope:"col"},M(e),1)))),128))])]),D("tbody",null,[(S(!0),L(E,null,G(e.dataList,((e,a)=>(S(),L("tr",{key:a},[(S(!0),L(E,null,G(e,((e,a)=>(S(),L("td",{key:a},M(e),1)))),128))])))),128))])])])):e.groupClassIssue&&e.groupClassIssue.length?R("",!0):(S(),L("div",me,[D("table",ye,[fe,D("tbody",null,[(S(!0),L(E,null,G(l.value,(e=>(S(),L("tr",{key:e.topic},[D("td",null,M(null==e?void 0:e.topic),1),D("td",null,M(null==e?void 0:e.description_en),1),D("td",null,M(null==e?void 0:e.description_th),1),D("td",null,M(null==e?void 0:e.description_vn),1),D("td",null,M(null==e?void 0:e.teacher_id),1),D("td",null,M(null==e?void 0:e.time),1),D("td",null,M(null==e?void 0:e.duration),1),D("td",null,M(null==e?void 0:e.status),1),D("td",null,M(null==e?void 0:e.access_limit),1),D("td",null,M(null==e?void 0:e.level),1),D("td",null,M(null==e?void 0:e.link),1),D("td",null,M(null==e?void 0:e.type),1),D("td",null,M(null==e?void 0:e.country),1),D("td",null,M(null==e?void 0:e.curriculum_id),1),D("td",null,M(null==e?void 0:e.service),1),D("td",null,M(null==e?void 0:e.host),1),D("td",null,M(null==e?void 0:e.student_group),1),D("td",null,M(null==e?void 0:e.campaign),1),D("td",null,M(null==e?void 0:e.student_ids),1)])))),128))])])]))],64))}});he.__scopeId="data-v-749cffee";I("data-v-4c6ae68a");const be=j("Cancel"),ke=j("Save"),_e=j("Edit"),ge=j("Save"),we={key:0,class:"form-fieldset"},Oe={class:"field"},Ce={key:1,class:"form-fieldset"},Ve={class:"columns is-multiline"},Ie={class:"column is-12"},Ae={class:"field"},Ue=D("label",null,[j(" Topic "),D("span",{class:"red"},"*")],-1),Te={class:"control"},Se=["readonly"],Le={class:"column is-12"},De={class:"field"},Ee=D("label",null,"Description",-1),Ge=D("label",null," ** ถ้าไม่ได้ใส่ description ระบบจะดึง description ที่ท่านใส่ไว้ใน Curriculum มาให้ (ถ้ามี) ",-1),Me={class:"control"},Re=["readonly"],je={class:"column is-12"},xe={class:"field"},Ne=D("label",null,"Description (Optional)",-1),Pe={class:"control"},He=["readonly"],Be={class:"column is-12"},Ze={class:"field"},qe=D("label",null,"Description (Optional)",-1),We={class:"control"},Ke=["readonly"],Fe={key:2,class:"form-fieldset"},ze=D("div",{class:"fieldset-heading"},[D("h4",null,"Class Details"),D("p",null,"Details for the group class")],-1),Ye={class:"columns is-multiline"},$e={class:"column is-12"},Je={class:"field"},Qe=D("label",null,[j(" Coach "),D("span",{class:"red"},"*")],-1),Xe={class:"control"},ea={class:"column is-6"},aa={class:"field"},la=D("label",null,[j(" Datetime "),D("span",{class:"red"},"*")],-1),sa={class:"control"},ia=["value","readonly"],oa={class:"column is-6"},ta={class:"field"},da=D("label",null,[j(" Class Duration "),D("span",{class:"red"},"*")],-1),na={class:"control"},ra=["readonly"],ca=D("a",{class:"button is-static"},"min",-1),ua={class:"column is-6"},pa={class:"field"},va=D("label",null,[j(" Group Class Level "),D("span",{class:"red"},"*")],-1),ma={class:"control"},ya={class:"column is-6"},fa={class:"field"},ha=D("label",null,[j(" Group Class Type "),D("span",{class:"red"},"*")],-1),ba={class:"control"},ka={class:"column is-6"},_a={class:"field"},ga=D("label",null,[j(" Student Group "),D("span",{class:"red"},"*")],-1),wa={class:"control"},Oa={class:"column is-6"},Ca={class:"field"},Va=D("label",null,[j(" Country "),D("span",{class:"red"},"*")],-1),Ia={class:"control"},Aa={class:"column is-6"},Ua={class:"field"},Ta=D("label",null,[j(" Access Limit "),D("span",{class:"red"},"*")],-1),Sa={class:"control"},La=["readonly"],Da={class:"column is-6"},Ea={class:"field"},Ga=D("label",null,"Share Limit",-1),Ma={class:"control"},Ra=["readonly"],ja=D("small",{class:"help has-text-danger"},"* for special master class/workshop",-1),xa={class:"column is-9"},Na={class:"field"},Pa=D("label",null,[j(" Status "),D("span",{class:"red"},"*")],-1),Ha={class:"control"},Ba={key:3,class:"form-fieldset"},Za=D("div",{class:"fieldset-heading"},[D("h4",null,"Class Optionals"),D("p",null,"Optionals curriculum & campaign for the group class")],-1),qa={class:"columns is-multiline"},Wa={class:"column is-12"},Ka={class:"field"},Fa=D("label",null,"Curriculum",-1),za={class:"control"},Ya={class:"column is-12"},$a={class:"field"},Ja=D("label",null,"Campaign",-1),Qa={class:"control"},Xa=D("div",{class:"fieldset-heading"},[D("h4",null,"Service"),D("p",null,"Meeting service for group class")],-1),el={class:"columns is-multiline"},al={class:"column is-12"},ll={class:"field"},sl=D("label",null,[j(" Service "),D("span",{class:"red"},"*")],-1),il={class:"control"},ol={class:"column is-12"},tl=D("label",null,[j("Host"),D("span",{class:"red"},"*")],-1),dl={class:"multiselect-single-label"},nl={class:"light-text"},rl={class:"select-option-text"},cl={class:"light-text"},ul=j(" Link "),pl={key:0,class:"red"},vl=["readonly"],ml={key:0},yl=D("div",{class:"fieldset-heading mt-5"},[D("h4",null,"Workshop"),D("p",null,"Fill more detail for workshop")],-1),fl={class:"columns is-multiline"},hl={class:"column is-12"},bl={class:"field"},kl=D("label",null," Objective ",-1),_l={class:"control"},gl=["readonly"],wl={class:"column is-12"},Ol={class:"field"},Cl=D("label",null," Additional Note ",-1),Vl={class:"control"},Il=["readonly"],Al={class:"column is-12"},Ul={class:"field"},Tl=D("label",null,[j("Select online or offline workshop "),D("span",{class:"red"},"*")],-1),Sl={class:"control"},Ll={class:"column is-12"},Dl={class:"field"},El=D("label",null,[j(" Location "),D("span",{class:"red"},"*")],-1),Gl={class:"control"},Ml=["readonly"],Rl={class:"column is-12"},jl={class:"field"},xl=D("label",null,[j(" Location Link "),D("span",{class:"red"},"*")],-1),Nl={class:"control"},Pl=["readonly"],Hl={class:"help has-text-danger"},Bl={class:"column is-12"},Zl={class:"field"},ql=D("label",null,"Transportation",-1),Wl={class:"control"},Kl=["readonly"],Fl={key:4,class:"form-fieldset"},zl=D("div",{class:"fieldset-heading"},[D("h4",null,"Group Class CSV"),D("p",null,"Upload group class with CSV file.")],-1),Yl={class:"columns is-multiline"},$l={key:0,class:"field"},Jl={class:"control"},Ql={class:"file has-name is-right"},Xl=D("span",{class:"file-cta"},[D("span",{class:"file-icon"},[D("i",{class:"fas fa-cloud-upload-alt"})]),D("span",{class:"file-label"},"Upload")],-1),es={class:"file-name light-text"},as={key:6},ls=D("div",{class:"red"},"*Group class issue",-1),ss=j("Confirm"),is=j("Cancel");A();var os=U({props:{title:{type:String,default:"Create Group Class"},data:{type:Object,required:!0},classId:{type:Number,default:void 0,required:!1},readonly:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0}},emits:["update","create","update:data"],setup(e,{emit:a}){const l=e,{uploadInputCsv:s}=oe(),{capabilities:i}=te(),{user:o}=c(),t=x(),v=N(),{getCoaches:_,getCurriculums:g,getHostZooms:V,getHostZoomB2S:I}=de(),A=T((null==o?void 0:o.manageCountry)?[...o.manageCountry,r.TH_VN]:[]),U=T([]),Q=T([]),X=T(!1),ee=T(!1),re=T(void 0),ce=T(C.MANUAL),ue=T(void 0),pe=T({});P((()=>{var e;return null==(e=pe.value.headers)?void 0:e.map((e=>({key:e,label:e.charAt(0).toUpperCase()+e.slice(1)})))}));const ve=[{key:"topic",label:"Topic"},{key:"description",label:"Description"},{key:"coachId",label:"Coach Id"},{key:"time",label:"Time"},{key:"duration",label:"Duration"},{key:"status",label:"Status"},{key:"accessLimit",label:"AccessLimit"},{key:"type",label:"Type"},{key:"country",label:"Country"},{key:"studentGroup",label:"Student Group"},{key:"campaign",label:"Campaign"},{key:"service",label:"Service"},{key:"hostId",label:"Host"},{key:"message",label:"Message"}],me=()=>{t.push({name:"classrooms-group-classes",query:d({},v.query)})},ye=Object.entries(O).map((([e,a])=>({value:a,text:O.B2S===a?"B2S":e.split("_").map((e=>u(e))).join(" ")}))),fe=async e=>{const a=e.target.files[0];re.value=a;const l=new FileReader;l.onload=e=>{pe.value=ne(e.target.result)},l.readAsText(a)},os=async()=>{re.value&&(ue.value=await s(re.value),X.value=!1,pe.value={},re.value=void 0)},ts=e=>{switch(e){case w.GROUP:a("update:data",n(d({},l.data),{campaign:void 0,service:k.ETC,host:void 0}));break;case w.MASTER:a("update:data",n(d({},l.data),{campaign:O.MASTER_CLASS,service:k.ZOOM_EDUCATION,host:void 0}));break;case w.WORKSHOP:a("update:data",n(d({},l.data),{campaign:O.WORKSHOP,service:k.ETC,host:void 0}))}},ds=e=>{switch(e){case k.ZOOM:a("update:data",n(d({},l.data),{campaign:void 0,host:void 0}));break;case k.ZOOM_EDUCATION:a("update:data",n(d({},l.data),{campaign:O.B2S,host:void 0}));break;case k.ETC:a("update:data",n(d({},l.data),{campaign:void 0,host:void 0}))}},ns=()=>{cs.value&&(l.data.workshopDescription=n(d({},l.data.workshopDescription),{transportation:"",address:"",addressLink:""}))},rs=P((()=>l.data.service===k.ZOOM_EDUCATION?Q.value:U.value)),cs=P((()=>{var e,a;return(null==(e=l.data)?void 0:e.type)===w.WORKSHOP&&(null==(a=l.data)?void 0:a.online)})),us=P((()=>{var e;return[k.ZOOM,k.ZOOM_EDUCATION].includes(null==(e=l.data)?void 0:e.service)})),ps=P((()=>{var e,a,s;return null==(s=null==(a=null==(e=l.data)?void 0:e.workshopDescription)?void 0:a.addressLink)?void 0:s.match(/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/)})),vs=P((()=>{var e,a,s,i,o,t;return(null==(e=l.data)?void 0:e.type)!==w.WORKSHOP||((null==(a=l.data)?void 0:a.online)?l.data.service===k.ETC?!!(null==(s=l.data)?void 0:s.link):!!(null==(i=l.data)?void 0:i.hostId):!!(null==(t=null==(o=l.data)?void 0:o.workshopDescription)?void 0:t.address)&&ps.value)})),ms=P((()=>{var e,a,s,i,o,t,d,n,r,c,u,p;return ce.value===C.MANUAL?!!(null==(e=l.data)?void 0:e.studentGroup)&&!!(null==(a=l.data)?void 0:a.accessLimit)&&!!(null==(s=l.data)?void 0:s.time)&&!!(null==(i=l.data)?void 0:i.duration)&&!!(null==(o=l.data)?void 0:o.coachId)&&!!(null==(t=l.data)?void 0:t.service)&&!!(null==(d=l.data)?void 0:d.status)&&!!(null==(n=l.data)?void 0:n.level)&&!!(null==(r=l.data)?void 0:r.topic)&&!!(null==(c=l.data)?void 0:c.type)&&!!(null==(u=l.data)?void 0:u.country)&&(null==(p=l.data)?void 0:p.accessLimit)>0&&vs.value:!!re.value})),ys=P((()=>{var e;return[w.MASTER,w.WORKSHOP].includes(null==(e=l.data)?void 0:e.type)})),fs=()=>{l.isEdit?a("update"):ce.value===C.MANUAL?a("create"):X.value=!0};return H((()=>{(async()=>{const[e,a]=await Promise.all([V(),I()]);U.value=e,Q.value=a})()})),(a,s)=>{const o=p,t=m,d=y,n=f,r=h,c=B("v-date-picker"),u=B("Multiselect"),v=b,O=he,V=ae,I=le,U=se,T=ie;return S(),Z(T,{title:e.title},{buttons:q((()=>[W(o,{icon:"feather:arrow-left","dark-outline":"",onClick:me},{default:q((()=>[be])),_:1}),e.isEdit||e.readonly?(S(),L(E,{key:0},[e.isEdit?(S(),Z(o,{key:0,color:"primary",icon:"feather:save",disabled:!K(ms),onClick:fs},{default:q((()=>[ke])),_:1},8,["disabled"])):e.canEdit&&e.readonly?(S(),Z(o,{key:1,color:"primary",icon:"feather:edit",to:"#edit"},{default:q((()=>[_e])),_:1})):R("",!0)],64)):(S(),Z(o,{key:1,color:"primary",icon:"feather:save",disabled:!K(ms),onClick:fs},{default:q((()=>[ge])),_:1},8,["disabled"]))])),default:q((()=>{var a,p;return[!K(i).canUploadGroupClassCsv||e.isEdit||l.classId?R("",!0):(S(),L("div",we,[D("div",Oe,[W(t,{modelValue:ce.value,"onUpdate:modelValue":s[0]||(s[0]=e=>ce.value=e),slider:"",class:"tab-box",tabs:[{label:"Manual",value:"manual"},{label:"CSV File",value:"csvFile"}]},{tab:q((()=>[])),_:1},8,["modelValue"])])])),ce.value===K(C).MANUAL?(S(),L("div",Ce,[D("div",Ve,[D("div",Ie,[D("div",Ae,[Ue,D("div",Te,[F(D("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.data.topic=a),type:"text",class:"input is-primary-focus",placeholder:"fill your topic...",readonly:e.readonly},null,8,Se),[[z,e.data.topic]])])])]),D("div",Le,[D("div",De,[Ee,Ge,D("div",Me,[F(D("textarea",{"onUpdate:modelValue":s[2]||(s[2]=a=>e.data.description=a),class:"textarea is-primary-focus",rows:"2",placeholder:"fill your (English) description...",readonly:e.readonly},null,8,Re),[[z,e.data.description]])])])]),D("div",je,[D("div",xe,[Ne,D("div",Pe,[F(D("textarea",{"onUpdate:modelValue":s[3]||(s[3]=a=>e.data.descriptionTh=a),class:"textarea is-primary-focus",rows:"2",placeholder:"fill your (Thai) description...",readonly:e.readonly},null,8,He),[[z,e.data.descriptionTh]])])])]),D("div",Be,[D("div",Ze,[qe,D("div",We,[F(D("textarea",{"onUpdate:modelValue":s[4]||(s[4]=a=>e.data.descriptionVn=a),class:"textarea is-primary-focus",rows:"2",placeholder:"fill your (Vietnamese) description...",readonly:e.readonly},null,8,Ke),[[z,e.data.descriptionVn]])])])])])])):R("",!0),ce.value===K(C).MANUAL?(S(),L("div",Fe,[ze,D("div",Ye,[D("div",$e,[D("div",Je,[Qe,D("div",Xe,[W(d,{key:e.classId,modelValue:e.data.coachId,"onUpdate:modelValue":s[5]||(s[5]=a=>e.data.coachId=a),"callback-search":K(_),"search-value":e.data.coachId?`${e.data.coachId}`:void 0,placeholder:"select a coach","value-prop":"id","label-by":"nickname","more-label-by":"fullname",disabled:e.readonly,onClear:s[6]||(s[6]=a=>e.data.coachId=void 0)},null,8,["modelValue","callback-search","search-value","disabled"])])])]),D("div",ea,[D("div",aa,[la,D("div",sa,[W(c,{modelValue:e.data.time,"onUpdate:modelValue":s[7]||(s[7]=a=>e.data.time=a),"minute-increment":30,color:"orange",mode:"dateTime",popover:{visibility:e.readonly?"":"click"},"model-config":{type:"date",mask:"iso"},masks:{inputDateTime24hr:"DD/MM/YYYY HH:mm"},is24hr:""},{default:q((({inputValue:a,inputEvents:l})=>[W(r,null,{default:q((()=>[W(n,null,{default:q((()=>[D("input",Y({class:"input is-primary-focus",value:a,readonly:e.readonly},$(l)),null,16,ia)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","popover"])])])]),D("div",oa,[D("div",ta,[da,D("div",na,[W(r,{addons:""},{default:q((()=>[W(n,{expanded:""},{default:q((()=>[F(D("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>e.data.duration=a),type:"number",min:"0",class:"input is-primary-focus",placeholder:"duration",readonly:e.readonly},null,8,ra),[[z,e.data.duration]])])),_:1}),W(n,null,{default:q((()=>[ca])),_:1})])),_:1})])])]),D("div",ua,[D("div",pa,[va,D("div",ma,[W(u,{modelValue:e.data.level,"onUpdate:modelValue":s[9]||(s[9]=a=>e.data.level=a),options:["Beginner (A0-A1)","Intermediate (A2-B1)","Advance (B2)"],placeholder:"select a group class level","can-clear":!1,"can-deselect":!1,disabled:e.readonly},null,8,["modelValue","options","disabled"])])])]),D("div",ya,[D("div",fa,[ha,D("div",ba,[W(u,{modelValue:e.data.type,"onUpdate:modelValue":s[10]||(s[10]=a=>e.data.type=a),options:["group","live","workshop"],placeholder:"select a type","can-clear":!1,"can-deselect":!1,disabled:e.readonly,onSelect:ts},null,8,["modelValue","disabled"])])])]),D("div",ka,[D("div",_a,[ga,D("div",wa,[W(v,{modelValue:e.data.studentGroup,"onUpdate:modelValue":s[11]||(s[11]=a=>e.data.studentGroup=a),value:"normal",disabled:e.readonly,label:"Normal",name:"student_group",color:"primary",square:""},null,8,["modelValue","disabled"]),W(v,{modelValue:e.data.studentGroup,"onUpdate:modelValue":s[12]||(s[12]=a=>e.data.studentGroup=a),value:"kids",disabled:e.readonly,label:"Kids",name:"student_group",color:"primary",square:""},null,8,["modelValue","disabled"])])])]),D("div",Oa,[D("div",Ca,[Va,D("div",Ia,[W(u,{modelValue:e.data.country,"onUpdate:modelValue":s[13]||(s[13]=a=>e.data.country=a),placeholder:"select country",options:A.value,disabled:e.readonly,"can-clear":!1,"can-deselect":!1},null,8,["modelValue","options","disabled"])])])]),D("div",Aa,[D("div",Ua,[Ta,D("div",Sa,[F(D("input",{"onUpdate:modelValue":s[14]||(s[14]=a=>e.data.accessLimit=a),type:"number",min:"0",class:"input is-primary-focus",placeholder:"access limit",readonly:e.readonly},null,8,La),[[z,e.data.accessLimit]])])])]),F(D("div",Da,[D("div",Ea,[Ga,D("div",Ma,[F(D("input",{"onUpdate:modelValue":s[15]||(s[15]=a=>e.data.shareLimit=a),type:"number",min:"0",class:"input is-primary-focus",placeholder:"share limit",readonly:e.readonly},null,8,Ra),[[z,e.data.shareLimit]])]),ja])],512),[[J,K(ys)]]),D("div",xa,[D("div",Na,[Pa,D("div",Ha,[(S(),L(E,null,G(["pending","disapprove","approve"],(a=>W(v,{key:a,modelValue:e.data.status,"onUpdate:modelValue":a=>e.data.status=a,value:a,disabled:e.readonly,label:a,name:"status",color:"primary",square:""},null,8,["modelValue","onUpdate:modelValue","value","disabled","label"]))),64))])])])])])):R("",!0),ce.value===K(C).MANUAL?(S(),L("div",Ba,[Za,D("div",qa,[D("div",Wa,[D("div",Ka,[Fa,D("div",za,[W(d,{key:e.classId,modelValue:e.data.curriculumId,"onUpdate:modelValue":s[16]||(s[16]=a=>e.data.curriculumId=a),"callback-search":K(g),"search-value":e.data.curriculumId?`${e.data.curriculumId}`:void 0,disabled:e.readonly,"label-by":"name","value-prop":"id",placeholder:"select a curriculum",onClear:s[17]||(s[17]=a=>e.data.curriculumId=void 0)},null,8,["modelValue","callback-search","search-value","disabled"])])])]),F(D("div",Ya,[D("div",$a,[Ja,D("div",Qa,[W(u,{modelValue:e.data.campaign,"onUpdate:modelValue":s[18]||(s[18]=a=>e.data.campaign=a),placeholder:"select a campaign",options:K(ye),"value-prop":"value","track-by":"text",label:"text",disabled:e.readonly},null,8,["modelValue","options","disabled"])])])],512),[[J,e.data.type===K(w).GROUP]])]),F(D("div",null,[Xa,D("div",el,[D("div",al,[D("div",ll,[sl,D("div",il,[W(u,{modelValue:e.data.service,"onUpdate:modelValue":s[19]||(s[19]=a=>e.data.service=a),placeholder:"select service",options:["zoom","zoom-education","etc"],disabled:e.readonly,"can-clear":!1,"can-deselect":!1,onSelect:ds},null,8,["modelValue","disabled"])])])]),D("div",ol,[K(us)?(S(),Z(r,{key:0,class:"field"},{default:q((()=>[tl,W(n,null,{default:q((()=>[W(u,{modelValue:e.data.hostId,"onUpdate:modelValue":s[20]||(s[20]=a=>e.data.hostId=a),options:K(rs),placeholder:"select a host",disabled:e.readonly,"value-prop":"id","track-by":"name",label:"name"},{singlelabel:q((({value:e})=>[D("div",dl,[j(M(e.name)+"  ",1),D("span",nl,M(e.id),1)])])),option:q((({option:e})=>[D("span",rl,[j(M(e.name)+"  ",1),D("span",cl,M(e.id),1)])])),_:1},8,["modelValue","options","disabled"])])),_:1})])),_:1})):(S(),Z(r,{key:1,class:"field"},{default:q((()=>{var a;return[D("label",null,[ul,(null==(a=l.data)?void 0:a.service)===K(k).ETC?(S(),L("span",pl,"*")):R("",!0)]),W(n,{icon:"lnil lnil-link"},{default:q((()=>[F(D("input",{"onUpdate:modelValue":s[21]||(s[21]=a=>e.data.link=a),placeholder:"place your link here",class:"input is-primary-focus",type:"text",readonly:e.readonly},null,8,vl),[[z,e.data.link]])])),_:1})]})),_:1}))])])],512),[[J,K(ys)]]),e.data.type===K(w).WORKSHOP&&e.data.workshopDescription?(S(),L("div",ml,[yl,D("div",fl,[D("div",hl,[D("div",bl,[kl,D("div",_l,[F(D("textarea",{"onUpdate:modelValue":s[22]||(s[22]=a=>e.data.workshopDescription.objective=a),class:"textarea is-primary-focus",rows:"3",placeholder:"fill your workshop objective",readonly:e.readonly},null,8,gl),[[z,e.data.workshopDescription.objective]])])])]),D("div",wl,[D("div",Ol,[Cl,D("div",Vl,[F(D("textarea",{"onUpdate:modelValue":s[23]||(s[23]=a=>e.data.workshopDescription.additionalNote=a),class:"textarea is-primary-focus",rows:"3",placeholder:"fill your workshop additional note",readonly:e.readonly},null,8,Il),[[z,e.data.workshopDescription.additionalNote]])])])]),D("div",Al,[D("div",Ul,[Tl,D("div",Sl,[W(v,{modelValue:e.data.online,"onUpdate:modelValue":[s[24]||(s[24]=a=>e.data.online=a),ns],value:!0,disabled:e.readonly,label:"Online",name:"online",color:"primary",square:""},null,8,["modelValue","disabled"]),W(v,{modelValue:e.data.online,"onUpdate:modelValue":[s[25]||(s[25]=a=>e.data.online=a),ns],value:!1,disabled:e.readonly,label:"Offline",name:"online",color:"primary",square:""},null,8,["modelValue","disabled"])])])]),!e.data.online&&e.data.workshopDescription?(S(),L(E,{key:0},[D("div",Ll,[D("div",Dl,[El,D("div",Gl,[F(D("textarea",{"onUpdate:modelValue":s[26]||(s[26]=a=>e.data.workshopDescription.address=a),class:"textarea is-primary-focus",rows:"3",placeholder:"fill your workshop location",readonly:e.readonly},null,8,Ml),[[z,e.data.workshopDescription.address]])])])]),D("div",Rl,[D("div",jl,[xl,D("div",Nl,[F(D("input",{"onUpdate:modelValue":s[27]||(s[27]=a=>e.data.workshopDescription.addressLink=a),type:"text",class:"input is-primary-focus",placeholder:"fill your workshop location link",readonly:e.readonly},null,8,Pl),[[z,e.data.workshopDescription.addressLink]]),F(D("p",Hl," * please fill correct format link (with http:// or https://) ",512),[[J,!K(ps)]])])])]),D("div",Bl,[D("div",Zl,[ql,D("div",Wl,[F(D("textarea",{"onUpdate:modelValue":s[28]||(s[28]=a=>e.data.workshopDescription.transportation=a),class:"textarea is-primary-focus",rows:"3",placeholder:"fill your transportation",readonly:e.readonly},null,8,Kl),[[z,e.data.workshopDescription.transportation]])])])])],64)):R("",!0)])])):R("",!0)])):(S(),L("div",Fl,[zl,D("div",Yl,[K(i).canUploadGroupClassCsv?(S(),L("div",$l,[D("div",Jl,[D("div",Ql,[(S(),L("label",{key:`${null==(a=re.value)?void 0:a.name}`,class:"file-label",onClick:s[29]||(s[29]=e=>ee.value=!0)},[D("input",{class:"file-input",type:"file",accept:".csv",onChange:fe},null,32),Xl,D("span",es,M((null==(p=re.value)?void 0:p.name)||"select_csv_file"),1)]))])])])):R("",!0)])])),"csvFile"===ce.value?(S(),Z(O,{key:5,"data-list":pe.value.rows,headers:pe.value.headers,"group-class-issue":ue.value},null,8,["data-list","headers","group-class-issue"])):R("",!0),"csvFile"===ce.value&&ue.value&&ue.value.length&&!pe.value.rows?(S(),L("div",as,[ls,W(V,{headers:ve,data:ue.value,"can-searchable":!1,"hide-per-page":"","hide-pagination":"","show-item-of-entires":!1},null,8,["data"])])):R("",!0),W(U,{title:"Confirm Upload Group Class",open:X.value,size:"small",actions:"center",onClose:s[31]||(s[31]=e=>X.value=!1)},{content:q((()=>{var e;return[W(I,{title:"Comfirmation",subtitle:`You want to upload file: ${null==(e=re.value)?void 0:e.name}`},null,8,["subtitle"])]})),action:q((()=>[W(o,{color:"primary",raised:"",onClick:os},{default:q((()=>[ss])),_:1})])),cancel:q((()=>[W(o,{raised:"",onClick:s[30]||(s[30]=e=>{X.value=!1,re.value=void 0})},{default:q((()=>[is])),_:1})])),_:1},8,["open"])]})),_:1},8,["title"])}}});os.__scopeId="data-v-4c6ae68a";const ts={topic:"",description:void 0,descriptionTh:void 0,descriptionVn:void 0,coachId:void 0,level:V.BEGINNER,time:ee().add(1,"d").set("h",0).set("m",0).format(),type:w.GROUP,duration:55,accessLimit:4,shareLimit:void 0,service:k.ETC,curriculumId:void 0,studentGroup:_.NORMAL,hostId:void 0,link:void 0,status:g.PENDING,campaign:void 0,country:r.TH,online:!0,workshopDescription:{objective:"",address:"",addressLink:"",additionalNote:"",transportation:""}};function ds(){const{getGroupClassById:e,createGroupClass:a,updateGroupClass:l}=re(),s=x(),i=N(),o=Q({id:void 0,saving:!1,info:n(d({},ts),{workshopDescription:ts.workshopDescription}),isLoading:!0}),t=P((()=>"#edit"===i.hash)),r=()=>{o.id=void 0,o.info=n(d({},ts),{workshopDescription:ts.workshopDescription})};return n(d({},X(o)),{isEdit:t,setStateInfo:async()=>{var a,l,s,t;o.isLoading=!0;const d=await e(parseInt(`${i.params.id}`));o.isLoading=!1,d&&(o.id=d.id,o.info.topic=d.topic,o.info.description=d.description,o.info.descriptionTh=null==(a=null==d?void 0:d.descriptionJson)?void 0:a.th,o.info.descriptionVn=null==(l=null==d?void 0:d.descriptionJson)?void 0:l.vn,o.info.coachId=null==(s=d.coach)?void 0:s.id,o.info.level=d.level,o.info.time=ee(d.dateTime).format(),o.info.type=d.type,o.info.duration=d.duration,o.info.accessLimit=d.accessLimit,o.info.shareLimit=d.shareLimit,o.info.service=d.service||k.ETC,o.info.curriculumId=null==(t=d.curriculum)?void 0:t.id,o.info.studentGroup=d.studentGroup,o.info.hostId=d.zoomHostId,o.info.link="string"==typeof d.link?d.link:void 0,o.info.status=d.status,o.info.campaign=d.campaign,o.info.country=d.country,o.info.online=d.online,o.info.workshopDescription=d.workshopDescription||ts.workshopDescription)},clearStateInfo:r,onSaveGroupClass:async()=>{o.saving=!0;const e={topic:o.info.topic,description:o.info.description?o.info.description:void 0,descriptionEn:o.info.description?o.info.description:void 0,descriptionTh:o.info.descriptionTh?o.info.descriptionTh:void 0,descriptionVn:o.info.descriptionVn?o.info.descriptionVn:void 0,coachId:o.info.coachId,time:ee(o.info.time).set({millisecond:0,second:0}).toISOString(),type:o.info.type,duration:o.info.duration,accessLimit:o.info.accessLimit,shareLimit:o.info.type&&[w.MASTER,w.WORKSHOP].includes(o.info.type)?o.info.shareLimit:void 0,hostId:o.info.service&&[k.ZOOM,k.ZOOM_EDUCATION].includes(o.info.service)?o.info.hostId:void 0,service:o.info.type&&[w.GROUP,w.WORKSHOP].includes(o.info.type)?o.info.service:k.ZOOM_EDUCATION,level:o.info.level,link:o.info.service===k.ETC?o.info.link:void 0,studentGroup:o.info.studentGroup,campaign:o.info.type===w.GROUP?o.info.campaign:o.info.type===w.MASTER?O.MASTER_CLASS:O.WORKSHOP,curriculumId:o.info.curriculumId?o.info.curriculumId:void 0,status:o.info.status?o.info.status:void 0,country:o.info.country?o.info.country:void 0,online:o.info.type!==w.WORKSHOP||o.info.online,workshopDescription:o.info.type===w.WORKSHOP?o.info.workshopDescription:void 0};let t;o.id?(t=await l(d({id:o.id},e)),v(t,"Group Class was updated!")):(t=await a(e),v(t,"Group Class was created!")),o.saving=!1,201!==t.status&&200!==t.status||(r(),s.push({name:"classrooms-group-classes",query:d({},i.query)}))}})}export{os as _,ds as u};
