var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{c as r,e as l}from"./index.d7dc1ff6.js";import{_ as d,a as c}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{d as u,o as m,e as p,h as f,x as v,F as y,g as b,y as h,i as g,K as j,ai as O,V as _,t as w,G as x,q as E,A as T,b as k,k as I,Y as P,ae as V}from"./vendor.1c8b4573.js";import{u as D}from"./useGuardTeam.38dd8be1.js";import{u as A}from"./usePermissionApi.9e405600.js";import{u as B}from"./useNotyf.ddf08f06.js";const C={class:"page-content-inner"},F={key:0,class:"form-layout"},G={class:"form-outer"},N={class:"form-header"},U={class:"form-header-inner"},q=f("div",{class:"left"},[f("h3",null,"Team information")],-1),K={class:"right"},S={class:"buttons"},Y=x("Cancel"),z=x("Edit"),H=x("Done"),J={class:"form-body"},L=f("label",null,"Name",-1),M=["readonly"],Q=f("label",null,"Description",-1),R=["readonly"];var W=u({props:{readonly:{type:Boolean,default:!1},info:{type:Object,default:void 0},validate:{type:Object,default:void 0}},emits:["edit"],setup(e,{emit:a}){const t=e,{capabilities:s}=D(),i=()=>{var e,s;const i={name:null==(e=t.info)?void 0:e.name,description:null==(s=t.info)?void 0:s.description};a("edit",i)};return(a,t)=>{const n=r,o=d,l=c;return m(),p("div",C,[e.info?(m(),p("div",F,[f("div",G,[f("div",N,[f("div",U,[q,f("div",K,[f("div",S,[v(n,{icon:"lnir lnir-arrow-left rem-100",light:"","dark-outline":"",to:{name:"permissions-teams"}},{default:y((()=>[Y])),_:1}),e.readonly&&b(s).canEdit?(m(),h(n,{key:0,icon:"lnil lnil-pencil",to:"#edit",color:"primary"},{default:y((()=>[z])),_:1})):g("",!0),b(s).canEdit&&!e.readonly?(m(),h(n,{key:1,color:"primary",raised:"",onClick:i},{default:y((()=>[H])),_:1})):g("",!0)])])])]),f("div",J,[f("div",null,[v(l,null,{default:y((()=>[L,v(o,null,{default:y((()=>[j(f("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.info.name=a),type:"text",class:"input",placeholder:"Team name",readonly:e.readonly},null,8,M),[[O,e.info.name]])])),_:1}),j(f("p",{class:"help has-text-danger"},w(e.validate.name),513),[[_,e.validate.name]])])),_:1}),v(l,null,{default:y((()=>[Q,v(o,null,{default:y((()=>[j(f("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.info.description=a),class:"textarea",rows:"3",placeholder:"Team description",readonly:e.readonly},null,8,R),[[O,e.info.description]])])),_:1}),j(f("p",{class:"help has-text-danger"},w(e.validate.description),513),[[_,e.validate.description]])])),_:1})])])])])):g("",!0)])}}});function X(){const e=E({teamInfo:{name:"",description:""},validate:{}}),r=T(),d=k(),c=B(),{getTeamById:u,updateTeam:m}=A(),p=r.params.id,f=I((()=>"#edit"===r.hash));return P((()=>{(async()=>{const a=await u(+p);e.teamInfo=a})()})),v=((e,a)=>{for(var t in a||(a={}))i.call(a,t)&&o(e,t,a[t]);if(s)for(var t of s(a))n.call(a,t)&&o(e,t,a[t]);return e})({},V(e)),a(v,t({editTeam:async()=>{const a=await m(+p,e.teamInfo);200===a.status?(c.success("success!"),e.validate={},d.push({name:"permissions-teams"})):"object"==typeof a.message?e.validate=a.message:c.error(l(a.message))},isEdit:f}));var v}const Z={class:"page-content-inner"},$={class:"form-layout"},ee={class:"form-outer"};var ae=u({setup(e){const{teamInfo:a,editTeam:t,validate:s,isEdit:i}=X();return(e,n)=>{const o=W;return m(),p("div",Z,[f("div",$,[f("div",ee,[b(a)?(m(),h(o,{key:0,info:b(a),readonly:!b(i),validate:b(s),onEdit:b(t)},null,8,["info","readonly","validate","onEdit"])):g("",!0)])])])}}});export default ae;
