var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&r(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{_ as c}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{e as d,p as u,l as p,c as g}from"./index.d7dc1ff6.js";import{_ as m}from"./VModal.31b4f4ba.js";import{_ as f}from"./DropdownAction.vue_vue&type=script&setup=true&lang.ced09d37.js";import{_ as k}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as v}from"./SDatatable.5f6d29ce.js";import{_ as b,a as y}from"./search-4-dark.fb3880a5.js";import{q as h,Y as P,ae as w,d as j,X as _,r as C,k as x,E as G,o as I,e as T,x as V,F as N,G as O,t as D,au as M,g as A,h as L,y as S,i as E,H as R,p as F,a as B}from"./vendor.1c8b4573.js";import{u as H}from"./usePackageApi.47154a43.js";import{u as $}from"./usePaginationRoute.780ca235.js";import{u as Y}from"./useNotyf.ddf08f06.js";import{u as q}from"./useGuardPackageGroup.86b7884e.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./package.enum.de4ee89f.js";F("data-v-6256eab2");const z={class:"page-content-inner"},W=O("Confirm"),X=O("Cancel"),J={class:"is-flex is-justify-content-flex-end pt-4"},K=O(" Create "),Q={key:0,class:"dark-inverted is-flex is-justify-content-flex-end"},U=L("div",{class:"icon"},[L("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Z=L("div",{class:"meta"},[L("span",null,"View"),L("span",null,"view detail of package group")],-1),ee=L("div",{class:"icon"},[L("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),ae=L("div",{class:"meta"},[L("span",null,"Edit"),L("span",null,"Edit package group")],-1),te=["onClick"],le=[L("div",{class:"icon"},[L("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),L("div",{class:"meta"},[L("span",null,"Delete"),L("span",null,"Delete package group")],-1)],se={key:1,class:"has-text-centered"},ie={key:2,class:"has-text-centered"},re={key:3,class:"has-text-centered"},oe={key:4,class:"has-text-centered"},ne={key:0,class:"has-text-centered"},ce={key:1,class:"has-text-centered"},de={key:2,class:"has-text-centered"},ue={key:3,class:"has-text-centered"},pe=L("img",{class:"light-image",src:b},null,-1),ge=L("img",{class:"dark-image",src:y},null,-1);B();var me=j({setup(e){u.value="Package Group Information",_({title:"Whitehouse Package"});const{isLoading:a,packages:t,viewAddonPackage:l,addonPackages:s,currentViewMainPackageId:i,removePackageGroup:r,packageTableHeaders:b,total:y}=function(){const e=h({isLoading:!1,packages:[],currentViewMainPackageId:0,addonPackages:[],total:1}),{currentPage:a,perPage:t,search:l}=$(),{getAllPackagesGroup:s,getAddonPackageByMainPackageId:i,deletePackageGroupByMainPackageId:r}=H(),c=async()=>{e.isLoading=!0;const i=await s({currentPage:a,perPage:t,search:l});e.isLoading=!1,e.packages=(null==i?void 0:i.data)||[],e.total=(null==i?void 0:i.total)||0},u=Y();return P((()=>{c()})),n(o({},w(e)),{viewAddonPackage:async a=>{const t=await i(a);t.length&&(e.currentViewMainPackageId=a,e.addonPackages=t)},removePackageGroup:async e=>{const{status:a,message:t}=await r(e);200===a?await c():u.error(d(t)||"Fail !")},packageTableHeaders:[{key:"packageId",label:"Main ID"},{key:"packageName",label:"Package Name"},{key:"generateTicket",label:"Generate Ticket? (Main)",isCenter:!0},{key:"type",label:"Type",isCenter:!0},{key:"purchasable",label:"Purchasable",isCenter:!0},{key:"price",label:"Price",isCenter:!0},{key:"duration",label:"Duration",isCenter:!0},{key:"ticket",label:"Ticket",isCenter:!0},{key:"groupClassTicket",label:"GroupClass",isCenter:!0}]})}(),{capabilities:j,haveActionButton:F}=q(),B=C(!1),me=C(void 0),fe=e=>{me.value=e,B.value=!!e},ke=()=>{var e;me.value&&(r(null==(e=me.value)?void 0:e.packageId),fe())},ve=x((()=>t.value.map((e=>n(o({},e),{label:e.packageName,html:!1,children:e.subPackages||[]})))));return(e,a)=>{const l=c,s=g,i=m,r=G("RouterLink"),o=f,n=k,d=G("VueGoodTable"),u=v;return I(),T("div",z,[V(i,{title:"Confirm Remove Package Group",open:B.value,size:"small",actions:"center",onClose:fe},{content:N((()=>{var e;return[V(l,{title:`You want to remove group of ${null==(e=me.value)?void 0:e.packageName}`},null,8,["title"])]})),action:N((()=>[V(s,{color:"primary",raised:"",onClick:ke},{default:N((()=>[W])),_:1})])),cancel:N((()=>[V(s,{raised:"",onClick:a[0]||(a[0]=e=>B.value=!1)},{default:N((()=>[X])),_:1})])),default:N((()=>[O(" "+D(B.value)+" ",1)])),_:1},8,["open"]),V(u,{"search-placeholder":"Search by id, sub package name",headers:A(b),data:A(t),total:A(y),"is-action":A(F)},M({"custom-table":N((({columns:e})=>[V(d,{mode:"remote","style-class":"vgt-table",columns:e,rows:A(ve),"group-options":{enabled:!0,collapsable:!0}},{"table-header-row":N((({column:e,formattedRow:a})=>["action"===e.field&&A(F)?(I(),T("div",Q,[V(o,null,{content:N((()=>[A(j).canView?(I(),S(r,{key:0,to:{name:"products-packages-groups-:packageid",params:{packageid:`${a.packageId}`}},role:"menuitem",class:"dropdown-item is-media"},{default:N((()=>[U,Z])),_:2},1032,["to"])):E("",!0),A(j).canEdit?(I(),S(r,{key:1,to:{name:"products-packages-groups-:packageid",params:{packageid:`${a.packageId}`},hash:"#edit"},role:"menuitem",class:"dropdown-item is-media"},{default:N((()=>[ee,ae])),_:2},1032,["to"])):E("",!0),A(j).canDelete?(I(),T("a",{key:2,role:"menuitem",class:"dropdown-item is-media",onClick:e=>fe(a)},le,8,te)):E("",!0)])),_:2},1024)])):"generateTicket"===e.field?(I(),T("div",se,[V(n,{color:+a[e.field]?"success":"danger",label:+a[e.field]?"Generate":"Not generate",outlined:!+a[e.field],rounded:""},null,8,["color","label","outlined"])])):"purchasable"===e.field?(I(),T("div",ie,[V(n,{color:+a[e.field]?"success":"danger",label:+a[e.field]?"Sale":"Not for sale",outlined:!+a[e.field],rounded:""},null,8,["color","label","outlined"])])):"price"===e.field?(I(),T("div",re,D(A(p)(a[e.field])),1)):"type"===e.field||"duration"===e.field?(I(),T("div",oe,D(a[e.field]),1)):(I(),T(R,{key:5},[O(D(a[e.field]),1)],64))])),"table-row":N((({column:e,formattedRow:a})=>["generateTicket"===e.field?(I(),T("div",ne,[V(n,{color:+a[e.field]?"success":"danger",label:+a[e.field]?"Generate":"Not generate",outlined:!+a[e.field],rounded:""},null,8,["color","label","outlined"])])):E("",!0),"type"===e.field||"duration"===e.field?(I(),T("div",ce,D(a[e.field]),1)):E("",!0),"purchasable"===e.field?(I(),T("div",de,[V(n,{color:+a[e.field]?"success":"danger",label:+a[e.field]?"Sale":"Not for sale",outlined:!+a[e.field],rounded:""},null,8,["color","label","outlined"])])):E("",!0),"price"===e.field?(I(),T("div",ue,D(A(p)(a[e.field])),1)):E("",!0)])),emptystate:N((()=>[V(l,{title:"No data to show",subtitle:"There is currently no data to show in this list."},{image:N((()=>[pe,ge])),_:1})])),_:2},1032,["columns","rows"])])),_:2},[A(j).canCreate?{name:"custom-right",fn:N((()=>[L("div",J,[V(s,{color:"primary",icon:"fas fa-plus",to:{name:"products-packages-groups-create"}},{default:N((()=>[K])),_:1})])]))}:void 0]),1032,["headers","data","total","is-action"])])}}});me.__scopeId="data-v-6256eab2";export default me;
