var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{q as i,a1 as d,k as u,A as f,b as c,ae as l}from"./vendor.1c8b4573.js";import{u as p}from"./useStudentApi.e8de2a80.js";import{u as g}from"./useNotyf.ddf08f06.js";import{e as y}from"./index.d7dc1ff6.js";function m(){const e=i({isLoading:!1,studentInfo:void 0,loadingLogin:!1,validation:{}});d("studentInfo",u((()=>e.studentInfo)));const m=u((()=>"#edit"===b.hash)),b=f(),I=c(),v=b.params.id,{getStudentInfoById:j,updateStudentInfoById:w,loginByStudentId:O}=p(),P=g();return S=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&r(e,a,t[a]);return e})({},l(e)),t(S,a({fetchStudentInfoById:async()=>{if(!v)return;e.isLoading=!0;const t=await j(+v);e.isLoading=!1,t&&(e.studentInfo=t)},updateStudentProfile:async t=>{const{status:a,data:n,message:s}=await w(+v,t);if(200===a)e.studentInfo=n,P.success("Your changes have been successfully saved!"),I.push({name:"students-:id",params:{id:v}});else{if("object"==typeof s)return void(e.validation=s);P.error(y(s)||"Fail! Please try again")}},loginAsStudent:async()=>{e.loadingLogin=!0;const t=b.params.id,{status:a,data:n,message:s}=await O(+t);e.loadingLogin=!1,201!==a?P.error(y(s)||"Fail! Please try again"):window.open(n.link)},isEdit:m}));var S}export{m as u};
