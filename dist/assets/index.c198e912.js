var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,n,t)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t;import{_ as i}from"./ConfirmRemoveModal.3ba4d6d1.js";import{e as r,p as c,c as u,h as d}from"./index.d7dc1ff6.js";import{_ as m}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as p}from"./Datatable.aae3ef08.js";import{q as v,Y as y,ae as f,d as b,r as g,X as h,E as j,av as k,o as A,e as w,x as P,F as _,h as C,t as D,g as x,au as T,y as O,i as V,H as Y,I as H,K as R,V as E,G as I,p as L,a as M}from"./vendor.1c8b4573.js";import{u as $}from"./usePaginationRoute.780ca235.js";import{u as S}from"./useAnnouncementApi.27030d2a.js";import{u as F}from"./useNotyf.ddf08f06.js";import{u as G}from"./useGuardAnnouncement.888ad157.js";import{t as N}from"./date.helper.6ae3fc87.js";import{b as q}from"./text.helper.174bd8fa.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VModal.31b4f4ba.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";function B(){const e=v({announcements:[],isLoading:!1,total:1,selectedAnnouncement:void 0}),i=F(),{currentPage:c,perPage:u,search:d}=$(),{getAnnouncements:m,deleteAnnouncement:p}=S(),b=async()=>{e.isLoading=!0;const a=await m({currentPage:c,perPage:u,search:d});e.isLoading=!1,a&&(e.announcements=a.data,e.total=a.total)};y((()=>{b()}));return g=((e,a)=>{for(var n in a||(a={}))s.call(a,n)&&l(e,n,a[n]);if(t)for(var n of t(a))o.call(a,n)&&l(e,n,a[n]);return e})({},f(e)),a(g,n({announcementTableHeaders:[{key:"id",label:"ID"},{key:"type",label:"Type",isCenter:!0},{key:"idx",label:"Index"},{key:"name",label:"Name"},{key:"role",label:"Role",isCenter:!0},{key:"productTypes",label:"Product Type"},{key:"studentCountries",label:"Country"},{key:"startDate",label:"Start Date"},{key:"endDate",label:"End Date"},{key:"action",label:"Action",isEnd:!0,isRaw:!0}],displayProductType:e=>e.split(",").slice(0,3),removeAnnouncement:async()=>{if(!e.selectedAnnouncement)return;const{code:a,message:n}=await p(e.selectedAnnouncement.id);a?i.error(r(n)):(i.success("Remove Announcement Success!"),e.selectedAnnouncement=void 0,b())},displayAnnuncementType:e=>{switch(e){case"slide":return"primary";case"popup":return"purple";case"mini-slide":return"danger";default:return"solid"}}}));var g}L("data-v-0618959c");const K={class:"page-content-inner"},W={class:"is-flex justify-content-center"},X={class:"subtitle is-5"},z={class:"is-flex is-justify-content-flex-end"},J=I("Create"),Q={key:0,class:"country-container"},U={key:1},Z=I("Actions"),ee=C("div",{class:"icon"},[C("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),ae=C("div",{class:"meta"},[C("span",null,"View"),C("span",null,"view announcement")],-1),ne=C("div",{class:"icon"},[C("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),te=C("div",{class:"meta"},[C("span",null,"Edit"),C("span",null,"edit announcement")],-1),se=C("hr",{class:"dropdown-divider"},null,-1),oe=["onClick"],le=[C("div",{class:"icon"},[C("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),C("div",{class:"meta"},[C("span",null,"Remove"),C("span",null,"remove announcement")],-1)];M();var ie=b({setup(e){g("world");const{announcementTableHeaders:a,announcements:n,displayProductType:t,total:s,isLoading:o,selectedAnnouncement:l,removeAnnouncement:r,displayAnnuncementType:v}=B(),{capabilities:y,haveActionButton:f}=G();return c.value="Announcement Information",h({title:"Whitehouse: Announcements"}),(e,t)=>{const c=i,b=u,g=m,h=j("RouterLink"),L=d,M=p,$=k("tooltip");return A(),w("div",K,[P(c,{open:!!x(l),title:"Are you sure ?",subtitle:"Please make sure that you are going to remove announcement",onConfirm:x(r),onClose:t[0]||(t[0]=e=>l.value=void 0)},{default:_((()=>{var e;return[C("div",W,[C("h1",X,D(null==(e=x(l))?void 0:e.name),1)])]})),_:1},8,["open","onConfirm"]),P(M,{"is-loading":x(o),headers:x(a),data:x(n),total:x(s)},T({type:_((({value:e})=>[P(g,{color:x(v)(e),label:x(q)(e),curved:"",outlined:""},null,8,["color","label"])])),role:_((({value:e})=>[P(g,{color:"coach"===e?"purple":"blue",label:e,curved:"",class:"role-tag"},null,8,["color","label"])])),productTypes:_((({value:e})=>[e?(A(),w(Y,{key:0},[(A(!0),w(Y,null,H(e,((e,a)=>(A(),O(g,{key:`t-${a}`,color:"solid",label:e,curved:"",outlined:""},null,8,["label"])))),128)),R(C("small",null,[I("and other "+D(e.length-3),1)],512),[[E,e.length>3],[$,`${e.slice(3,e.length).join(", ")}`]])],64)):(A(),O(g,{key:1,color:"solid",label:"all product",curved:"",outlined:""}))])),studentCountries:_((({value:e})=>[(null==e?void 0:e.length)&&""!=e[0]?(A(),w("div",Q,[(A(!0),w(Y,null,H(e,((e,a)=>(A(),O(g,{key:`c-${a}`,color:"info",label:e,curved:"",outlined:""},null,8,["label"])))),128))])):(A(),w("span",U,"-"))])),startDate:_((({value:e})=>[I(D(x(N)(e,"DD/MM/YYYY HH:mm")),1)])),endDate:_((({value:e})=>[I(D(x(N)(e,"DD/MM/YYYY HH:mm")),1)])),_:2},[x(y).canCreate?{name:"custom-right",fn:_((()=>[C("div",z,[P(b,{color:"primary",icon:"fas fa-plus",to:{name:"settings-announcements-create"}},{default:_((()=>[J])),_:1})])]))}:void 0,x(f)?{name:"action",fn:_((({value:e})=>[P(L,{spaced:"",right:""},{button:_((({toggle:e})=>[P(b,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:_((()=>[Z])),_:2},1032,["onClick"])])),content:_((()=>[x(y).canView?(A(),O(h,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"settings-announcements-:id",params:{id:`${e.id}`}}},{default:_((()=>[ee,ae])),_:2},1032,["to"])):V("",!0),x(y).canEdit?(A(),O(h,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"settings-announcements-:id",params:{id:`${e.id}`},hash:"#edit"}},{default:_((()=>[ne,te])),_:2},1032,["to"])):V("",!0),se,x(y).canDelete?(A(),w("a",{key:2,role:"menuitem",class:"dropdown-item is-media",onClick:a=>l.value=e},le,8,oe)):V("",!0)])),_:2},1024)]))}:void 0]),1032,["is-loading","headers","data","total"])])}}});ie.__scopeId="data-v-0618959c";export default ie;
