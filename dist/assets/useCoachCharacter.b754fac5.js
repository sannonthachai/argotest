var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,n=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&c(e,t,a[t]);if(r)for(var t of r(a))i.call(a,t)&&c(e,t,a[t]);return e};import{b as s,A as d,k as p,q as h,ae as f}from"./vendor.1c8b4573.js";import{o as l}from"./index.d7dc1ff6.js";import{u}from"./useCoachApi.4bab1366.js";import{u as C}from"./usePaginationRoute.780ca235.js";function b(){const{currentPage:e,perPage:r,search:o}=C(),{getCoachCharacterPagination:i,createCoachCharacter:c,updateCoachCharacter:b,deleteCoachCharacter:y,getCoachCharacterById:g}=u(),m=s(),P=d(),v=p((()=>"#edit"===P.hash)),j=h({pagination:{currentPage:e,totalPage:1,perPage:r,total:0,data:[]},info:{id:void 0,name:"",description:""},fetching:!1}),w=async()=>{j.fetching=!0;const a=await i({currentPage:e,perPage:r,search:o});j.pagination=a,j.fetching=!1},O=()=>{j.info={id:void 0,name:"",description:""}};return k=n({},f(j)),a(k,t({coachCharacterTableHeaders:[{key:"id",label:"ID"},{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"createdAt",label:"Created At",isCenter:!0},{key:"updatedAt",label:"Updated At",isCenter:!0}],fetchCoachCharacterPagination:w,onDeleteCoachCharacter:async()=>{var e;if(null==(e=j.info)?void 0:e.id){const e=await y(j.info.id);l(e,"Remove success!")}O(),await w()},onSaveCoachCharacter:async()=>{var e;let a;(null==(e=j.info)?void 0:e.id)?(a=await b(j.info),l(a,"Update success!")):(a=await c(j.info),l(a,"Create success!")),201!==a.status&&200!==a.status||(O(),m.push({name:"coaches-characters",query:n({},P.query)}))},clearStateInfo:O,setStateInfo:e=>{j.info.id=e.id,j.info.name=e.name,j.info.description=e.description},fetchCoachCharacterById:async()=>{const e=await g(+P.params.id);e&&(j.info=e)},isEdit:v}));var k}export{b as u};
