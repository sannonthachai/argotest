var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))s.call(t,a)&&i(e,a,t[a]);return e},d=(e,r)=>t(e,a(r));import{_ as o}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as u,a as c}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{j as m,y as g,r as f,p}from"./index.d7dc1ff6.js";import{_ as h}from"./VFlex.vue_vue&type=style&index=0&lang.c8620ece.js";import{_ as y}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{p as S,a as b,d as _,A as v,k as T,E as w,o as E,y as C,F as A,h as I,x as k,g as Y,ao as $,ap as D,j as R,e as j,f as O,D as M,n as q,I as N,t as P,H as V,i as L,G as x,b as z,q as G,Y as H,ae as B,X as F}from"./vendor.1c8b4573.js";import{u as U}from"./useOptionApi.f4dc99b9.js";import{_ as K}from"./VPlaceholderPage.vue_vue&type=script&setup=true&lang.e3e86478.js";import{_ as W,a as J}from"./search-4-dark.fb3880a5.js";import{t as Z}from"./date.helper.6ae3fc87.js";import{m as X}from"./index.ec15dc7d.js";import{u as Q}from"./useNotyf.ddf08f06.js";import{u as ee}from"./useCoachApi.4bab1366.js";import"./quiz.enum.fc8b95fc.js";import"./lodash.0a1ccad5.js";S("data-v-48b6ffa4");const te={class:"columns is-multiline"},ae={class:"column is-4"},re=I("label",null,"Coach",-1),le=I("label",{class:"light-text small-text"},"Date range",-1),se=["value"],ie=["value"],ne={class:"column is-4 columns is-multiline"},de=I("label",null,"Start Time",-1),oe=I("label",null,"End Time",-1);b();var ue=_({props:{filter:{type:Object,required:!0}},emits:["filter-change"],setup(e,{emit:t}){const a=v(),{getCoaches:r}=U(),l=T((()=>new Array(48).fill(null).map(((e,t)=>{const a=Math.floor(t/2);return`${a<10?`0${a}`:`${a}`}:${t%2==0?"00":"30"}`})))),s=T((()=>l.value.indexOf(`${a.query.startTime}`))),i=l.value.filter(((e,t)=>t>=s.value));return(a,s)=>{const n=o,d=u,g=c,f=m,p=w("v-date-picker"),S=h,b=w("Multiselect"),_=u,v=c,T=y;return E(),C(T,{elevated:""},{default:A((()=>[I("div",te,[I("div",ae,[k(g,null,{default:A((()=>[re,k(d,null,{default:A((()=>[k(n,{modelValue:e.filter.coachId,"onUpdate:modelValue":s[0]||(s[0]=t=>e.filter.coachId=t),placeholder:"Select a coach","callback-search":Y(r),searchable:!0,"label-by":"displayName","value-prop":"id",onSelect:s[1]||(s[1]=e=>t("filter-change"))},null,8,["modelValue","callback-search"])])),_:1})])),_:1})]),k(S,{"justify-content":"center",class:"column is-4"},{default:A((()=>[k(p,{modelValue:e.filter.range,"onUpdate:modelValue":s[3]||(s[3]=t=>e.filter.range=t),"is-range":"",color:"orange","trim-weeks":"","model-config":{start:{type:"string",mask:"YYYY-MM-DD",timeAdjust:"00:00:00"},end:{type:"string",mask:"YYYY-MM-DD",timeAdjust:"00:00:00"}},masks:{input:"DD/MM/YYYY"},popover:{visibility:"click"}},{default:A((({inputValue:e,inputEvents:a})=>[le,k(g,{addons:""},{default:A((()=>[k(d,null,{default:A((()=>[I("input",$({value:e.start,class:"input"},D(a.start)),null,16,se)])),_:2},1024),k(d,null,{default:A((()=>[k(f,{icon:"feather:arrow-right",class:"is-static"})])),_:1}),k(d,null,{default:A((()=>[I("input",$({value:e.end,class:"input"},D(a.end)),null,16,ie)])),_:2},1024),k(d,null,{default:A((()=>[k(f,{color:"warning",icon:"feather:search",outlined:"",onClick:s[2]||(s[2]=e=>t("filter-change"))})])),_:1})])),_:2},1024)])),_:1},8,["modelValue"])])),_:1}),I("div",ne,[k(v,{class:"column is-6"},{default:A((()=>[de,k(_,null,{default:A((()=>[k(b,{modelValue:e.filter.startTime,"onUpdate:modelValue":s[4]||(s[4]=t=>e.filter.startTime=t),options:Y(l),"value-prop":"value",placeholder:"select start time","can-clear":!1,class:"filter-option",onSelect:s[5]||(s[5]=e=>t("filter-change"))},null,8,["modelValue","options"])])),_:1})])),_:1}),k(v,{class:"column is-6"},{default:A((()=>[oe,k(_,null,{default:A((()=>[k(b,{modelValue:e.filter.endTime,"onUpdate:modelValue":s[6]||(s[6]=t=>e.filter.endTime=t),options:Y(i),"value-prop":"value",placeholder:"select end time","can-clear":!1,class:"filter-option",onSelect:s[7]||(s[7]=e=>t("filter-change"))},null,8,["modelValue","options"])])),_:1})])),_:1})])])])),_:1})}}});ue.__scopeId="data-v-48b6ffa4";const ce={class:"v-grid-item"};var me=_({props:{gridColumnStart:{type:[String,Number],required:!1,default:"auto"},gridColumnEnd:{type:[String,Number],required:!1,default:"auto"},gridRowStart:{type:[String,Number],required:!1,default:"auto"},gridRowEnd:{type:[String,Number],required:!1,default:"auto"},justifySelf:{type:String,required:!1,default:"auto"},alignSelf:{type:String,required:!1,default:"auto"},placeSelf:{type:String,required:!1,default:"auto"}},setup(e){const t=e;return R((e=>({"99c506ee":t.gridColumnStart,"7b3bc27c":t.gridColumnEnd,"5eec71eb":t.gridRowStart,"7259f6b8":t.gridRowEnd,ad657f02:t.justifySelf,"2b542198":t.alignSelf,"28573f94":t.placeSelf}))),(e,t)=>(E(),j("div",ce,[O(e.$slots,"default")]))}});const ge={class:"v-grid"};var fe,pe,he,ye,Se,be,_e=_({props:{inline:{type:Boolean,required:!1},gridTemplateColumns:{type:String,required:!1,default:"none"},gridTemplateRows:{type:String,required:!1,default:"none"},gridTemplateAreas:{type:String,required:!1,default:"none"},columnGap:{type:String,required:!1,default:"normal"},rowGap:{type:String,required:!1,default:"normal"},justifyItems:{type:String,required:!1,default:"initial"},alignItems:{type:String,required:!1,default:"initial"},justifyContent:{type:String,required:!1,default:"initial"},alignContent:{type:String,required:!1,default:"initial"},placeContent:{type:String,required:!1,default:"normal"},gridAutoColumns:{type:String,required:!1,default:"auto"},gridAutoRows:{type:String,required:!1,default:"auto"},gridAutoFlow:{type:String,required:!1,default:"row"}},setup(e){const t=e;R((e=>({"44ffd1d8":Y(a),"4decd3f5":t.gridTemplateColumns,"4859067e":t.gridTemplateRows,c4a4b8c4:t.gridTemplateAreas,"0ec0cfb8":t.columnGap,"26b5b984":t.rowGap,"9c228810":t.justifyItems,"077e2aa3":t.alignItems,a8784a9e:t.justifyContent,"499b6ac8":t.alignContent,"9759bb4c":t.placeContent,"38fbb620":t.gridAutoColumns,"36567b14":t.gridAutoRows,"36617c6a":t.gridAutoFlow})));const a=T((()=>t.inline?"inline-grid":"grid"));return(e,t)=>(E(),j("div",ge,[O(e.$slots,"default")]))}});(pe=fe||(fe={})).MASTER_CLASS="master-class",pe.SUMMER_CLASS="summer-class",pe.GET_READY_FOR_INTERVIEWS="get-ready-for-interviews",pe.CHINESE_CLASS="chinese-class",pe.INTERACTIVE_ENGLISH="interactive-english",pe.ENGLISH_SPEAKING_LAB_FOR_JUNIOR="english-speaking-lab-for-junior",pe.ENGLISH_SPEAKING_LAB_FOR_PRETEEN="english-speaking-lab-for-preteen",pe.CHINESE_SPEAKING_LAB_FOR_JUNIOR="chinese-speaking-lab-for-junior",pe.ENGLISH_SPEAKING_LAB_FOR_JUNIOR_VN="english-speaking-lab-for-junior-vn",pe.ENGLISH_SPEAKING_LAB_FOR_PRETEEN_VN="english-speaking-lab-for-preteen-vn",pe.TECH_TALENTS="tech-talents",pe.B2S="b2s",(ye=he||(he={})).PENDING="pending",ye.APPROVE="approve",ye.DISAPPROVE="disapprove",ye.CANCEL="cancel",ye.ABSENT="absent",ye.PROBLEM="problem",(be=Se||(Se={})).PRIVATE_CLASS="Private Class",be.DISCUSSION_CLASS="Discussion Class",be.MASTER_CLASS="Master Class",be.WORKSHOP="Workshop",S("data-v-f9a2885e");const ve={class:"is-3 is-narrow"},Te={class:"title is-6 is-narrow is-thin"},we=I("img",{class:"light-image",src:W,alt:""},null,-1),Ee=I("img",{class:"dark-image",src:J,alt:""},null,-1),Ce={class:"title is-6 is-narrow"},Ae={class:"coach-tz"},Ie={class:"msg-box"},ke=I("br",null,null,-1),Ye=I("span",{class:"msg-triangle"},null,-1),$e={key:0,class:"small-text"},De=["href"],Re=I("i",{class:"iconify","data-icon":"feather:calendar","aria-hidden":"true"},null,-1),je=["href"],Oe=I("i",{class:"iconify","data-icon":"feather:user","aria-hidden":"true"},null,-1),Me=I("i",{class:"iconify","data-icon":"feather:users","aria-hidden":"true"},null,-1),qe=["data-icon"],Ne=I("br",null,null,-1),Pe=I("i",{class:"iconify","data-icon":"feather:tag","aria-hidden":"true"},null,-1);b();var Ve=_({props:{data:{type:Array,required:!0},dates:{type:Array,default:()=>[]},times:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=e,a=T((()=>t.data.reduce(((e,t)=>{const a=M(t.time),r=a.format("D MMM YYYY"),l=a.format("dddd"),s=a.format("HH:mm"),i=a.clone().tz(`${t.coachTimezone}`).format("ddd D MMM YYYY HH:mm"),o=a.format("ddd");return e.push(d(n({},t),{d:o,tz:i,day:l,date:r,time:s})),e}),[]).map((e=>{const a=t.dates.findIndex((t=>{const[a,r]=t.split("|");return r===e.date})),r=t.times.indexOf(e.time);return d(n({},e),{gridColumnStart:`${a+2}`,gridColumnEnd:`${a+3}`,gridRowStart:`${r+2}`,gridRowEnd:`${r+3+(e.classSlot-1)}`})})))),r=T((()=>0===t.dates.length&&0===t.times.length)),l=T((()=>`100px repeat(${t.dates.length}, auto)`)),s=T((()=>`80px repeat(${t.times.length}, auto)`)),i=e=>{let t=g.value?"bg-dark":"bg-light";return e===Se.PRIVATE_CLASS?`${t}--purple`:"Discussion Class"===e?`${t}--red`:"Master Class"===e?`${t}--green`:"Workshop"===e?`${t}--yellow`:`${t}--opacity`},o=e=>{const a=`${t.dates.length+1}`,r=`${t.dates.length+2}`,l=`${t.times.length+1}`,s=`${t.times.length+2}`;return e.gridColumnStart===a&&e.gridColumnEnd===r&&e.gridRowStart===l&&e.gridRowEnd===s?"br__bottom-right":""};return(t,n)=>{const d=me,u=f,c=K,m=_e,p=y;return Y(r)?L("",!0):(E(),C(p,{key:0,elevated:"",class:q(["bg-card",{dark:Y(g)}])},{default:A((()=>[k(m,{"grid-template-columns":Y(l),"grid-template-rows":Y(s),"column-gap":"8px","row-gap":"8px"},{default:A((()=>[k(d,{"grid-column-start":1,"grid-column-end":2,"grid-row-start":1,"grid-row-end":2,class:q(["sticky br__top-left",Y(g)?"bg-dark":"bg-light"])},null,8,["class"]),(E(!0),j(V,null,N(e.dates,((t,a)=>(E(),C(d,{key:t,"grid-column-start":a+2,"grid-column-end":a+3,"grid-row-start":1,"grid-row-end":2,class:q(["sticky grid-item-wrapper absolute-center absolute-center--column",`${Y(g)?"bg-dark":"bg-light"} ${a===e.dates.length-1?"br__top-right":""}`])},{default:A((()=>[I("h2",ve,P(null==t?void 0:t.split("|")[0]),1),I("p",null,P(null==t?void 0:t.split("|")[1]),1)])),_:2},1032,["grid-column-start","grid-column-end","class"])))),128)),(E(!0),j(V,null,N(e.times,((t,a)=>(E(),C(d,{key:t,"grid-column-start":1,"grid-column-end":2,"grid-row-start":a+2,"grid-row-end":a+3,class:q(["grid-item-wrapper absolute-center",`${Y(g)?"bg-dark":"bg-light"} ${a===e.times.length-1?"br__bottom-left":""}`])},{default:A((()=>[I("span",Te,P(t),1)])),_:2},1032,["grid-row-start","grid-row-end","class"])))),128)),e.loading?(E(),C(d,{key:0,"grid-column-start":2,"grid-column-end":e.dates.length+2,"grid-row-start":2,"grid-row-end":e.times.length+2},{default:A((()=>[k(u,{height:"100%",width:"100%"})])),_:1},8,["grid-column-end","grid-row-end"])):L("",!0),e.loading||0!==e.data.length?(E(!0),j(V,{key:2},N(Y(a),(e=>(E(),C(d,{key:e.id,"grid-column-start":e.gridColumnStart,"grid-column-end":e.gridColumnEnd,"grid-row-start":e.gridRowStart,"grid-row-end":e.gridRowEnd,class:q(["grid-item-wrapper grid-item-wrapper--small-rounded grid-item-wrapper--tz absolute-center absolute-center--column absolute-center--text-bm",`${i(e.classType)} ${o(e)}`])},{default:A((()=>[I("h2",Ce,P(e.classType||"Empty Class"),1),I("div",Ae,[I("p",Ie,[x(P(e.coachTimezone)+" ",1),ke,x(" "+P(e.tz),1)]),Ye]),e.classType?(E(),j("span",$e,[I("a",{href:e.classType===Y(Se).PRIVATE_CLASS?`/classrooms/private-classes?search=${e.classId}`:`/classrooms/group-classes?search=${e.classId}`,class:q(["link mr-2",{dark:Y(g)}])},[Re,x(P(e.classId),1)],10,De),e.classType===Y(Se).PRIVATE_CLASS?(E(),j("a",{key:0,href:`/students/${e.studentId}`,class:q(["link",{dark:Y(g)}])},[Oe,x(" "+P(e.studentId),1)],10,je)):(E(),j("span",{key:1,class:q(["text-icon mr-2",{dark:Y(g)}])},[Me,x(" "+P(e.bookedSlot),1)],2)),e.classType!==Y(Se).PRIVATE_CLASS?(E(),j("span",{key:2,class:q(["text-icon",{dark:Y(g)}])},[I("i",{class:"iconify","data-icon":"approve"===e.classStatus?"feather:check":"feather:x","aria-hidden":"true"},null,8,qe),x(" "+P(e.classStatus),1)],2)):L("",!0),e.classType!==Y(Se).PRIVATE_CLASS&&e.campaign?(E(),j("span",{key:3,class:q(["text-icon",{dark:Y(g)}])},[Ne,Pe,x(" "+P(e.campaign),1)],2)):L("",!0)])):L("",!0)])),_:2},1032,["grid-column-start","grid-column-end","grid-row-start","grid-row-end","class"])))),128)):(E(),C(d,{key:1,"grid-column-start":2,"grid-column-end":e.dates.length+2,"grid-row-start":2,"grid-row-end":e.times.length+2},{default:A((()=>[k(c,{title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the search terms you've entered. Please try different search terms or criteria.",larger:""},{image:A((()=>[we,Ee])),_:1},8,["title","subtitle"])])),_:1},8,["grid-column-end","grid-row-end"]))])),_:1},8,["grid-template-columns","grid-template-rows"])])),_:1},8,["class"]))}}});function Le(){const e=v(),t=z(),a=Q(),{getCoachScheuleByDatetime:r}=ee(),l=G({loading:!1,data:[],filter:{coachId:null,range:{start:X().format("YYYY-MM-DD"),end:X().add(6,"d").format("YYYY-MM-DD")},startTime:"00:00",endTime:"23:30"},dates:[],times:[]}),s=()=>{t.push({name:"coaches-schedules",params:e.params,query:d(n({},e.query),{coachId:l.filter.coachId,startDate:Z(l.filter.range.start,"YYYY-MM-DD"),endDate:Z(l.filter.range.end,"YYYY-MM-DD"),startTime:l.filter.startTime,endTime:l.filter.endTime})})},i=async()=>{l.loading=!0;const e={coachId:l.filter.coachId,startDate:l.filter.range.start,endDate:l.filter.range.end,startTime:l.filter.startTime+":00",endTime:l.filter.endTime+":00",timezone:X.tz.guess()},[t,a]=xe({timezone:e.timezone,startDate:e.startDate,startTime:e.startTime,endDate:e.endDate,endTime:e.endTime});l.dates=t,l.times=a,e.coachId&&(l.data=await r(e)),l.loading=!1};return H((()=>{(()=>{var t,r,n,d,o;if(0===Object.keys(e.query).length)return;l.filter.coachId=null==(t=e.query)?void 0:t.coachId,l.filter.range.start=null==(r=e.query)?void 0:r.startDate,l.filter.range.end=null==(n=e.query)?void 0:n.endDate,l.filter.startTime=(null==(d=e.query)?void 0:d.startTime)||l.filter.startTime,l.filter.endTime=(null==(o=e.query)?void 0:o.endTime)||l.filter.endTime;const u=X(`${l.filter.range.start} ${l.filter.startTime}`),c=X(`${l.filter.range.end} ${l.filter.endTime}`);u.clone().add(7,"d").isSameOrBefore(c)?(l.filter.range.end=X(`${l.filter.range.start} ${l.filter.endTime}`).add(6,"d").format("YYYY-MM-DD"),a.warning("Max date range should be 7 days"),s()):u.isSameOrAfter(c)?(l.filter.endTime="23:30",a.warning("Date & Time shouldn't be the same values"),s()):i()})()})),d(n({},B(l)),{filterChange:s})}Ve.__scopeId="data-v-f9a2885e";const xe=({timezone:e,startDate:t,startTime:a,endDate:r,endTime:l})=>{var s;const i=[],n=[],d=X(`${t}T${a}Z`).tz(e),o=X(`${t}T${l}Z`).tz(e),u=X(`${r}T${l}Z`).tz(e),c=X.utc().valueOf(),m=(null==(s=X.tz.zone(e))?void 0:s.utcOffset(c))||0;do{if(0===n.length){const e=d.clone().tz("UTC");for(;e.isSameOrBefore(o);)n.push(e.format("HH:mm")),e.add(30,"minutes")}i.push(d.clone().add(m/60,"h").format("dddd|D MMM YYYY")),d.add(1,"day"),o.add(1,"day")}while(o.isSameOrBefore(u));return[i,n]},ze={class:"px-0"};var Ge=_({setup(e){p.value="Coach Schedules",F({title:"Whitehouse: Coaches"});const{data:t,dates:a,times:r,filter:l,loading:s,filterChange:i}=Le();return(e,n)=>{const d=ue,o=Ve;return E(),j("div",ze,[k(d,{key:JSON.stringify(Y(l)),filter:Y(l),onFilterChange:Y(i)},null,8,["filter","onFilterChange"]),k(o,{data:Y(t),loading:Y(s),dates:Y(a),times:Y(r),class:"mt-5"},null,8,["data","loading","dates","times"])])}}});export default Ge;
