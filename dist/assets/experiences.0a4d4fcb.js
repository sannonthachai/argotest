var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,n=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&i(e,a,t[a]);return e},r=(e,l)=>t(e,a(l));import{_ as u,a as d}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{c,j as p,h as m,e as v}from"./index.d7dc1ff6.js";import{_ as f}from"./VModal.31b4f4ba.js";import{p as D,a as y,d as b,r as x,k as E,S as Y,E as h,o as M,y as C,F as _,h as g,x as j,ao as k,ap as O,t as I,g as A,K as U,ai as V,G as w,i as R,e as N,I as T,au as S,H as P,A as $}from"./vendor.1c8b4573.js";import{t as F}from"./date.helper.6ae3fc87.js";import{c as B}from"./coach.enum.0ff8980c.js";import{_ as K}from"./ConfirmRemoveModal.3ba4d6d1.js";import{_ as W}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{_ as q}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{_ as G}from"./VBlock.vue_vue&type=script&setup=true&lang.2e664adb.js";import{u as z}from"./useGuardCoach.2473a459.js";import{u as H}from"./useCoachApi.4bab1366.js";import{u as J}from"./useNotyf.ddf08f06.js";import{u as L}from"./useCoachInfo.5a7fb11a.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";D("data-v-2cfb537d");const Q={class:"columns is-multiline exp-form-body"},X={class:"column is-6"},Z=g("label",null,"Start Date",-1),ee=["value"],te={class:"column is-6"},ae=g("label",null,"End Date",-1),le=["value"],se={class:"column is-12"},oe={class:"help is-danger"},ie={class:"column is-12"},ne={class:"help is-danger"},re=w("Submit");y();var ue=b({props:{open:{type:Boolean,default:!1},content:{type:Object,default:()=>({type:B.EDUCATION,startDate:void 0,dueDate:void 0,detail:"",subDetail:""})},type:{type:String,default:B.EDUCATION}},emits:["close","submit"],setup(e,{emit:t}){const a=e,l=x({type:B.EDUCATION,startDate:void 0,dueDate:void 0,detail:"",subDetail:""}),s=E((()=>a.type===B.EDUCATION?"School":"Company")),o=E((()=>a.type===B.EDUCATION?"Major":"Position")),i=E((()=>l.value.detail&&l.value.subDetail)),p=()=>{t("close"),l.value={type:a.type,startDate:void 0,dueDate:void 0,detail:"",subDetail:""}},m=()=>{t("submit",r(n({},l.value),{type:a.type})),l.value={type:a.type,startDate:void 0,dueDate:void 0,detail:"",subDetail:""}};return Y((()=>a.content),(()=>{const e=a.content.startDate?F(a.content.startDate,"YYYY-MM-DD"):void 0,t=a.content.dueDate?F(a.content.dueDate,"YYYY-MM-DD"):void 0;l.value=r(n({},a.content),{type:a.type,startDate:e,dueDate:t})}),{deep:!0}),(t,a)=>{const n=u,r=d,v=h("v-date-picker"),D=u,y=d,b=c,x=f;return M(),C(x,{open:e.open,size:"medium",title:"Experience",actions:"right",onClose:p},{content:_((()=>[g("div",Q,[g("div",X,[j(v,{modelValue:l.value.startDate,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.startDate=e),color:"orange","model-config":{type:"string",mask:"YYYY-MM-DD"},masks:{input:"YYYY-MM-DD"},"max-date":l.value.dueDate,"trim-weeks":"",popover:{visibility:"click"}},{default:_((({inputValue:e,inputEvents:t})=>[j(r,null,{default:_((()=>[Z,j(n,{icon:"feather:calendar"},{default:_((()=>[g("input",k({class:"input",type:"text",placeholder:"Start Date",value:e},O(t)),null,16,ee)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","max-date"])]),g("div",te,[j(v,{modelValue:l.value.dueDate,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.dueDate=e),color:"orange","model-config":{type:"string",mask:"YYYY-MM-DD"},masks:{input:"YYYY-MM-DD"},"min-date":l.value.startDate,"trim-weeks":"",popover:{visibility:"click"}},{default:_((({inputValue:e,inputEvents:t})=>[j(r,null,{default:_((()=>[ae,j(n,{icon:"feather:calendar"},{default:_((()=>[g("input",k({class:"input",type:"text",placeholder:"End Date",value:e},O(t)),null,16,le)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","min-date"])]),g("div",se,[j(y,null,{default:_((()=>[g("label",null,I(A(s)),1),j(D,null,{default:_((()=>[U(g("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.detail=e),type:"text",name:"detail",class:"input"},null,512),[[V,l.value.detail]]),g("p",oe,"*"+I(A(s))+" is required",1)])),_:1})])),_:1})]),g("div",ie,[j(y,null,{default:_((()=>[g("label",null,I(A(o)),1),j(D,null,{default:_((()=>[U(g("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.subDetail=e),type:"text",name:"subdetail",class:"input"},null,512),[[V,l.value.subDetail]]),g("p",ne,"*"+I(A(o))+" is required",1)])),_:1})])),_:1})])])])),action:_((()=>[j(b,{color:"primary",disabled:!A(i),onClick:m},{default:_((()=>[re])),_:1},8,["disabled"])])),_:1},8,["open"])}}});ue.__scopeId="data-v-2cfb537d",D("data-v-61ef83ca");const de={class:"detail"},ce={class:"is-flex is-justify-content-space-between is-align-items-center mb-5"},pe={class:"subtitle is-4 is-narrow"},me=["onClick"],ve=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),g("div",{class:"meta"},[g("span",null,"Edit"),g("span",null,"Edit from list")],-1)],fe=["onClick"],De=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),g("div",{class:"meta"},[g("span",null,"Remove"),g("span",null,"Remove from list")],-1)];y();var ye=b({props:{experiences:{type:Object,default:void 0},type:{type:String,default:B.EDUCATION}},emits:["add","edit","remove"],setup(e,{emit:t}){const a=e,{capabilities:l}=z(),s=E((()=>a.type===B.EDUCATION?"Education":"Work")),o=e=>e.startDate&&e.dueDate?`${F(e.startDate,"D MMMM YYYY")} to ${F(e.dueDate,"D MMMM YYYY")}`:e.startDate?`start ${F(e.startDate,"D MMMM YYYY")}`:e.dueDate?`until ${F(e.startDate,"D MMMM YYYY")}`:void 0,i=()=>{t("add")};return(a,n)=>{const r=p,u=W,d=q,c=m,v=G;return M(),C(d,{class:"exp-card"},{default:_((()=>{var a;return[g("div",de,[g("div",ce,[g("h2",pe,I(A(s)),1),A(l).canCreateExp?(M(),C(r,{key:0,icon:"feather:plus",color:"warning",circle:"",outlined:"",onClick:i})):R("",!0)]),(null==(a=e.experiences)?void 0:a.length)?R("",!0):(M(),C(d,{key:0},{default:_((()=>[j(u,{title:"N/A"})])),_:1})),(M(!0),N(P,null,T(e.experiences,(a=>(M(),C(v,{key:`${e.type}-${a.id}`,title:a.detail,subtitle:a.subDetail,infratitle:o(a),center:"",class:"exp-item"},S({_:2},[A(l).canEditExp||A(l).canDeleteExp?{name:"action",fn:_((()=>[g("div",null,[j(c,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:_((()=>[A(l).canEditExp?(M(),N("a",{key:0,role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{t("edit",e)})(a)},ve,8,me)):R("",!0),A(l).canDeleteExp?(M(),N("a",{key:1,role:"menuitem",class:"dropdown-item is-media",onClick:e=>(e=>{t("remove",e)})(a)},De,8,fe)):R("",!0)])),_:2},1024)])]))}:void 0]),1032,["title","subtitle","infratitle"])))),128))])]})),_:1})}}});function be(){const{coachInfo:e,fetchCoachInfo:t}=L(),a=$(),l=J(),{createExpeirenceByCoachId:s,updateExperience:o,removeExperience:i}=H(),n=E((()=>"#edit"!==a.hash)),r=x(void 0),u=x(void 0),d=x(B.EDUCATION),c=x(!1),p=e=>{c.value=!c.value,e&&(d.value=e),c.value||(r.value=void 0)};return{coachInfo:e,readonly:n,submitExpForm:async a=>{if(!(null==e?void 0:e.value))return;const{data:i,message:n}=await((e,t)=>t.id?o(e,t):s(e,t))(e.value.id,a);n?l.error(v(n)):(l.success(a.id?"Updated success!":"Created success!"),p(),t())},toggleModal:p,openModal:c,selectedExpType:d,selectedExp:r,selectExp:e=>{r.value=e,p(e.type)},removeExp:e=>{u.value=e},removedExp:u,confirmRemoveExp:async()=>{var a;if(!(null==e?void 0:e.value)||!u.value)return;const{message:s}=await i({coachId:e.value.id,experienceId:null==(a=u.value)?void 0:a.id});s?l.error(v(s)):(u.value=void 0,l.success("Removed success!"),t())}}}ye.__scopeId="data-v-61ef83ca";const xe={key:0},Ee={class:"text-center"},Ye=w(" Remove Experience ");var he=b({setup(e){const{coachInfo:t,readonly:a,toggleModal:l,selectedExpType:s,openModal:o,selectedExp:i,selectExp:n,removeExp:r,removedExp:u,submitExpForm:d,confirmRemoveExp:c}=be();return(e,a)=>{var p,m;const v=ue,f=K,D=ye;return A(t)?(M(),N("div",xe,[j(v,{open:A(o),type:A(s),content:A(i),onClose:A(l),onSubmit:A(d)},null,8,["open","type","content","onClose","onSubmit"]),j(f,{open:!!A(u),onClose:a[0]||(a[0]=e=>u.value=void 0),onConfirm:A(c)},{default:_((()=>{var e;return[g("p",Ee,[Ye,g("strong",null,I(null==(e=A(u))?void 0:e.detail),1)])]})),_:1},8,["open","onConfirm"]),j(D,{experiences:null==(p=A(t).experiences)?void 0:p.education,type:A(B).EDUCATION,onAdd:a[1]||(a[1]=e=>A(l)(A(B).EDUCATION)),onEdit:A(n),onRemove:A(r)},null,8,["experiences","type","onEdit","onRemove"]),j(D,{experiences:null==(m=A(t).experiences)?void 0:m.work,type:A(B).WORK,onAdd:a[2]||(a[2]=e=>A(l)(A(B).WORK)),onEdit:A(n),onRemove:A(r)},null,8,["experiences","type","onEdit","onRemove"])])):R("",!0)}}});export default he;
