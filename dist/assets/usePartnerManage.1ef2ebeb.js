var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,n=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&o(e,l,a[l]);return e},s=(e,t)=>a(e,l(t));import{c as d,a as u,e as p}from"./index.d7dc1ff6.js";import{_ as c,a as m}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as v}from"./ButtonFileManager.vue_vue&type=script&setup=true&lang.8d57be3d.js";import{_ as f}from"./FormTemplate.a6fb27bf.js";import{d as y,r as g,D as h,E as b,o as j,y as P,F as _,x as k,e as D,i as E,H as O,h as w,K as x,ai as V,V as N,t as B,ao as I,ap as S,G as U,q as L,A as C,b as F,k as T,ae as Y}from"./vendor.1c8b4573.js";import{u as M}from"./useNotyf.ddf08f06.js";import{I as A}from"./partner.enum.43f93474.js";import{u as q}from"./usePartnerApi.2e3c406b.js";const z=U("Cancel"),G=U("Update"),H=U("Edit"),K=U("Submit"),R={class:"form-fieldset"},J={class:"columns is-multiline"},Q={class:"column is-12 has-text-centered"},W={class:"column is-12"},X=w("label",null,"Partner Name",-1),Z=["readonly"],$={class:"column is-12"},ee=w("label",null,"Partner Detail",-1),ae=["readonly"],le={class:"column is-12"},te=w("label",null,"Partner join date ",-1),ie={class:"field"},re={class:"control"},oe=["disabled","value"],ne={class:"column is-12"},se=w("label",null,"Partner Phone",-1),de=["readonly"],ue={class:"column is-12"},pe=w("label",null,"Partner Email",-1),ce=["readonly"],me={key:0,class:"column is-6"},ve=w("label",null,"Company Logo",-1),fe={class:"mt-3"};var ye=y({props:{info:{type:Object,default:void 0},title:{type:String,default:"Create Partner"},canEdit:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},validate:{type:Object,default:void 0},isEdit:{type:Boolean,default:!1}},emits:["edit","create"],setup(e,{emit:a}){var l,t,i,r,o,p;const y=e,U=g({companyLogo:null==(l=y.info)?void 0:l.companyLogo,partnerName:null==(t=y.info)?void 0:t.partnerName,detail:null==(i=y.info)?void 0:i.detail,phone:null==(r=y.info)?void 0:r.phone,email:null==(o=y.info)?void 0:o.email,isB2b:A.TRUE,joinDate:h(null==(p=y.info)?void 0:p.joinDate).format()}),L=M(),C=g(!0),F=e=>{C.value="image/jpeg"===e.type||"image/png"===e.type,C.value?(U.value.companyLogo=e.src,window.scrollTo(0,0)):L.error("Please select image/jpeg or image/png")},T=()=>{const e=s(n({},U.value),{joinDate:h(U.value.joinDate).toISOString(),detail:""===U.value.detail||null===U.value.detail?void 0:U.value.detail,phone:""===U.value.phone?void 0:U.value.phone,email:""===U.value.email?void 0:U.value.email});y.isEdit?a("edit",e):a("create",e)};return(a,l)=>{const t=d,i=u,r=c,o=m,n=c,s=m,p=b("v-date-picker"),y=v,g=f;return j(),P(g,{title:e.title},{buttons:_((()=>[k(t,{icon:"feather:arrow-left","dark-outline":"",to:{name:"partners"}},{default:_((()=>[z])),_:1}),e.isEdit||e.readonly?(j(),D(O,{key:0},[e.isEdit?(j(),P(t,{key:0,color:"primary",icon:"feather:check",onClick:T},{default:_((()=>[G])),_:1})):e.canEdit&&e.readonly?(j(),P(t,{key:1,color:"primary",icon:"feather:edit",to:"#edit"},{default:_((()=>[H])),_:1})):E("",!0)],64)):(j(),P(t,{key:1,color:"primary",icon:"feather:check",onClick:T},{default:_((()=>[K])),_:1}))])),default:_((()=>[w("div",R,[w("div",J,[w("div",Q,[U.value.companyLogo?(j(),P(i,{key:0,picture:U.value.companyLogo,size:"big"},null,8,["picture"])):E("",!0)]),w("div",W,[k(o,null,{default:_((()=>[X,k(r,null,{default:_((()=>[x(w("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>U.value.partnerName=e),type:"text",class:"input is-primary-focus",placeholder:"Partner Name",readonly:e.readonly},null,8,Z),[[V,U.value.partnerName]]),x(w("div",{class:"help is-danger"},B(e.validate.partnerName),513),[[N,e.validate.partnerName]])])),_:1})])),_:1})]),w("div",$,[k(s,null,{default:_((()=>[ee,k(n,null,{default:_((()=>[x(w("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>U.value.detail=e),type:"textarea",class:"textarea is-primary-focus",rows:"3",placeholder:"Detail",readonly:e.readonly},"\n              ",8,ae),[[V,U.value.detail]]),x(w("div",{class:"help is-danger"},B(e.validate.detail),513),[[N,e.validate.detail]])])),_:1})])),_:1})]),w("div",le,[te,w("div",ie,[w("div",re,[k(p,{modelValue:U.value.joinDate,"onUpdate:modelValue":l[2]||(l[2]=e=>U.value.joinDate=e),color:"orange",masks:{input:"DD/MM/YYYY"},popover:{visibility:e.readonly?"":"click"}},{default:_((({inputValue:a,inputEvents:l})=>[k(o,null,{default:_((()=>[k(r,{icon:"feather:calendar"},{default:_((()=>[w("input",I({class:"input",type:"text",placeholder:"Ticket Start Date",disabled:e.readonly,value:a},S(l)),null,16,oe)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","popover"]),x(w("div",{class:"help is-danger"},B(e.validate.joinDate),513),[[N,e.validate.joinDate]])])])]),w("div",ne,[k(o,null,{default:_((()=>[se,k(r,null,{default:_((()=>[x(w("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>U.value.phone=e),type:"text",class:"input is-primary-focus",placeholder:"Partner phone",readonly:e.readonly},null,8,de),[[V,U.value.phone]]),x(w("div",{class:"help is-danger"},B(e.validate.phone),513),[[N,e.validate.phone]])])),_:1})])),_:1})]),w("div",ue,[k(o,null,{default:_((()=>[pe,k(r,null,{default:_((()=>[x(w("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>U.value.email=e),type:"text",class:"input is-primary-focus",placeholder:"Partner Email",readonly:e.readonly},null,8,ce),[[V,U.value.email]]),x(w("div",{class:"help is-danger"},B(e.validate.email),513),[[N,e.validate.email]])])),_:1})])),_:1})]),e.readonly?E("",!0):(j(),D("div",me,[k(s,null,{default:_((()=>[ve,w("div",fe,[k(y,{onSubmit:F})])])),_:1})]))])])])),_:1},8,["title"])}}});function ge(){const e=L({partnerInfo:void 0,validate:{}}),a=C(),l=F(),t=M(),i=T((()=>"#edit"===a.hash)),r=a.params.id,{getPartnerById:o,createPartner:d,editPartner:u}=q();return s(n({},Y(e)),{fetchPartnerById:async()=>{const a=await o(+r);e.partnerInfo=a},createPartner:async a=>{const i=await d(a);201===i.status?(t.success("success!"),e.validate={},l.push({name:"partners"})):"object"==typeof i.message?e.validate=i.message:t.error(p(i.message))},updatePartner:async a=>{const i=await u(+r,a);200===i.status?(t.success("success!"),e.validate={},l.push({name:"partners"})):"object"==typeof i.message?e.validate=i.message:t.error(p(i.message))},isEdit:i})}export{ye as _,ge as u};
