var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{_ as r}from"./ValidateMessageBox.vue_vue&type=script&setup=true&lang.ac2d19e3.js";import{_ as s}from"./VSwitchBlock.vue_vue&type=script&setup=true&lang.fd20ebd0.js";import{_ as n,a as i}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{l as c,c as p,i as v,e as m}from"./index.d7dc1ff6.js";import{_ as b}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{_ as y}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as f}from"./ProductCoachAccess.a6fc4cc6.js";import{_ as h}from"./ButtonFileManager.vue_vue&type=script&setup=true&lang.8d57be3d.js";import{_}from"./ProductTypeOption.vue_vue&type=script&setup=true&lang.1ff2f842.js";import{_ as g}from"./TextEditor.7b24ebe1.js";import{d as D,r as V,k as x,ad as P,E as k,o as j,e as T,x as U,F as I,h as w,K as O,V as S,g as C,ai as E,n as A,y as L,i as B,t as F,G as K,q as M,A as z,b as N,ae as R}from"./vendor.1c8b4573.js";import{u as G}from"./useOptionApi.f4dc99b9.js";import{P as Q,a as Y}from"./product.enum.768ca89a.js";import{b as $,G as q,c as W}from"./package.enum.de4ee89f.js";import{u as H}from"./useProductApi.78c03a90.js";import{u as J}from"./useNotyf.ddf08f06.js";const X={class:"columns is-multiline is-justify-content-flex-end"},Z={class:"column is-4"},ee=w("label",null,"show on website?",-1),le={class:"column is-6 ml-auto"},ae={class:"is-flex is-justify-content-flex-end"},te=K("Submit"),de=K("Update"),oe=K("Edit"),ue={class:"columns"},re={class:"column is-4"},se=w("p",{class:"subtitle"},"Assessment",-1),ne={class:"columns is-multiline"},ie={class:"column is-12"},ce=w("label",null,"Pre Test",-1),pe=w("label",null,"Mid Test",-1),ve=w("label",null,"Post Test",-1),me=w("p",{class:"subtitle"},"Product Recommend",-1),be={class:"columns is-multiline"},ye={class:"column is-12"},fe=w("label",null,"Product Recommend 001",-1),he=w("label",null,"Product Recommend 002",-1),_e=w("label",null,"Product Recommend 003",-1),ge=w("p",{class:"subtitle"},"SEO Content",-1),De={class:"columns is-multiline"},Ve={class:"column is-12"},xe=w("label",null,"Meta Title",-1),Pe=["readonly"],ke={class:"column is-12"},je=w("label",null,"Meta Keywords",-1),Te=["readonly"],Ue={class:"column is-12"},Ie=w("label",null,"Meta Descriptions",-1),we=["readonly"],Oe={class:"column is-12"},Se=w("label",null,"Footer",-1),Ce=["readonly"],Ee={class:"column is-8"},Ae=w("p",{class:"subtitle"},"Product Information",-1),Le={class:"columns is-multiline"},Be={class:"column is-12"},Fe=["src"],Ke={class:"column is-6"},Me=w("label",null,"Product Name",-1),ze=["readonly"],Ne={key:0,class:"help has-text-danger"},Re={class:"column is-6"},Ge=w("label",null,"Excerpt คําขยายความ Product",-1),Qe=["readonly"],Ye={key:0,class:"help has-text-danger"},$e={class:"column is-4"},qe=w("label",null,"Product Type",-1),We={key:0,class:"help has-text-danger"},He={class:"column is-4"},Je=w("label",null,"Product Level",-1),Xe={key:0,class:"help has-text-danger"},Ze={class:"column is-4"},el=w("label",null,"Product CEFR",-1),ll={key:0,class:"help has-text-danger"},al={class:"column is-4"},tl=w("label",null,"URL Slug",-1),dl=["readonly"],ol={key:0,class:"help has-text-danger"},ul={class:"column is-4"},rl=w("label",null,"Order",-1),sl=["readonly"],nl={key:0,class:"help has-text-danger"},il={class:"column is-4"},cl=w("label",null,"Average Duration",-1),pl=["readonly"],vl={key:0,class:"help has-text-danger"},ml={class:"column is-4"},bl=K("Average Price "),yl={key:0},fl={class:"select"},hl=["disabled"],_l=[w("option",{value:"thb"},"฿",-1),w("option",{value:"vnd"},"₫",-1)],gl=["readonly"],Dl={key:0,class:"help has-text-danger"},Vl={class:"column is-4"},xl=K("Before Discount Price "),Pl={key:0},kl={class:"select"},jl=["disabled"],Tl=[w("option",{value:"thb"},"฿",-1),w("option",{value:"vnd"},"₫",-1)],Ul=["readonly"],Il={key:0,class:"help has-text-danger"},wl={class:"column is-12"};var Ol=D({props:{validate:{type:Object,default:void 0},productDetail:{type:Object,default:void 0},readonly:{type:Boolean,default:!1},havePermission:{type:Boolean,default:!1}},emits:["create","edit","view"],setup(e,{emit:l}){var a,t,d,o,u,v,m,D,K,M,z,N,R,H,J,Ol,Sl,Cl,El,Al,Ll,Bl,Fl,Kl;const Ml=e,{getProducts:zl,getProductType:Nl,getPreTestQuizzes:Rl,getMidTestQuizzes:Gl,getPostTestQuizzes:Ql}=G(),Yl=V({name:(null==(a=Ml.productDetail)?void 0:a.name)||"",excerpt:(null==(t=Ml.productDetail)?void 0:t.excerpt)||"",body:null==(d=Ml.productDetail)?void 0:d.body,purchasable:(null==(o=Ml.productDetail)?void 0:o.purchasable)||Q.NO,type:null==(u=Ml.productDetail)?void 0:u.type,cefr:null==(v=Ml.productDetail)?void 0:v.cefr,slug:(null==(m=Ml.productDetail)?void 0:m.slug)||"",order:null==(D=Ml.productDetail)?void 0:D.order,price:null==(K=Ml.productDetail)?void 0:K.price,beforeDiscount:null==(M=Ml.productDetail)?void 0:M.beforeDiscount,duration:null==(z=Ml.productDetail)?void 0:z.duration,image:(null==(N=Ml.productDetail)?void 0:N.image)||void 0,globishLevel:null==(R=Ml.productDetail)?void 0:R.globishLevel,metaTitle:(null==(H=Ml.productDetail)?void 0:H.metaTitle)||void 0,metaKeyword:(null==(J=Ml.productDetail)?void 0:J.metaKeyword)||void 0,metaDescription:(null==(Ol=Ml.productDetail)?void 0:Ol.metaDescription)||void 0,seoFooter:(null==(Sl=Ml.productDetail)?void 0:Sl.seoFooter)||void 0,recommend1:(null==(Cl=Ml.productDetail)?void 0:Cl.recommend1)||void 0,recommend2:(null==(El=Ml.productDetail)?void 0:El.recommend2)||void 0,recommend3:(null==(Al=Ml.productDetail)?void 0:Al.recommend3)||void 0,preTestId:(null==(Ll=Ml.productDetail)?void 0:Ll.preTestId)||void 0,midTestId:(null==(Bl=Ml.productDetail)?void 0:Bl.midTestId)||void 0,postTestId:(null==(Fl=Ml.productDetail)?void 0:Fl.postTestId)||void 0}),$l=x((()=>Yl.value.type===Y.KID||Yl.value.type===Y.SPEAKINGLAB)),ql=x((()=>$l.value?$:q)),Wl=x((()=>Object.entries(ql.value).map((([e,l])=>({label:e.replace(/_/g," "),value:l}))))),Hl=Object.values(W).map((e=>({label:e,value:e})));V([]),V([]),V([]),V(!1);const Jl=V((null==(Kl=Ml.productDetail)?void 0:Kl.purchasable)===Q.YES),Xl=V(!1),Zl=e=>{RegExp("image/*").test(e.type)&&(Yl.value.image=e.src)};P((async()=>{await Promise.all([zl(),Nl()])}));const ea=()=>{Yl.value.purchasable=Jl.value?Q.YES:Q.NO};return(a,t)=>{const d=r,o=s,u=n,v=i,m=p,D=b,V=y,x=f,P=h,K=_,M=k("Multiselect"),z=g;return j(),T("div",null,[U(d,{validate:e.validate},null,8,["validate"]),U(D,{class:"mb-3"},{default:I((()=>[w("div",X,[w("div",Z,[U(v,null,{default:I((()=>[ee,U(u,null,{default:I((()=>[U(o,{modelValue:Jl.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>Jl.value=e),ea],label:Jl.value?"Purchase (show on website)":"Unpurchase (not show on website)",disabled:e.readonly,color:"primary"},null,8,["modelValue","label","disabled"])])),_:1})])),_:1})]),w("div",le,[w("div",ae,[O(U(m,{icon:"feather:edit-2",color:"primary",onClick:t[1]||(t[1]=e=>l("create",Yl.value))},{default:I((()=>[te])),_:1},512),[[S,!e.productDetail]]),O(U(m,{icon:"feather:edit-2",color:"primary",onClick:t[2]||(t[2]=e=>{l("edit",Yl.value),Xl.value=!Xl.value})},{default:I((()=>[de])),_:1},512),[[S,e.productDetail&&!e.readonly]]),O(U(m,{to:"#edit",icon:"feather:edit-2",color:"primary",onClick:t[3]||(t[3]=e=>l("view",Yl.value))},{default:I((()=>[oe])),_:1},512),[[S,e.productDetail&&e.readonly&&e.havePermission]])])])])])),_:1}),w("div",ue,[w("div",re,[U(D,{class:"mb-3"},{default:I((()=>[se,w("div",ne,[w("div",ie,[U(v,null,{default:I((()=>[ce,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.preTestId,"onUpdate:modelValue":t[4]||(t[4]=e=>Yl.value.preTestId=e),placeholder:"Select pre-test","callback-search":C(Rl),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1}),U(v,null,{default:I((()=>[pe,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.midTestId,"onUpdate:modelValue":t[5]||(t[5]=e=>Yl.value.midTestId=e),placeholder:"Select mid-test","callback-search":C(Gl),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1}),U(v,null,{default:I((()=>[ve,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.postTestId,"onUpdate:modelValue":t[6]||(t[6]=e=>Yl.value.postTestId=e),placeholder:"Select post-test","callback-search":C(Ql),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1})])])])),_:1}),U(D,{class:"mb-3"},{default:I((()=>[me,w("div",be,[w("div",ye,[U(v,null,{default:I((()=>[fe,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.recommend1,"onUpdate:modelValue":t[7]||(t[7]=e=>Yl.value.recommend1=e),placeholder:"Select recommend 001","callback-search":C(zl),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1}),U(v,null,{default:I((()=>[he,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.recommend2,"onUpdate:modelValue":t[8]||(t[8]=e=>Yl.value.recommend2=e),placeholder:"Select recommend 002","callback-search":C(zl),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1}),U(v,null,{default:I((()=>[_e,U(u,null,{default:I((()=>[U(V,{modelValue:Yl.value.recommend3,"onUpdate:modelValue":t[9]||(t[9]=e=>Yl.value.recommend3=e),placeholder:"Select recommend 003","callback-search":C(zl),searchable:!0,"track-by":"name","value-prop":"id",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1})])),_:1})])])])),_:1}),U(D,{class:"mb-3"},{default:I((()=>[ge,w("div",De,[w("div",Ve,[U(v,null,{default:I((()=>[xe,U(u,null,{default:I((()=>[O(w("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>Yl.value.metaTitle=e),type:"text",class:"input",readonly:e.readonly},null,8,Pe),[[E,Yl.value.metaTitle]])])),_:1})])),_:1})]),w("div",ke,[U(v,null,{default:I((()=>[je,U(u,null,{default:I((()=>[O(w("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>Yl.value.metaKeyword=e),type:"text",class:"input",readonly:e.readonly},null,8,Te),[[E,Yl.value.metaKeyword]])])),_:1})])),_:1})]),w("div",Ue,[U(v,null,{default:I((()=>[Ie,U(u,null,{default:I((()=>[O(w("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>Yl.value.metaDescription=e),type:"text",class:"input",readonly:e.readonly},null,8,we),[[E,Yl.value.metaDescription]])])),_:1})])),_:1})]),w("div",Oe,[U(v,null,{default:I((()=>[Se,U(u,null,{default:I((()=>[O(w("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>Yl.value.seoFooter=e),type:"text",class:"input",readonly:e.readonly},null,8,Ce),[[E,Yl.value.seoFooter]])])),_:1})])),_:1})])])])),_:1}),U(x,{title:"Coach Access","columns-header":["Name","Category","Experience"],"search-placeholder":"Search coach name","search-title":"Search Coach",edit:!e.readonly,create:!e.productDetail,"product-action":Xl.value},null,8,["edit","create","product-action"])]),w("div",Ee,[U(D,{class:"mb-3"},{default:I((()=>[Ae,w("div",Le,[w("div",Be,[w("div",{class:A(["image-poster",{readonly:e.readonly}])},[O(w("div",{class:A(["btn-file",[!Yl.value.image&&"show"]])},[e.readonly?B("",!0):(j(),L(P,{key:0,onSubmit:Zl}))],2),[[S,!e.readonly]]),Yl.value.image?(j(),T("img",{key:0,src:Yl.value.image,alt:""},null,8,Fe)):B("",!0)],2)]),w("div",Ke,[U(v,null,{default:I((()=>{var l,a;return[Me,U(u,{icon:"lnil lnil-file-name","has-error":!!(null==(l=e.validate)?void 0:l.name)},{default:I((()=>[O(w("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>Yl.value.name=e),type:"text",class:"input",placeholder:"Product Name",readonly:e.readonly},null,8,ze),[[E,Yl.value.name]])])),_:1},8,["has-error"]),(null==(a=e.validate)?void 0:a.name)?(j(),T("p",Ne,F(e.validate.name),1)):B("",!0)]})),_:1})]),w("div",Re,[U(v,null,{default:I((()=>{var l;return[Ge,U(u,{icon:"lnil lnil-zoom-in","has-error":!!(null==(l=e.validate)?void 0:l.excerpt)},{default:I((()=>{var l;return[O(w("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>Yl.value.excerpt=e),type:"text",class:"input",placeholder:"Product Excerpt",readonly:e.readonly},null,8,Qe),[[E,Yl.value.excerpt]]),(null==(l=e.validate)?void 0:l.excerpt)?(j(),T("p",Ye,F(e.validate.excerpt),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",$e,[U(v,null,{default:I((()=>{var l;return[qe,U(u,{"has-error":!!(null==(l=e.validate)?void 0:l.type)},{default:I((()=>{var l;return[U(K,{modelValue:Yl.value.type,"onUpdate:modelValue":t[16]||(t[16]=e=>Yl.value.type=e),disabled:e.readonly},null,8,["modelValue","disabled"]),(null==(l=e.validate)?void 0:l.type)?(j(),T("p",We,F(e.validate.type),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",He,[U(v,null,{default:I((()=>{var l;return[Je,U(u,{"has-error":!!(null==(l=e.validate)?void 0:l.globishLevel)},{default:I((()=>{var l;return[U(M,{modelValue:Yl.value.globishLevel,"onUpdate:modelValue":t[17]||(t[17]=e=>Yl.value.globishLevel=e),placeholder:"Choose a glevel",options:C(Wl),searchable:!0,disabled:e.readonly},null,8,["modelValue","options","disabled"]),(null==(l=e.validate)?void 0:l.globishLevel)?(j(),T("p",Xe,F(e.validate.globishLevel),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",Ze,[U(v,null,{default:I((()=>{var l;return[el,U(u,{"has-error":!!(null==(l=e.validate)?void 0:l.cefr)},{default:I((()=>{var l;return[U(M,{modelValue:Yl.value.cefr,"onUpdate:modelValue":t[18]||(t[18]=e=>Yl.value.cefr=e),placeholder:"Choose level of cefr",options:C(Hl),searchable:!0,disabled:e.readonly},null,8,["modelValue","options","disabled"]),(null==(l=e.validate)?void 0:l.cefr)?(j(),T("p",ll,F(e.validate.cefr),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",al,[U(v,null,{default:I((()=>{var l;return[tl,U(u,{icon:"lnil lnil-tag","has-error":!!(null==(l=e.validate)?void 0:l.slug)},{default:I((()=>{var l;return[O(w("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>Yl.value.slug=e),type:"text",class:"input",placeholder:"Slug",readonly:e.readonly},null,8,dl),[[E,Yl.value.slug]]),(null==(l=e.validate)?void 0:l.slug)?(j(),T("p",ol,F(e.validate.slug),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",ul,[U(v,null,{default:I((()=>{var l;return[rl,U(u,{icon:"lnil lnil-list","has-error":!!(null==(l=e.validate)?void 0:l.order)},{default:I((()=>{var l;return[O(w("input",{"onUpdate:modelValue":[t[20]||(t[20]=e=>Yl.value.order=e),t[21]||(t[21]=e=>Yl.value.order=+e)],type:"number",class:"input",placeholder:"Order",min:"0",readonly:e.readonly},null,8,sl),[[E,Yl.value.order]]),(null==(l=e.validate)?void 0:l.order)?(j(),T("p",nl,F(e.validate.order),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",il,[U(v,null,{default:I((()=>{var l;return[cl,U(u,{icon:"lnil lnil-timer","has-error":!!(null==(l=e.validate)?void 0:l.duration)},{default:I((()=>{var l;return[O(w("input",{"onUpdate:modelValue":[t[22]||(t[22]=e=>Yl.value.duration=e),t[23]||(t[23]=e=>Yl.value.duration=+e)],type:"text",class:"input",placeholder:"Duration",readonly:e.readonly},null,8,pl),[[E,Yl.value.duration]]),(null==(l=e.validate)?void 0:l.duration)?(j(),T("p",vl,F(e.validate.duration),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",ml,[U(v,null,{default:I((()=>{var l,a;return[w("label",null,[bl,(null==(l=Yl.value)?void 0:l.price)?(j(),T("span",yl,F(C(c)(Yl.value.price)),1)):B("",!0)]),U(u,{"has-error":!!(null==(a=e.validate)?void 0:a.price)},{default:I((()=>{var l;return[U(v,{addons:""},{default:I((()=>[U(u,null,{default:I((()=>[w("span",fl,[w("select",{disabled:e.readonly},_l,8,hl)])])),_:1}),U(u,{expanded:""},{default:I((()=>[O(w("input",{"onUpdate:modelValue":[t[24]||(t[24]=e=>Yl.value.price=e),t[25]||(t[25]=e=>Yl.value.price=+e)],type:"number",class:"input",placeholder:"Price",readonly:e.readonly,min:"0"},null,8,gl),[[E,Yl.value.price]])])),_:1})])),_:1}),(null==(l=e.validate)?void 0:l.price)?(j(),T("p",Dl,F(e.validate.price),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",Vl,[U(v,null,{default:I((()=>{var l,a;return[w("label",null,[xl,(null==(l=Yl.value)?void 0:l.beforeDiscount)?(j(),T("span",Pl,F(C(c)(Yl.value.beforeDiscount)),1)):B("",!0)]),U(u,{"has-error":!!(null==(a=e.validate)?void 0:a.beforeDiscount)},{default:I((()=>{var l;return[U(v,{addons:""},{default:I((()=>[U(u,null,{default:I((()=>[w("span",kl,[w("select",{disabled:e.readonly},Tl,8,jl)])])),_:1}),U(u,{expanded:""},{default:I((()=>[O(w("input",{"onUpdate:modelValue":[t[26]||(t[26]=e=>Yl.value.beforeDiscount=e),t[27]||(t[27]=e=>Yl.value.beforeDiscount=+e)],type:"number",class:"input",min:"0",placeholder:"Price",readonly:e.readonly},null,8,Ul),[[E,Yl.value.beforeDiscount]])])),_:1})])),_:1}),(null==(l=e.validate)?void 0:l.beforeDiscount)?(j(),T("p",Il,F(e.validate.beforeDiscount),1)):B("",!0)]})),_:1},8,["has-error"])]})),_:1})]),w("div",wl,[U(z,{modelValue:Yl.value.body,"onUpdate:modelValue":[t[28]||(t[28]=e=>Yl.value.body=e),t[29]||(t[29]=e=>Yl.value.body=e)],label:"Website Content",readonly:e.readonly},null,8,["modelValue","readonly"])])])])),_:1})])])])}}});function Sl(){const e=M({validate:{},productInfo:void 0}),r=z(),s=N(),n=J(),{getProductById:i,createProduct:c,updateProduct:p}=H(),b=x((()=>"#edit"===r.hash));return y=((e,l)=>{for(var a in l||(l={}))d.call(l,a)&&u(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&u(e,a,l[a]);return e})({},R(e)),l(y,a({submitCreateProduct:async l=>{var a;const t=await c(l);if(v(t))return e.validate={},n.success("Success!"),void((null==(a=t.data)?void 0:a.id)?s.push({name:"products-:productid",params:{productid:`${t.data.id}`}}):s.push({name:"products"}));"object"==typeof t.message?e.validate=t.message:n.error(m(t.message))},submitUpdateProduct:async l=>{var a,t;if(!(null==(a=e.productInfo)?void 0:a.id))return;const d=await p(e.productInfo.id,l),o=v(d);if(o)return e.productInfo=o,e.validate={},n.success("Success!"),void s.push({name:"products-:productid",params:{productid:`${null==(t=e.productInfo)?void 0:t.id}`}});"object"==typeof d.message?e.validate=d.message:n.error(m(d.message))},fetchProductById:async l=>{const a=await i(l);a&&(e.productInfo=a)},isEdit:b}));var y}export{Ol as _,Sl as u};
