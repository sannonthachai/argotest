var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,n=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&d(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&d(e,a,t[a]);return e},r=(e,l)=>t(e,a(l));import{_ as i}from"./ValidateMessageBox.vue_vue&type=script&setup=true&lang.ac2d19e3.js";import{a as o,_ as p}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as c}from"./VSwitchSegment.vue_vue&type=script&setup=true&lang.43f673db.js";import{_ as m}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{j as v}from"./index.d7dc1ff6.js";import{d as f,r as b,D as h,k as y,S as z,E as g,o as q,e as S,x as I,H as _,y as Y,F as D,h as k,i as j,K as V,ai as O,V as M,g as w,G as P,t as x,ah as U,ao as E,ap as Q}from"./vendor.1c8b4573.js";import{u as A}from"./useOptionApi.f4dc99b9.js";import{a as C}from"./student.helper.13430dac.js";const F={class:"form-fieldset"},$=k("label",null,"Student",-1),B=["value"],T=k("label",null,"Student ID (Use , For more student ) ",-1),G={class:"help is-warning"},H=k("p",{class:"help has-text-danger"}," * If enter the wrong mark or the ID does not exist, the system may crash. Please enter carefully. ",-1),K=k("label",null,"Find students whose in this batch. ",-1),R={class:"multiselect-tag"},J=["onMousedown"],L={class:"select-option-text"},N=k("p",{class:"help has-text-danger"},"* Can choose multiple",-1),W=k("label",null,"Quiz",-1),X={class:"help is-danger"},Z=k("label",null,"Quiz name",-1),ee=k("label",null,"Product",-1),te=k("p",{class:"help is-warning"}," *You must select product if you want to open assessment with comparison graph report ",-1),ae={class:"help is-danger"},le=k("label",{class:"label-date"},"Start Date / End Date",-1),ue=["value"],se=["value"];var de=f({props:{mode:{type:String,default:"single"},quizStudent:{type:Object,required:!0},studentInfo:{type:Object,default:void 0},validate:{type:Object,default:()=>({})}},emits:["update:quiz-student"],setup(e,{emit:t}){const a=e,l=b(!1),u=b(""),s=b([]),d=b({start:h(a.quizStudent.startDate).format("YYYY-MM-DD"),end:a.quizStudent.endDate?h(a.quizStudent.endDate).format("YYYY-MM-DD"):h().add(7,"days").format("YYYY-MM-DD")}),f=b(void 0),de=y((()=>{var e;return!!u.value&&(null==(e=u.value)?void 0:e.split(",").every((e=>/^\d+$/.test(e))))})),{getAllQuizzes:ne,getStudentsInBatch:re,getProductByQuiz:ie}=A(),oe=e=>ie({quizId:a.quizStudent.quizId,quizType:f.value,currentPage:1,perPage:20}),pe=e=>a.quizStudent.batchId?re(e,a.quizStudent.batchId):[],ce=e=>{const l=r(n(n({},a.quizStudent),e),{studentIds:s.value,startDate:h(d.value.start).set({hour:0,minute:0,second:0,millisecond:0}).toISOString(),endDate:h(d.value.end).set({hour:0,minute:0,second:0,millisecond:0}).toISOString()});t("update:quiz-student",l)},me=()=>{ce()},ve=()=>{u.value="",s.value=[]},fe=()=>{ve(),me()},be=()=>{s.value=u.value.split(",").map((e=>parseInt(e))),me()},he=(e,t)=>{f.value=null==t?void 0:t.type,ce(r(n({},a.quizStudent),{productId:void 0,quizId:e||0}))};return z((()=>a.quizStudent.studentIds),(()=>{var e;a.quizStudent.studentIds&&0!==(null==(e=a.quizStudent.studentIds)?void 0:e.length)||ve()})),(t,a)=>{const f=i,b=o,h=c,y=p,z=o,A=g("Multiselect"),re=p,ie=m,ve=v,ye=g("v-date-picker");return q(),S("div",F,[I(f,{validate:e.validate},null,8,["validate"]),"single"===e.mode?(q(),S(_,{key:0},[e.studentInfo?(q(),Y(b,{key:0,class:"quiz-modal"},{default:D((()=>[$,k("input",{type:"text",class:"input",readonly:!0,value:`${e.studentInfo.id} - ${e.studentInfo.fullnameEn}`},null,8,B)])),_:1})):j("",!0)],64)):j("",!0),"multiple"===e.mode?(q(),S(_,{key:1},[I(z,{grouped:""},{default:D((()=>[I(y,null,{default:D((()=>[I(h,{modelValue:l.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>l.value=e),fe],"label-true":"Student Tag","label-false":"Student ID",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),l.value?(q(),Y(b,{key:1},{default:D((()=>[K,I(re,null,{default:D((()=>[I(A,{modelValue:s.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value=e),me],mode:"tags",filterResults:!1,delay:0,searchable:!0,"create-tag":!1,options:pe,"tag-by":"id","value-prop":"id",placeholder:"Select Student"},{tag:D((({option:e,remove:t,disabled:l})=>[k("div",R,[P(x(w(C)(e))+" ",1),l?j("",!0):(q(),S("i",{key:0,onClick:a[2]||(a[2]=U((()=>{}),["prevent"])),onMousedown:U((a=>t(e)),["prevent","stop"])},null,40,J))])])),option:D((({option:e})=>[k("span",L,x(w(C)(e)),1)])),_:1},8,["modelValue"]),N])),_:1})])),_:1})):(q(),Y(z,{key:0},{default:D((()=>[T,I(y,{icon:"feather:user","is-valid":w(de)},{default:D((()=>[V(k("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),type:"text",class:"input is-primary-focus",placeholder:"7525,4544,2315,1057",onInput:be},null,544),[[O,u.value]]),V(k("div",G," StudentId must be number ",512),[[M,!w(de)]]),H])),_:1},8,["is-valid"])])),_:1}))],64)):j("",!0),I(z,null,{default:D((()=>[W,I(y,{"has-error":e.validate.quizId},{default:D((()=>[I(ie,{modelValue:e.quizStudent.quizId,"onUpdate:modelValue":[a[4]||(a[4]=t=>e.quizStudent.quizId=t),he],searchable:!0,"callback-search":w(ne),"label-by":"name","track-by":"name","value-prop":"id",onClear:he},null,8,["modelValue","callback-search"]),V(k("p",X," Please select quiz ",512),[[M,e.validate.quizId]])])),_:1},8,["has-error"])])),_:1}),I(z,null,{default:D((()=>[Z,I(y,{"has-error":e.validate.name},{default:D((()=>[V(k("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>e.quizStudent.name=t),type:"text",class:"input is-primary-focus",placeholder:"Quiz name",onInput:me},null,544),[[O,e.quizStudent.name]]),V(k("p",{class:"help is-danger"},x(e.validate.name),513),[[M,e.validate.name]])])),_:1},8,["has-error"])])),_:1}),I(z,null,{default:D((()=>[ee,I(y,{"has-error":e.validate.productId},{default:D((()=>[I(ie,{key:`quiz-s-o-${e.quizStudent.quizId}`,"model-value":e.quizStudent.productId,searchable:!0,"callback-search":oe,"label-by":"name","track-by":"name","value-prop":"id",placeholder:e.quizStudent.quizId?"Product is not required (Optional)":"Please select quiz before select product","onUpdate:modelValue":a[6]||(a[6]=t=>ce(r(n({},e.quizStudent),{productId:t}))),onClear:a[7]||(a[7]=t=>ce(r(n({},e.quizStudent),{productId:void 0})))},null,8,["model-value","placeholder"]),te,V(k("p",ae," Please select quiz ",512),[[M,e.validate.productId]])])),_:1},8,["has-error"])])),_:1}),I(ye,{modelValue:d.value,"onUpdate:modelValue":[a[8]||(a[8]=e=>d.value=e),me],"is-range":"",color:"orange","trim-weeks":"","model-config":{start:{type:"string",mask:"YYYY-MM-DD",timeAdjust:"00:00:00"},end:{type:"string",mask:"YYYY-MM-DD",timeAdjust:"00:00:00"}},masks:{input:"DD/MM/YYYY"},popover:{visibility:"click"}},{default:D((({inputValue:e,inputEvents:t})=>[le,I(b,{addons:""},{default:D((()=>[I(re,{class:"date-picker-box"},{default:D((()=>[k("input",E({value:e.start,class:"input"},Q(t.start)),null,16,ue)])),_:2},1024),I(re,null,{default:D((()=>[I(ve,{icon:"feather:arrow-right",class:"is-static"})])),_:1}),I(re,{class:"date-picker-box"},{default:D((()=>[k("input",E({value:e.end,class:"input"},Q(t.end)),null,16,se)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue"])])}}});export{de as _};
