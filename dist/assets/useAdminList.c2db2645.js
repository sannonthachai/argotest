var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(a,e)=>{for(var t in e||(e={}))r.call(e,t)&&l(a,t,e[t]);if(s)for(var t of s(e))n.call(e,t)&&l(a,t,e[t]);return a},i=(a,s)=>e(a,t(s));import{q as c,r as m,A as u,k as y,ae as d}from"./vendor.1c8b4573.js";import{i as f}from"./avatar.helper.68db04c2.js";import{g as b,m as g,e as p}from"./index.d7dc1ff6.js";import{u as v}from"./useAdminApi.d2988da1.js";import{u as k}from"./usePaginationRoute.780ca235.js";import{u as j}from"./useNotyf.ddf08f06.js";import{a as A}from"./csv.helper.d14e8c45.js";function P(){const a=c({data:[],total:0,status:"activate",isActive:!0,isLoading:!0}),e=m([{key:"user",label:"User",isRaw:!0},{key:"name",label:"Name"},{key:"teamName",label:"Team"},{key:"roleName",label:"Role"},{key:"manageCountry",label:"Manage"},{key:"status",label:"Status"}]),t=m([{key:"firstname",label:"Firstname"},{key:"lastname",label:"Lastname"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"teamName",label:"Team"},{key:"roleName",label:"Role"},{key:"manageCountry",label:"Manage"},{key:"status",label:"Status"}]),s=u(),r=j();b();const{currentPage:n,perPage:l,search:P}=k(),h=y((()=>A(t.value,a.data))),{getAllAdmins:w,deactivateAccount:O,changeCountry:N,resendActivateEmail:S}=v(),$=async e=>{a.isLoading=!0;const t=s.query.status;t&&(a.status=t,a.isActive="activate"===t);const r=await w({currentPage:n,perPage:l,status:a.status,search:P,teamId:e});a.isLoading=!1,r&&(a.data=r.data.map((a=>{const{firstname:e,lastname:t}=a,{initials:s,color:r}=f(e,t);return i(o({},a),{firstname:e,lastname:t,initials:s,color:r})})),a.total=r.total)};return i(o({},d(a)),{headers:e,csvData:h,activateAccount:async a=>{const e=await S(a.id);g(e)?r.success(`Send verify email to ${a.fullname} (${a.name}) Success!`):r.error(p(e.message)||"Fail, Please try again"),$()},deactivateAccount:async a=>{const e=await O(a.id);g(e)?r.success(`Deactivate ${a.fullname} (${a.name}) Success!`):r.error(p(e.message)||"Fail, Please try again"),$()},changeCountryById:async a=>{const e=await N(a.id,a.country);g(e)?r.success(`Change country of ${a.fullname} (${a.name}) Success!`):r.error(p(e.message)||"Fail, Please try again"),$()},fetchAllAdmins:$})}export{P as u};
