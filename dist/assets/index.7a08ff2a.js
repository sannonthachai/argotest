var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,n,t)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,l=(e,a)=>{for(var n in a||(a={}))i.call(a,n)&&r(e,n,a[n]);if(t)for(var n of t(a))s.call(a,n)&&r(e,n,a[n]);return e},o=(e,t)=>a(e,n(t));import{u,_ as d}from"./useLearningGainanagement.06952759.js";import{_ as p}from"./QuizSlugSelect.vue_vue&type=script&setup=true&lang.2ce454e8.js";import{u as c,p as g,c as m,j as f}from"./index.d7dc1ff6.js";import{_ as L}from"./Datatable.aae3ef08.js";import{q as v,A as b,b as y,ae as k,k as _,d as G,X as j,Y as I,E as N,o as A,e as C,x as O,g as h,F as R,h as S,t as w,i as E,O as V,y as x,G as P,p as D,a as T}from"./vendor.1c8b4573.js";import{u as U}from"./useLearningGainApi.269e70f1.js";import{u as M}from"./usePaginationRoute.780ca235.js";import{t as q}from"./date.helper.6ae3fc87.js";import"./VMessage.vue_vue&type=script&setup=true&lang.1bdbe413.js";import"./VModal.31b4f4ba.js";import"./VIconBox.vue_vue&type=script&setup=true&lang.7bffdb35.js";import"./VIMaskInput.vue_vue&type=script&lang.eddb2771.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./quiz.enum.fc8b95fc.js";import"./useNotyf.ddf08f06.js";import"./useOptionApi.f4dc99b9.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";D("data-v-5af25234");const F={class:"page-content-inner"},Y={class:"is-flex is-align-items-flex-end"},z={class:"mr-5"},H=P(" Slug "),W={key:0},B=P("filter"),Q={class:"button-box"},X={key:0,class:"button-box flex-wrap"},$=P("assessment"),J=P("learning gain"),K={key:1,class:"light-text button-box"};T();var Z=G({setup(e){const{learningGainTableHeaders:a,learningGainList:n,fecthAllLearningGain:t,total:i,isLoading:s,onFilterChange:r,filterSlug:G,selectSlug:D,reportLink:T,assesmentLink:Z,reportLoading:ee}=function(){const e=v({learningGainList:[],selectSlug:{country:void 0,productType:void 0,gLevel:void 0},filterSlug:void 0,reportLink:"",assesmentLink:"",total:0,isLoading:!0,reportLoading:!1,assesmentLoading:!1}),a=b(),n=y(),{currentPage:t,perPage:i,search:s}=M(),{getAllLearningGain:r,learningGainReportUrl:u,learningGainAssesmentUrl:d}=U();return o(l({},k(e)),{learningGainTableHeaders:[{key:"studentId",label:"Student ID"},{key:"studentName",label:"Student Name",isRaw:!0},{key:"name",label:"Assesment Name"},{key:"lastCreated",label:"Last Created"},{key:"gain",label:"Gain",isRaw:!0},{key:"report",label:"Report",isRaw:!0,isCenter:!0}],fecthAllLearningGain:async()=>{e.isLoading=!0,a.query.slug&&(e.filterSlug=a.query.slug);const n=await r({currentPage:t,perPage:i,search:s,slug:e.filterSlug});n&&(e.learningGainList=n.data,e.total=n.total,e.isLoading=!1)},onFilterChange:()=>{const t=o(l({},a.query),{slug:""!==e.filterSlug?e.filterSlug:void 0});n.push({name:a.name||"quizzes-learning-gain",params:a.params,query:t})},reportLink:async a=>{e.reportLoading=!0;const n=await u({studentId:a.studentId});n&&(e.reportLink=n.data.link,window.open(e.reportLink),e.reportLoading=!1)},assesmentLink:async a=>{e.assesmentLoading=!0;const n=await d({studentId:a.studentId,slug:a.slug});n&&(e.assesmentLink=n.data.link,window.open(e.assesmentLink),e.reportLoading=!1)}})}(),{isOpenModal:ae,openModalCreateLearningGain:ne,learningGainInfo:te,addLearningGain:ie,removeLearnigGain:se,validate:re}=u(),{capabilities:le}={capabilities:_((()=>({canViewList:c(["VIEW_LIST_OF_LEARNING_GAIN"]),canView:c(["VIEW_LEARNING_GAIN"]),canCreate:c(["CREATE_LEARNING_GAIN"]),canDelete:c(["DELETE_LEARNING_GAIN"]),canOpenReportUrl:c(["LEARNING_GAIN_REPORT_URL"]),canOpenAssesmentUrl:c(["LEARNING_GAIN_ASSESSMENT_URL"])})))};return g.value="Learning Gain",j({title:"Whitehouse: Learning Gain"}),I((async()=>{t()})),(e,t)=>{var l;const o=d,u=p,c=m,g=N("RouterLink"),v=f,b=m,y=L;return A(),C("div",F,[O(o,{key:null==(l=h(te))?void 0:l.studentId,"open-modal":h(ae),info:h(te),validate:h(re),onToggleClose:t[0]||(t[0]=e=>ae.value=!1),onOnCreate:h(ie),onOnDelete:h(se)},null,8,["open-modal","info","validate","onOnCreate","onOnDelete"]),O(y,{headers:h(a),data:h(n),total:h(i),"is-loading":h(s)},{"custom-left":R((()=>[S("div",Y,[S("div",z,[S("label",null,[H,h(G)?(A(),C("span",W,"("+w(h(G))+")",1)):E("",!0)]),O(u,{modelValue:h(G),"onUpdate:modelValue":t[1]||(t[1]=e=>V(G)?G.value=e:null),onClear:h(r)},null,8,["modelValue","onClear"])]),S("div",null,[O(c,{color:"primary",outlined:"",onClick:h(r)},{default:R((()=>[B])),_:1},8,["onClick"])])])])),studentName:R((({value:e})=>[e.studentName?(A(),x(g,{key:0,to:`/students/${e.studentId}/learning-gain`,target:"_blank",class:"link"},{default:R((()=>[P(w(e.studentName),1)])),_:2},1032,["to"])):E("",!0)])),lastCreated:R((({value:e})=>[P(w(h(q)(e,"DD/MM/YYYY HH:mm")),1)])),gain:R((({value:e})=>[S("div",Q,[h(le).canView?(A(),x(v,{key:0,color:"warning",outlined:"",icon:"lnir lnir-graph-increase",onClick:a=>h(ne)(e)},null,8,["onClick"])):E("",!0)])])),report:R((({value:e})=>[e.publishedGain?(A(),C("div",X,[h(le).canOpenAssesmentUrl?(A(),x(b,{key:0,color:"primary",class:"mr-2",raised:"",outlined:"",onClick:a=>h(Z)(e)},{default:R((()=>[$])),_:2},1032,["onClick"])):E("",!0),h(le).canOpenReportUrl?(A(),x(b,{key:1,color:"primary","is-loading":h(ee),raised:"",outlined:"",onClick:a=>h(T)(e)},{default:R((()=>[J])),_:2},1032,["is-loading","onClick"])):E("",!0)])):(A(),C("div",K,"-"))])),_:1},8,["headers","data","total","is-loading"])])}}});Z.__scopeId="data-v-5af25234";export default Z;
