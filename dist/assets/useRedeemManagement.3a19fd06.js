var e,t,r,a,o=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,n=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&n(e,r,t[r]);if(c)for(var r of c(t))m.call(t,r)&&n(e,r,t[r]);return e},f=(e,t)=>s(e,d(t));import{q as u,b as D,Y as g,D as l,ae as R}from"./vendor.1c8b4573.js";import{u as y}from"./useRedeemApi.76e2bf5d.js";import{u as w}from"./useNotyf.ddf08f06.js";import{t as b}from"./date.helper.6ae3fc87.js";import{e as O}from"./index.d7dc1ff6.js";function I(){const e=u({redeemDetail:[],createNewRedeem:{redeemType:r.DEFAULT,partnerId:1,packageId:0},isLoading:!1}),t=D(),a=w(),o=y();return g((async()=>{b(),e.createNewRedeem.ticketStartDate=l().toISOString()})),f(p({},R(e)),{fetchRedeemById:async t=>{e.isLoading=!0;const r=await o.getRedeemById(t);e.isLoading=!1,r.length&&(e.redeemDetail=r)},redeemTypeChange:t=>{t===r.GROUP?e.createNewRedeem.amount=e.createNewRedeem.amount||2:e.createNewRedeem.amount=void 0},createRedeem:async()=>{if(!e.createNewRedeem.packageId)return void a.error("Please Select Package");e.isLoading=!0;const r=l(b(e.createNewRedeem.ticketStartDate,"YYYY-MM-DD")).toISOString(),s=l(b(e.createNewRedeem.expireDate,"YYYY-MM-DD")).toISOString(),{status:d,message:c}=await o.createRedeem(f(p({},e.createNewRedeem),{ticketStartDate:r||void 0,expireDate:s}));e.isLoading=!1,201===d?(a.success("Create Redeem Success!"),t.push({name:"codes-redeems"})):a.error(O(c)||"Fail")}})}(t=e||(e={}))[t.DEACTIVATED=0]="DEACTIVATED",t[t.ACTIVATED=1]="ACTIVATED",(a=r||(r={})).DEFAULT="default",a.GROUP="group";export{I as u};
