var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,u=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{_ as r,a as o}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as n}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{p as d,a as c,c as p,h as m}from"./index.d7dc1ff6.js";import{_ as f}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as v}from"./Datatable.aae3ef08.js";import{Q as b,a as y,c as z}from"./quiz.enum.fc8b95fc.js";import{q as g,r as q,A as h,b as j,k,Y as _,ae as V,d as T,X as I,E as P,o as w,y as S,au as O,g as Q,F as C,h as A,x,i as E,t as H,G as L,e as U,I as D,H as F,p as R,a as Y}from"./vendor.1c8b4573.js";import{u as N}from"./useQuizApi.3259bcc4.js";import{u as $}from"./usePaginationRoute.780ca235.js";import{q as M,d as G}from"./quiz.helper.1fae50f8.js";import{t as B}from"./date.helper.6ae3fc87.js";import{u as W}from"./useOptionApi.f4dc99b9.js";import{u as X}from"./useGuardQuiz.5f9ebd22.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./lodash.0a1ccad5.js";import"./index.ec15dc7d.js";function J(){const e=g({isLoading:!1,quizzes:[],total:0,filter:{productType:void 0,status:void 0,quizId:void 0}}),r=q({type:Object.values(b),status:Object.values(y)}),o=h(),n=j(),{currentPage:d,perPage:c,search:p}=$(),{getAllQuizSubmits:m}=N(),f=k((()=>o.query.status)),v=k((()=>o.query.productType)),z=k((()=>o.query.quizId)),T=()=>{const{productType:a,status:t,quizId:s}=e.filter;n.push({query:{currentPage:"1",perPage:c,productType:a,status:t,search:p,quizId:s}})};return _((async()=>{e.filter={productType:v.value,status:f.value,quizId:isNaN(parseInt(z.value))?void 0:parseInt(z.value)},(async()=>{e.isLoading=!0;const{productType:a,status:t,quizId:s}=e.filter,l={currentPage:d,perPage:c,search:p,productType:a,status:t,quizId:s},i=await m(l);e.quizzes=(null==i?void 0:i.data)||[],e.total=(null==i?void 0:i.total)||0,e.isLoading=!1})()})),I=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&u(e,t,a[t]);if(s)for(var t of s(a))i.call(a,t)&&u(e,t,a[t]);return e})({},V(e)),a(I,t({options:r,onChangeFilter:T,quizTableHeaders:[{key:"id",label:"ID"},{key:"quiz",label:"Quiz"},{key:"createdAt",label:"Created At"},{key:"student",label:"Student"},{key:"partner",label:"Partner",isRaw:!0},{key:"version",label:"Version",isCenter:!0,isRaw:!0},{key:"productType",label:"Product Type",isRaw:!0,isCenter:!0},{key:"status",label:"Status",isCenter:!0},{key:"score",label:"Score",isCenter:!0}],clearQuizId:()=>{e.filter.quizId=void 0,T()}}));var I}R("data-v-707368fa");const K={class:"columns is-multiline filter-box"},Z={class:"column is-4-widescreen is-12"},ee=A("label",null,"Product Type",-1),ae={class:"column is-4-widescreen is-12"},te=A("label",null,"Status",-1),se={class:"column is-7-widescreen is-12"},le=A("label",null,"Quiz",-1),ie={class:"is-flex is-align-items-center"},ue={key:0},re={key:1},oe={class:"dark-inverted is-flex is-justify-content-flex-end"},ne=L(" Action "),de=A("div",{class:"icon"},[A("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),ce=A("div",{class:"meta"},[A("span",null,"View"),A("span",null,"View quiz submit")],-1),pe=A("div",{class:"icon"},[A("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),me=A("div",{class:"meta"},[A("span",null,"Edit"),A("span",null,"Edit quiz submit")],-1);Y();var fe=T({setup(e){d.value="Quiz Submits",I({title:"Whitehouse: Quizzes"});const{filter:a,isLoading:t,options:s,onChangeFilter:l,quizzes:i,total:u,quizTableHeaders:b,clearQuizId:g}=J();j(),h();const{getAllQuizzes:k}=W(),_=q(Object.entries(z).map((([e,a])=>({label:e,value:a})))),V=q(Object.entries(y).map((([e,a])=>({label:e,value:a})))),{quizSubmit:T,quizSubmitHaveActionButton:R,canEditQuizSubmit:Y}=X();return(e,s)=>{const d=P("Multiselect"),y=r,z=o,q=n,h=P("RouterLink"),j=c,I=f,N=p,$=m,W=v;return w(),S(W,{headers:Q(b),data:Q(i),"is-loading":Q(t),total:Q(u),"search-placeholder":"id, quiz name and student id","is-action":Q(R)},O({custom:C((()=>[A("div",K,[A("div",Z,[x(z,null,{default:C((()=>[ee,x(y,null,{default:C((()=>[x(d,{modelValue:Q(a).productType,"onUpdate:modelValue":[s[0]||(s[0]=e=>Q(a).productType=e),Q(l)],placeholder:"Select Product Type",options:_.value},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1})])),_:1})]),A("div",ae,[x(z,null,{default:C((()=>[te,x(y,null,{default:C((()=>[x(d,{modelValue:Q(a).status,"onUpdate:modelValue":[s[1]||(s[1]=e=>Q(a).status=e),Q(l)],placeholder:"Select Status",options:V.value},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1})])),_:1})]),A("div",se,[x(z,null,{default:C((()=>[le,x(y,null,{default:C((()=>[x(q,{modelValue:Q(a).quizId,"onUpdate:modelValue":[s[2]||(s[2]=e=>Q(a).quizId=e),Q(l)],placeholder:"Select Quiz","callback-search":Q(k),onClear:Q(g)},null,8,["modelValue","callback-search","onUpdate:modelValue","onClear"])])),_:1})])),_:1})])])])),quiz:C((({value:e})=>[x(h,{to:{name:"quizzes-:id",params:{id:`${e.id}`}},target:"_blank",class:"link-profile"},{default:C((()=>[A("p",null,"(id: "+H(e.id)+") "+H(e.name),1)])),_:2},1032,["to"])])),createdAt:C((({value:e})=>[L(H(e?Q(B)(e,"DD/MM/YYYY HH:mm:ss"):"-"),1)])),student:C((({value:e})=>[A("div",ie,[x(j,{picture:e.avatar,size:"small",class:"mr-2"},null,8,["picture"]),x(h,{to:{name:"students-:id",params:{id:`${e.id}`}},target:"_blank",class:"link-profile"},{default:C((()=>[A("p",null,"(id: "+H(e.id)+") "+H(e.fullnameEn||e.fullnameTh),1)])),_:2},1032,["to"])])])),partner:C((({value:e})=>{return[e.student.partners.length?(w(!0),U(F,{key:0},D((a=e.student.partners,a.map((e=>e.partner))),((a,t)=>(w(),U("span",{key:t},[x(h,{to:{name:"partners",query:{search:a.partnerName}},class:"link"},{default:C((()=>[L(H(a.partnerName),1)])),_:2},1032,["to"]),e.student.partners[t+1]?(w(),U("span",ue,", ")):E("",!0)])))),128)):(w(),U("p",re,"-"))];var a})),version:C((({value:e})=>[L(H(e.quiz.formatVersion),1)])),productType:C((({value:e})=>[L(H(e.quiz.productType),1)])),status:C((({value:e})=>[x(I,{color:Q(M)(e),label:Q(G)(e),outlined:""},null,8,["color","label"])])),_:2},[Q(R)?{name:"action",fn:C((({value:e})=>[A("div",oe,[x($,{spaced:"",right:""},{button:C((({toggle:e})=>[x(N,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:C((()=>[ne])),_:2},1032,["onClick"])])),content:C((()=>[Q(T).canView?(w(),S(h,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"quizzes-submits-:id",params:{id:`${e.id}`}},target:"_blank"},{default:C((()=>[de,ce])),_:2},1032,["to"])):E("",!0),Q(Y)?(w(),S(h,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"quizzes-submits-:id",params:{id:`${e.id}`},hash:"#edit"},target:"_blank"},{default:C((()=>[pe,me])),_:2},1032,["to"])):E("",!0)])),_:2},1024)])]))}:void 0]),1032,["headers","data","is-loading","total","is-action"])}}});fe.__scopeId="data-v-707368fa";export default fe;
