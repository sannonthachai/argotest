var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,n=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&u(e,l,o[l]);if(a)for(var l of a(o))c.call(o,l)&&u(e,l,o[l]);return e},i=(e,a)=>o(e,l(a));import{_ as d}from"./ValidateMessageBox.vue_vue&type=script&setup=true&lang.ac2d19e3.js";import{_ as r,a as s}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as m}from"./TextEditor.7b24ebe1.js";import{_ as v}from"./ButtonFileManager.vue_vue&type=script&setup=true&lang.8d57be3d.js";import{c as p,j as f,i as y,e as b}from"./index.d7dc1ff6.js";import{_ as g}from"./FormTemplate.a6fb27bf.js";import{_ as M}from"./VBlock.vue_vue&type=script&setup=true&lang.2e664adb.js";import{_ as I}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{p as S,a as _,d as h,r as V,E as L,o as k,e as x,x as w,F as C,K as D,ai as U,h as j,g as E,V as O,y as B,i as A,n as z,G as N,A as T,b as q,k as F,ae as H,q as P,t as Q,H as R,Y as $,au as Y}from"./vendor.1c8b4573.js";import{u as G,a as J,C as K,b as Z,c as W,d as X,e as ee}from"./e-learning.enum.36227bfa.js";import{_ as oe}from"./VModal.31b4f4ba.js";import{_ as le}from"./ConfirmRemoveModal.3ba4d6d1.js";import{u as ae}from"./useNotyf.ddf08f06.js";import{_ as te}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{u as ce}from"./useOptionApi.f4dc99b9.js";import{c as ue}from"./common.helper.74291d4c.js";S("data-v-34dd96ce");const ne={key:0},ie=j("label",null,"Name",-1),de=j("label",null,"Description",-1),re=N(" Edit Order "),se=N(" Add Mooc Lecture "),me=N(" Done "),ve={class:"form-body"};_();var pe=h({props:{moocSectionInfo:{type:Object,default:void 0},moocLectures:{type:Array,default:()=>[]},currentMoocLecture:{type:Object,default:void 0}},emits:["update-current-mooc-lecture","update-mooc-lectures","show-add-mooc-lecture-form","show-view-mooc-lecture-form","show-edit-mooc-lecture-form"],setup(e,{emit:o}){var l,a,t;const c=e,{capabilities:u}=G(),d=V(!1),m=V({idx:(null==(l=c.moocSectionInfo)?void 0:l.idx)||0,name:(null==(a=c.moocSectionInfo)?void 0:a.name)||"",description:(null==(t=c.moocSectionInfo)?void 0:t.description)||""}),v=V(c.moocLectures||[]),y=e=>v.value.findIndex((o=>o.id===e.id))+1,b=()=>{v.value=v.value.map(((e,o)=>i(n({},e),{idx:o+1}))),o("update-mooc-lectures",v.value),d.value=!1};return(l,a)=>{const t=r,c=s,n=g,i=p,S=M,_=f,h=I,V=L("VueDraggable");return e.moocSectionInfo?(k(),x("div",ne,[w(n,{title:"Mooc Section Detail","is-stuck-header":!1},{default:C((()=>[w(c,null,{default:C((()=>[ie,w(t,null,{default:C((()=>[D(j("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>m.value.name=e),type:"text",placeholder:"Name",class:"input",disabled:""},null,512),[[U,m.value.name]])])),_:1})])),_:1}),w(c,null,{default:C((()=>[de,w(t,null,{default:C((()=>[D(j("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>m.value.description=e),type:"text",placeholder:"Description",class:"input",disabled:""},null,512),[[U,m.value.description]])])),_:1})])),_:1})])),_:1}),w(n,{title:"Lectures","is-stuck-header":!1,class:"mt-3"},{buttons:C((()=>[E(u).canEdit?D((k(),B(i,{key:0,onClick:a[2]||(a[2]=e=>d.value=!0)},{default:C((()=>[re])),_:1},512)),[[O,!d.value]]):A("",!0),E(u).canCreate?D((k(),B(i,{key:1,color:"primary",onClick:a[3]||(a[3]=e=>o("show-add-mooc-lecture-form"))},{default:C((()=>[se])),_:1},512)),[[O,!d.value]]):A("",!0),E(u).canEdit?D((k(),B(i,{key:2,color:"primary",onClick:b},{default:C((()=>[me])),_:1},512)),[[O,d.value]]):A("",!0)])),default:C((()=>[j("div",ve,[w(V,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=e=>v.value=e),class:"list-group","item-key":"idx",disabled:!d.value},{item:C((({element:l})=>{var a;return[w(h,{class:z(["lecture-card p-0",[l.idx===(null==(a=e.currentMoocLecture)?void 0:a.idx)&&"active"]])},{default:C((()=>[w(S,{title:l.name,class:"mb-0 p-5",subtitle:`(index: ${y(l)})`,onClick:e=>d.value?"":o("show-view-mooc-lecture-form",l)},null,8,["title","subtitle","onClick"]),E(u).canEdit?D((k(),B(_,{key:0,icon:"feather:edit",class:"icon-button mx-3",onClick:e=>o("show-edit-mooc-lecture-form",l)},null,8,["onClick"])),[[O,!d.value]]):A("",!0)])),_:2},1032,["class"])]})),_:1},8,["modelValue","disabled"])])])),_:1})])):A("",!0)}}});pe.__scopeId="data-v-34dd96ce";const fe=P({validate:{},validateSection:{},validateLecture:{},moocInfo:void 0,moocSections:void 0,currentMoocSection:void 0,moocLectures:void 0,currentMoocLecture:void 0});function ye(){const e=T(),o=q(),l=ae(),{createMooc:a,getMoocById:t,getMoocSectionsByMoocId:c,getMoocLecturesBySectionId:u,updateMooc:d,createMoocSection:r,updateMoocSection:s,createMoocLecture:m,updateMoocLecture:v,deleteMoocLecture:p,deleteMoocSection:f}=J(),g=F((()=>"#edit"===e.hash)),M=async e=>{const o=await c(e);if(o){const e=o.sort(((e,o)=>e.idx-o.idx));fe.moocSections=e.map(((e,o)=>i(n({},e),{idx:o+1})))}},I=async e=>{if(!e)return;const o=await u(e.id);if(o){const e=o.sort(((e,o)=>e.idx-o.idx));fe.moocLectures=e.map(((e,o)=>i(n({},e),{idx:o+1})))}};return i(n({},H(fe)),{isEdit:g,submitCreateMooc:async e=>{const t=await a(e);if(y(t))return l.success("Success!"),fe.validate={},void o.push("/e-learning/moocs");"object"==typeof t.message?fe.validate=t.message:l.error(b(t.message))},submitUpdateMooc:async e=>{var a,t;if(!(null==(a=fe.moocInfo)?void 0:a.id))return;const c=await d(fe.moocInfo.id,e),u=y(c);if(u)return fe.moocInfo=u,fe.validate={},l.success("Success!"),void o.push(`/e-learning/moocs/${null==(t=fe.moocInfo)?void 0:t.id}`);"object"==typeof c.message?fe.validate=c.message:l.error(b(c.message))},fetchMoocById:async e=>{const o=await t(e);o&&(fe.moocInfo=o)},fetchMoocSectionsByMoocId:M,changeCurrentMoocSection:async e=>{fe.currentMoocSection=e,e?await I(e):fe.moocLectures=void 0},changeCurrentMoocLecture:e=>{fe.currentMoocLecture=e},submitCreateMoocSection:async e=>{var o;if(!(null==(o=fe.moocInfo)?void 0:o.id))return;const a=await r(fe.moocInfo.id,e);return y(a)?(l.success("Add section success!"),await M(fe.moocInfo.id),!0):("object"==typeof a.message?fe.validateSection=a.message:l.error(b(a.message)),!1)},submitUpdateMoocSection:async e=>{var o;if(!(null==(o=fe.moocInfo)?void 0:o.id)||!e.id)return;const a=await s(fe.moocInfo.id,e);return y(a)?(l.success("Update section success!"),await M(fe.moocInfo.id),fe.validateSection={},!0):("object"==typeof a.message?fe.validateSection=a.message:l.error(b(a.message)),!1)},submitUpdateMoocSections:async e=>{var o;if(!(null==(o=fe.moocInfo)?void 0:o.id))return;const a=fe.moocInfo.id,t=await Promise.all(e.map((async e=>{const{error:o,message:l}=await s(a,e);if(o)return b(l)})));t.some((e=>e))?l.error(t.join(", ")):(l.success("Update section success!"),await M(fe.moocInfo.id))},submitCreateMoocLecture:async e=>{var o,a,t;if(!(null==(o=fe.moocInfo)?void 0:o.id)||!(null==(a=fe.currentMoocSection)?void 0:a.id))return;const c=await m(null==(t=fe.moocInfo)?void 0:t.id,i(n({},e),{sectionId:fe.currentMoocSection.id}));return y(c)?(l.success("Success!"),fe.validateLecture={},await I(fe.currentMoocSection),!0):("object"==typeof c.message&&(fe.validateLecture=c.message),l.error(b(c.message)),!1)},fetchMoocLecturesBySectionId:I,submitUpdateMoocLectures:async e=>{var o,a,t;if(!(null==(o=fe.moocInfo)?void 0:o.id)||!(null==(a=fe.currentMoocSection)?void 0:a.id))return;const c=null==(t=fe.moocInfo)?void 0:t.id,u=await Promise.all(e.map((async e=>{const{error:o,message:l}=await v(c,e);if(o)return b(l)})));if(u.some((e=>e))){const e=[...new Set(u)];l.error(e.join(", "))}else l.success("Success!"),await I(fe.currentMoocSection)},submitUpdateMoocLecture:async e=>{var o,a,t;if(!(null==(o=fe.moocInfo)?void 0:o.id)||!(null==(a=fe.currentMoocSection)?void 0:a.id))return;const c=await v(null==(t=fe.moocInfo)?void 0:t.id,i(n({},e),{sectionId:fe.currentMoocSection.id}));return y(c)?(l.success("Success!"),fe.validateLecture={},await I(fe.currentMoocSection),!0):("object"==typeof c.message&&(fe.validateLecture=c.message),l.error(b(c.message)),!1)},submitDeleteMoocLecture:async e=>{if(!fe.moocInfo||!fe.currentMoocSection)return;const o=fe.moocInfo.id,a=fe.currentMoocSection.id;await p(o,a,e),l.success("Success!"),await I(fe.currentMoocSection)},submitDeleteMoocSection:async e=>{if(!fe.moocInfo)return;const o=fe.moocInfo.id;await f(o,e),l.success("Delete section success!"),await M(fe.moocInfo.id)}})}S("data-v-62620c50");const be=j("label",null,[N("Name "),j("span",{class:"red"},"*")],-1),ge={key:0,class:"help is-danger"},Me=j("label",null,"Description",-1),Ie=N(" Submit "),Se=N(" Delete ");_();var _e=h({props:{modelValue:{type:Boolean,default:!1},idx:{type:Number,default:0},moocSectionInfo:{type:Object,default:void 0},readonly:{type:Boolean,default:!1}},emits:["close","update-model-value","add","update","delete-mooc-section"],setup(e,{emit:o}){var l,a,t,c;const u=e,{validateSection:d}=ye(),{capabilities:m}=G(),v=V(!1),f=V({id:(null==(l=u.moocSectionInfo)?void 0:l.id)||void 0,idx:(null==(a=u.moocSectionInfo)?void 0:a.idx)||u.idx,name:(null==(t=u.moocSectionInfo)?void 0:t.name)||"",description:(null==(c=u.moocSectionInfo)?void 0:c.description)||""}),y=()=>{o("update-model-value",!u.modelValue),f.value={idx:u.idx,name:"",description:""}},b=()=>{o("delete-mooc-section",f.value),v.value=!1,y()},g=async()=>{var e;(null==(e=u.moocSectionInfo)?void 0:e.id)?o("update",i(n({},f.value),{id:u.moocSectionInfo.id})):o("add",f.value)};return(o,l)=>{const a=r,t=s,c=p,u=oe,n=le;return k(),x(R,null,[w(u,{title:"Mooc Section",open:e.modelValue,onClose:y},{content:C((()=>[w(t,null,{default:C((()=>{var e;return[be,w(a,{"has-error":null==(e=E(d))?void 0:e.name},{default:C((()=>{var e,o;return[D(j("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>f.value.name=e),type:"text",placeholder:"Name",class:"input"},null,512),[[U,f.value.name]]),(null==(e=E(d))?void 0:e.name)?(k(),x("p",ge,Q(null==(o=E(d))?void 0:o.name),1)):A("",!0)]})),_:1},8,["has-error"])]})),_:1}),w(t,null,{default:C((()=>[Me,w(a,null,{default:C((()=>[D(j("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>f.value.description=e),type:"text",placeholder:"Description",class:"input"},null,512),[[U,f.value.description]])])),_:1})])),_:1})])),action:C((()=>[E(m).canEdit?(k(),B(c,{key:0,color:"primary",disabled:!f.value.name,onClick:g},{default:C((()=>[Ie])),_:1},8,["disabled"])):A("",!0)])),cancel:C((()=>{var o;return[(null==(o=e.moocSectionInfo)?void 0:o.id)&&e.moocSectionInfo.id!==f.value.idx&&E(m).canEdit?(k(),B(c,{key:0,class:"mr-auto",color:"danger",onClick:l[2]||(l[2]=e=>v.value=!0)},{default:C((()=>[Se])),_:1})):A("",!0)]})),_:1},8,["open"]),w(n,{title:"Delete Mooc Section",open:v.value,onClose:l[3]||(l[3]=e=>v.value=!1),onConfirm:b},null,8,["open"])],64)}}});_e.__scopeId="data-v-62620c50",S("data-v-6c126cec");const he=j("label",null,[N("Name "),j("span",{class:"red"},"*")],-1),Ve=["disabled"],Le={key:0,class:"help is-danger"},ke=j("label",null,[N("Type "),j("span",{class:"red"},"*")],-1),xe={key:0,class:"help is-danger"},we=j("label",null," Quiz",-1),Ce={key:0,class:"help is-danger"},De=j("label",null,"Video Html",-1),Ue=["disabled"],je=["disabled"],Ee=j("label",null,"Duration",-1),Oe=["disabled"],Be=j("label",null,"Description",-1),Ae=N(" Cancel "),ze=N(" Submit "),Ne=N("Edit"),Te=N(" Delete ");_();var qe=h({props:{modelValue:{type:Boolean,default:!1},idx:{type:Number,default:0},moocLectureInfo:{type:Object,default:void 0},readonly:{type:Boolean,default:!0}},emits:["close","update-model-value","delete-mooc-lecture","edit-mooc-lecture"],setup(e,{emit:o}){var l,a,t,c,u,n,i,d,v,f;const y=e,{capabilities:b}=G(),{validateLecture:g,submitCreateMoocLecture:M,submitUpdateMoocLecture:I}=ye(),S=V({id:(null==(l=y.moocLectureInfo)?void 0:l.id)||void 0,sectionId:(null==(a=y.moocLectureInfo)?void 0:a.sectionId)||0,quizId:(null==(t=y.moocLectureInfo)?void 0:t.quizId)||0,name:(null==(c=y.moocLectureInfo)?void 0:c.name)||"",description:(null==(u=y.moocLectureInfo)?void 0:u.description)||"",videoHtml:(null==(n=y.moocLectureInfo)?void 0:n.videoHtml)||"",idx:(null==(i=y.moocLectureInfo)?void 0:i.idx)||y.idx,type:(null==(d=y.moocLectureInfo)?void 0:d.type)||"",value:(null==(v=y.moocLectureInfo)?void 0:v.value)||"",duration:(null==(f=y.moocLectureInfo)?void 0:f.duration)||""}),_=V(!1),h=()=>{o("delete-mooc-lecture",S.value),_.value=!1,q()},{getAllQuizzes:z}=ce(),N=V(ue(K)),T=F((()=>!S.value.name||!S.value.type)),q=()=>{g.value={},o("update-model-value",!y.modelValue),S.value={id:void 0,sectionId:0,quizId:0,name:"",description:"",videoHtml:"",idx:y.idx,type:"",value:"",duration:""}},H=async()=>{if(y.moocLectureInfo){await I(S.value)&&(g.value={},q())}else{await M(S.value)&&(g.value={},q())}},P=()=>{S.value.videoHtml="",S.value.quizId=0,S.value.value="",S.value.duration=""};return $((async()=>{g.value={}})),(l,a)=>{const t=r,c=s,u=L("Multiselect"),n=te,i=m,d=p,v=oe,f=le;return k(),x(R,null,[w(v,{title:"Mooc Lecture",open:e.modelValue,size:"large",onClose:q},Y({content:C((()=>[w(c,null,{default:C((()=>{var o,l,c;return[he,w(t,{"has-error":null==(o=E(g))?void 0:o.name},{default:C((()=>[D(j("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>S.value.name=e),type:"text",class:"input",placeholder:"Name",disabled:e.readonly},null,8,Ve),[[U,S.value.name]])])),_:1},8,["has-error"]),(null==(l=E(g))?void 0:l.name)?(k(),x("p",Le,Q(null==(c=E(g))?void 0:c.name),1)):A("",!0)]})),_:1}),w(c,null,{default:C((()=>{var o,l,c;return[ke,w(t,{"has-error":null==(o=E(g))?void 0:o.type},{default:C((()=>[w(u,{modelValue:S.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value.type=e),options:N.value,placeholder:"Type",disabled:e.readonly,onChange:P},null,8,["modelValue","options","disabled"])])),_:1},8,["has-error"]),(null==(l=E(g))?void 0:l.type)?(k(),x("p",xe,Q(null==(c=E(g))?void 0:c.type),1)):A("",!0)]})),_:1}),D(w(c,null,{default:C((()=>{var o,l,c;return[we,w(t,{"has-error":null==(o=E(g))?void 0:o.quizId},{default:C((()=>[w(n,{modelValue:S.value.quizId,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value.quizId=e),"callback-search":E(z),placeholder:"Select a Quiz",disabled:e.readonly},null,8,["modelValue","callback-search","disabled"])])),_:1},8,["has-error"]),(null==(l=E(g))?void 0:l.quizId)?(k(),x("p",Ce,Q(null==(c=E(g))?void 0:c.quizId),1)):A("",!0)]})),_:1},512),[[O,S.value.type===E(K).QUIZ]]),D(w(c,null,{default:C((()=>[De,D(j("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>S.value.videoHtml=e),type:"text",class:"input",placeholder:"Video Html",disabled:e.readonly},null,8,Ue),[[U,S.value.videoHtml]])])),_:1},512),[[O,S.value.type===E(K).YOUTUBE]]),D(w(c,null,{default:C((()=>[j("label",null,Q(S.value.type===E(K).VIMEO?"Value":"Curiculum Link"),1),w(t,null,{default:C((()=>[D(j("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>S.value.value=e),type:"text",class:"input",disabled:e.readonly},null,8,je),[[U,S.value.value]])])),_:1})])),_:1},512),[[O,S.value.type===E(K).VIMEO||S.value.type===E(K).CURICULUM]]),D(w(c,null,{default:C((()=>[Ee,w(t,null,{default:C((()=>[D(j("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>S.value.duration=e),type:"number",class:"input",placeholder:"Duration",disabled:e.readonly,min:"1"},null,8,Oe),[[U,S.value.duration]])])),_:1})])),_:1},512),[[O,S.value.type===E(K).VIMEO||S.value.type===E(K).YOUTUBE]]),w(c,null,{default:C((()=>[Be,w(t,null,{default:C((()=>[w(i,{modelValue:S.value.description,"onUpdate:modelValue":[a[6]||(a[6]=e=>S.value.description=e),a[7]||(a[7]=e=>S.value.description=e)],readonly:e.readonly},null,8,["modelValue","readonly"])])),_:1})])),_:1})])),cancel:C((()=>[E(b).canEdit?(k(),B(d,{key:0,class:"mr-auto",color:"danger",onClick:a[9]||(a[9]=e=>_.value=!0)},{default:C((()=>[Te])),_:1})):A("",!0)])),_:2},[E(b).canEdit?{name:"action",fn:C((()=>[e.readonly?A("",!0):(k(),B(d,{key:0,onClick:q},{default:C((()=>[Ae])),_:1})),e.readonly?A("",!0):(k(),B(d,{key:1,color:"primary",disabled:E(T),onClick:H},{default:C((()=>[ze])),_:1},8,["disabled"])),e.readonly?(k(),B(d,{key:2,color:"primary",onClick:a[8]||(a[8]=e=>o("edit-mooc-lecture"))},{default:C((()=>[Ne])),_:1})):A("",!0)]))}:void 0]),1032,["open"]),w(f,{title:"Delete Mooc Lecture",open:_.value,onConfirm:h,onClose:a[10]||(a[10]=e=>_.value=!1)},null,8,["open"])],64)}}});qe.__scopeId="data-v-6c126cec",S("data-v-4c2df6e4");const Fe={class:"form-layout-group"},He={class:"form-body"},Pe=j("label",{class:"label"},[N("Title "),j("span",{class:"red"},"*")],-1),Qe={class:"control"},Re=["readonly"],$e=j("label",{class:"label"},[N("Language "),j("span",{class:"red"},"*")],-1),Ye={class:"control"},Ge=j("label",{class:"label"},[N("Detail "),j("span",{class:"red"},"*")],-1),Je={class:"control"},Ke=["readonly"],Ze=j("label",{class:"label"},"Long Detail 1",-1),We={class:"control"},Xe=j("label",{class:"label"},"Long Detail 2",-1),eo={class:"control"},oo={class:"dropdown-group columns"},lo=j("label",{class:"label"},[N("Status "),j("span",{class:"red"},"*")],-1),ao={class:"control"},to=j("label",{class:"label"},"type",-1),co={class:"control"},uo=j("label",{class:"label"},[N("Author "),j("span",{class:"red"},"*")],-1),no={class:"control"},io=["readonly"],ro=j("label",{class:"label"},[N("Category "),j("span",{class:"red"},"*")],-1),so={class:"control"},mo=j("label",{class:"label"},[N("Featured Image "),j("span",{class:"red"},"*")],-1),vo={class:"image"},po=["src"],fo={key:0,class:"mt-4"},yo=N(" Cancel"),bo=N(" Create "),go=N(" Edit "),Mo=N(" Save"),Io={class:"form-body"},So=N(" Edit Order "),_o=N(" Add Mooc Section "),ho=N(" Done ");_();var Vo=h({props:{readonly:{type:Boolean,default:!1},moocDetail:{type:Object,default:void 0},moocSections:{type:Array,default:()=>[]},currentMoocSection:{type:Object,default:void 0},moocLectures:{type:Array,default:()=>[]},currentMoocLecture:{type:Object,default:void 0}},emits:["create","update","view","update-current-mooc-section","update-mooc-sections","update-current-mooc-lecture","update-mooc-lectures","delete-mooc-lecture","delete-mooc-section"],setup(e,{emit:o}){var l,a,t,c,u,r,y,b,S,_;const h=e,N=ae(),{capabilities:T}=G(),q=V(Object.values(Z)),H=V(Object.values(W)),P=V(Object.values(X)),Q=V(Object.values(ee)),{submitCreateMoocSection:R,submitUpdateMoocSection:$,validateSection:Y,validate:J,validateLecture:K,submitCreateMoocLecture:oe,submitUpdateMoocLecture:le}=ye(),te=F((()=>h.moocDetail&&h.readonly?"View Mooc":h.moocDetail&&!h.readonly?"Edit Mooc":"Add Mooc")),ce=V({title:(null==(l=h.moocDetail)?void 0:l.title)||"",language:(null==(a=h.moocDetail)?void 0:a.language)||ee.ENGLISH,detail:(null==(t=h.moocDetail)?void 0:t.detail)||"",longDetail01:(null==(c=h.moocDetail)?void 0:c.longDetail01)||"",longDetail02:(null==(u=h.moocDetail)?void 0:u.longDetail02)||"",status:(null==(r=h.moocDetail)?void 0:r.status)||Z.DRAFT,author:(null==(y=h.moocDetail)?void 0:y.author)||"",category:(null==(b=h.moocDetail)?void 0:b.category)||[],featuredImage:(null==(S=h.moocDetail)?void 0:S.featuredImage)||"",type:(null==(_=h.moocDetail)?void 0:_.type)||X.FREE}),ue=V(h.moocSections||[]),ne=F((()=>{var e;return(null==(e=ue.value[ue.value.length-1])?void 0:e.idx)||ue.value.length}));F((()=>ue.value.some((e=>!e.id))));const ie=F((()=>!(ce.value.title&&ce.value.language&&ce.value.detail&&ce.value.status&&ce.value.author&&0!==ce.value.category.length&&ce.value.featuredImage))),de=V(!1),re=V(!1),se=V(!1),me=V(!1),ve=V(!1),fe=async()=>{ue.value=ue.value.map(((e,o)=>i(n({},e),{idx:o+1})))},be=e=>{o("update-mooc-lectures",e)},ge=e=>{o("update-current-mooc-section",e)},Me=e=>{o("update-current-mooc-lecture",e)},Ie=()=>{Y.value={},de.value=!1,re.value=!1,se.value=!1,ge()},Se=()=>{me.value=!1,Me()},he=()=>{Me(),ve.value=!0,me.value=!0},Ve=e=>{Me(e),ve.value=!1,me.value=!0},Le=e=>{Me(e),ve.value=!0,me.value=!0},ke=()=>{o("update-mooc-sections",ue.value),re.value=!1},xe=async e=>{await $(e)&&(ue.value=ue.value.map((o=>o.id===e.id?e:o)),Ie())},we=()=>{const e=document.getElementById("mooc-section-detail"),o=(null==e?void 0:e.offsetTop)||0;window.scrollTo(0,o)},Ce=async e=>{ue.value.push(e);await R(ue.value[ue.value.length-1])&&Ie()},De=()=>{ge(),se.value=!0},Ue=e=>{o("delete-mooc-lecture",e.id)},je=e=>{o("delete-mooc-section",e.id)},Ee=e=>{"image/jpeg"===e.type||"image/png"===e.type?(ce.value.featuredImage=e.src,window.scrollTo(0,0)):N.error("Please select image/jpeg or image/png")};return(l,a)=>{var t,c,u;const n=d,i=s,r=L("Multiselect"),y=m,b=v,S=p,_=p,V=g,N=M,F=f,R=I,$=L("VueDraggable"),Y=pe,G=_e,K=qe;return k(),x("div",null,[j("div",Fe,[j("div",null,[D(w(V,{title:E(te),class:"mb-4"},{buttons:C((()=>[w(S,{to:"/e-learning/moocs",class:"mr-2",icon:"feather:arrow-left"},{default:C((()=>[yo])),_:1}),E(T).canCreate?D((k(),B(S,{key:0,color:"primary",disabled:E(ie),onClick:a[11]||(a[11]=e=>o("create",ce.value))},{default:C((()=>[bo])),_:1},8,["disabled"])),[[O,!e.moocDetail]]):A("",!0),E(T).canEdit?D((k(),B(_,{key:1,to:"#edit",color:"primary"},{default:C((()=>[go])),_:1},512)),[[O,e.moocDetail&&e.readonly]]):A("",!0),E(T).canEdit?D((k(),B(_,{key:2,color:"primary",disabled:E(ie),onClick:a[12]||(a[12]=e=>o("update",ce.value))},{default:C((()=>[Mo])),_:1},8,["disabled"])),[[O,e.moocDetail&&!e.readonly]]):A("",!0)])),default:C((()=>[w(n,{validate:E(J)},null,8,["validate"]),j("div",He,[w(i,null,{default:C((()=>[Pe,j("div",Qe,[D(j("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>ce.value.title=e),class:"input",type:"text",placeholder:"Title",readonly:e.readonly},null,8,Re),[[U,ce.value.title]])])])),_:1}),w(i,null,{default:C((()=>[$e,j("div",Ye,[w(r,{modelValue:ce.value.language,"onUpdate:modelValue":a[1]||(a[1]=e=>ce.value.language=e),options:Q.value,placeholder:"Select language",disabled:e.readonly,"no-options-text":"Select language..."},null,8,["modelValue","options","disabled","no-options-text"])])])),_:1}),w(i,null,{default:C((()=>[Ge,j("div",Je,[D(j("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>ce.value.detail=e),type:"textarea",class:"textarea is-primary-focus",rows:"3",placeholder:"Detail",readonly:e.readonly},"\n                ",8,Ke),[[U,ce.value.detail]])])])),_:1}),w(i,null,{default:C((()=>[Ze,j("div",We,[w(y,{modelValue:ce.value.longDetail01,"onUpdate:modelValue":[a[3]||(a[3]=e=>ce.value.longDetail01=e),a[4]||(a[4]=e=>ce.value.longDetail01=e)],readonly:e.readonly},null,8,["modelValue","readonly"])])])),_:1}),w(i,null,{default:C((()=>[Xe,j("div",eo,[w(y,{modelValue:ce.value.longDetail02,"onUpdate:modelValue":[a[5]||(a[5]=e=>ce.value.longDetail02=e),a[6]||(a[6]=e=>ce.value.longDetail02=e)],readonly:e.readonly},null,8,["modelValue","readonly"])])])),_:1}),j("div",oo,[w(i,{class:"column"},{default:C((()=>[lo,j("div",ao,[w(r,{modelValue:ce.value.status,"onUpdate:modelValue":a[7]||(a[7]=e=>ce.value.status=e),disabled:e.readonly,options:q.value},null,8,["modelValue","disabled","options"])])])),_:1}),w(i,{class:"column"},{default:C((()=>[to,j("div",co,[w(r,{modelValue:ce.value.type,"onUpdate:modelValue":a[8]||(a[8]=e=>ce.value.type=e),disabled:e.readonly,options:P.value},null,8,["modelValue","disabled","options"])])])),_:1})]),w(i,null,{default:C((()=>[uo,j("div",no,[D(j("input",{"onUpdate:modelValue":a[9]||(a[9]=e=>ce.value.author=e),class:"input",type:"text",placeholder:"Author",readonly:e.readonly},null,8,io),[[U,ce.value.author]])])])),_:1}),w(i,null,{default:C((()=>[ro,j("div",so,[w(r,{modelValue:ce.value.category,"onUpdate:modelValue":a[10]||(a[10]=e=>ce.value.category=e),options:H.value,mode:"tags","create-tag":!0,placeholder:"Add Category",disabled:e.readonly},null,8,["modelValue","options","disabled"])])])),_:1}),w(i,null,{default:C((()=>[mo,j("figure",vo,[D(j("img",{src:ce.value.featuredImage},null,8,po),[[O,ce.value.featuredImage]])]),e.readonly?A("",!0):(k(),x("div",fo,[w(b,{onSubmit:Ee})]))])),_:1})])])),_:1},8,["title"]),[[O,!e.currentMoocSection&&!de.value]]),e.readonly?(k(),B(V,{key:0,title:"Mooc Sections","is-stuck-header":!1,class:"mooc-section-list"},{buttons:C((()=>[E(T).canEdit?D((k(),B(_,{key:0,onClick:a[14]||(a[14]=e=>re.value=!0)},{default:C((()=>[So])),_:1},512)),[[O,!re.value]]):A("",!0),E(T).canCreate?D((k(),B(_,{key:1,color:"primary",onClick:De},{default:C((()=>[_o])),_:1},512)),[[O,!re.value]]):A("",!0),E(T).canEdit?D((k(),B(_,{key:2,color:"primary",onClick:ke},{default:C((()=>[ho])),_:1},512)),[[O,re.value]]):A("",!0)])),default:C((()=>[j("div",Io,[w($,{key:"mooc-form"+JSON.stringify(ue.value),modelValue:ue.value,"onUpdate:modelValue":a[13]||(a[13]=e=>ue.value=e),class:"list-group","item-key":"idx","ghost-class":"ghost",disabled:!re.value,onChange:fe},{item:C((({element:o})=>{var l;return[w(R,{class:z(["section-card p-0",[o.idx===(null==(l=e.currentMoocSection)?void 0:l.idx)&&"active"]])},{default:C((()=>[w(N,{title:o.name,class:"mb-0 p-5",subtitle:`(index: ${o.idx}) ${o.description}`,onClick:e=>(e=>{var o;(null==(o=h.currentMoocSection)?void 0:o.id)===e.id?ge():(we(),ge(e))})(o)},null,8,["title","subtitle","onClick"]),!re.value&&E(T).canEdit?(k(),B(F,{key:0,icon:"feather:edit",class:"icon-button mx-3",onClick:e=>(ge(o),de.value=!0,void(se.value=!0))},null,8,["onClick"])):A("",!0)])),_:2},1032,["class"])]})),_:1},8,["modelValue","disabled"])])])),_:1})):A("",!0)]),j("div",null,[e.currentMoocSection&&!de.value?(k(),B(Y,{id:"mooc-section-detail",key:(null==(t=e.currentMoocSection)?void 0:t.id)+" "+JSON.stringify(e.moocLectures),class:"mooc-section-detail","mooc-section-info":e.currentMoocSection,"mooc-lectures":e.moocLectures,onUpdateCurrentMoocLecture:Me,onUpdateMoocLectures:be,onShowAddMoocLectureForm:he,onShowViewMoocLectureForm:Ve,onShowEditMoocLectureForm:Le},null,8,["mooc-section-info","mooc-lectures"])):A("",!0)])]),se.value?(k(),B(G,{key:null==(c=e.currentMoocSection)?void 0:c.id,modelValue:se.value,"onUpdate:modelValue":a[15]||(a[15]=e=>se.value=e),idx:E(ne)+1,"mooc-section-info":e.currentMoocSection,readonly:!de.value,onUpdateModelValue:Ie,onAdd:Ce,onUpdate:xe,onDeleteMoocSection:je},null,8,["modelValue","idx","mooc-section-info","readonly"])):A("",!0),w(K,{key:null==(u=e.currentMoocLecture)?void 0:u.id,"model-value":me.value,idx:E(ne)+1,readonly:!ve.value,"mooc-lecture-info":e.currentMoocLecture,onUpdateModelValue:Se,onDeleteMoocLecture:Ue,onEditMoocLecture:a[16]||(a[16]=e=>ve.value=!0)},null,8,["model-value","idx","readonly","mooc-lecture-info"])])}}});Vo.__scopeId="data-v-4c2df6e4";export{Vo as _,ye as u};
