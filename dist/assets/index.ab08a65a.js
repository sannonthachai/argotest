var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,l=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&n(e,t,a[t]);if(r)for(var t of r(a))s.call(a,t)&&n(e,t,a[t]);return e};import{u as o,p as c,c as d,h as u}from"./index.d7dc1ff6.js";import{_ as p}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as m}from"./Datatable.aae3ef08.js";import{k as f,q as h,r as y,Y as b,ae as v,d as g,b as C,A as j,X as _,o as L,e as k,x as A,au as I,g as D,F as E,h as O,G as P,t as w,i as R,p as V,a as T}from"./vendor.1c8b4573.js";import{u as x,a as B}from"./useLeadApi.8b06d447.js";import{u as F}from"./usePaginationRoute.780ca235.js";import{t as q}from"./date.helper.6ae3fc87.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";function H(){const e=h({data:[],readonly:!1,total:0,isLoading:!0}),r=y([{key:"id",label:"ID",isCenter:!0},{key:"name",label:"Name"},{key:"phone",label:"Phone"},{key:"career",label:"Career"},{key:"json",label:"Line ID"},{key:"insight",label:"Insight"},{key:"channelId",label:"Channel",isCenter:!0},{key:"createdAt",label:"Created At"},{key:"createdBy",label:"Created By"}]),{currentPage:i,perPage:s,search:n}=F(),{getLeads:o}=x(),c=async()=>{e.isLoading=!0;const a=await o({currentPage:i,perPage:s,search:n});a&&(e.data=a.data,e.total=a.total),e.isLoading=!1};return b((()=>{c()})),d=l({},v(e)),a(d,t({headers:r,fetchLeads:c}));var d}V("data-v-1bd0a912");const N={class:"is-flex is-justify-content-flex-end pt-4"},Y=P(" Create "),G={key:0,class:"dark-inverted is-flex is-justify-content-flex-end"},S=P(" Actions "),M=["onClick"],W=[O("div",{class:"icon"},[O("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),O("div",{class:"meta"},[O("span",null,"View"),O("span",null,"View Lead Direct")],-1)];T();var J=g({setup(e){const{data:a,headers:t,total:r,isLoading:i}=H(),{capabilities:s,haveActionButton:n}=function(){const e=f((()=>({canView:o(["VIEW_LEAD_DIRECT"]),canCreate:o(["CREATE_LEAD_DIRECT"])}))),a=f((()=>e.value.canView));return{capabilities:e,haveActionButton:a}}(),h=C(),y=j();c.value="Leads Direct",_({title:"Whitehouse: Leads Direct"});const b=()=>{h.push({name:"leads-create",query:l({},y.query)})},v=e=>{let a=e?e.line_id?e.line_id:e.lineId?e.lineId:null:null;return a?`${a}`:"-"};return(e,o)=>{const c=d,f=p,g=u,C=m;return L(),k("div",null,[A(C,{key:D(i),"is-loading":D(i),"search-placeholder":"search by id, name, phone, created by, email, lineId",headers:D(t),data:D(a),total:D(r),"is-action":D(n)},I({channelId:E((({value:e})=>[A(f,{color:"primary",label:+e==D(B).CALL_02?"Call 02":e==D(B).DIRECT_CALL?"Direct call":e==D(B).FB_CHAT?"FB Chat":e==D(B).IG_CHAT?"IG Chat":e==D(B).LINEOA_CHAT?"Line OA":e==D(B).REFERRAL?"Referral":e==D(B).RETENTION?"Retention":"Orther",outlined:!+e,class:"chip",rounded:""},null,8,["label","outlined"])])),json:E((({value:e})=>[P(w(v(JSON.parse(e))),1)])),createdAt:E((({value:e})=>[P(w(e?D(q)(e,"DD/MM/YYYY HH:mm"):"-"),1)])),action:E((({value:e})=>[D(n)?(L(),k("div",G,[A(g,{spaced:"",right:""},{button:E((({toggle:e})=>[A(c,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:E((()=>[S])),_:2},1032,["onClick"])])),content:E((()=>[D(s).canView?(L(),k("a",{key:0,role:"menuitem",class:"dropdown-item is-media",onClick:a=>{return t=e.id,void h.push({name:"leads-:id",query:l({},y.query),params:{id:t}});var t}},W,8,M)):R("",!0)])),_:2},1024)])):R("",!0)])),_:2},[D(s).canCreate?{name:"custom-right",fn:E((()=>[O("div",N,[A(c,{color:"primary",icon:"fas fa-plus",onClick:b},{default:E((()=>[Y])),_:1})])]))}:void 0]),1032,["is-loading","headers","data","total","is-action"])])}}});J.__scopeId="data-v-1bd0a912";export default J;
