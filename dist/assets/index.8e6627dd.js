var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&o(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{_ as i,a as c}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as p}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{p as d,c as m,b as g,h as v}from"./index.d7dc1ff6.js";import{_ as b}from"./Datatable.aae3ef08.js";import{b as y,A as f,q as h,Y as k,ae as P,d as _,X as j,E as I,o as C,e as x,x as V,au as O,g as w,F as S,h as T,O as q,t as A,y as N,G as D,n as L,i as E,p as U,a as F}from"./vendor.1c8b4573.js";import{u as R}from"./useOptionApi.f4dc99b9.js";import{u as G}from"./usePackageApi.47154a43.js";import{u as $}from"./usePaginationRoute.780ca235.js";import{a as H}from"./product.enum.768ca89a.js";import{u as W}from"./useGuardPackage.859d66f8.js";import{P as z}from"./package.enum.de4ee89f.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./quiz.enum.fc8b95fc.js";U("data-v-aabe8878");const B={class:"page-content-inner package-container"},M={class:"is-flex is-justify-content-flex-start pt-4 select-section"},X={class:"column is-4 input-select"},Y=T("label",null,"Purchasable",-1),J={class:"column is-4 input-select"},K=T("label",null,"Product Type",-1),Q={class:"column is-4 input-select"},Z=T("label",null,"Product",-1),ee={class:"is-flex is-justify-content-flex-end pt-4"},ae=D(" Create "),le={key:0},te={key:1},se=["href"],re={key:1,class:"light-text"},oe={key:1},ue={class:"flex-table-cell"},ne={key:0,class:"is-flex is-justify-content-flex-end"},ie=D(" Actions "),ce=T("div",{class:"icon"},[T("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),pe=T("div",{class:"meta"},[T("span",null,"View"),T("span",null,"View package details")],-1),de=T("div",{class:"icon"},[T("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),me=T("div",{class:"meta"},[T("span",null,"Edit"),T("span",null,"Edit package details")],-1);F();var ge=_({setup(e){d.value="Package Information",j({title:"Whitehouse Package"});const{isLoading:a,packageTableHeaders:l,paginationData:t,fetchAllPackages:s,purchasable:r,productType:o,productId:_,onChangePurchasable:U,onChangeProductType:F,onChangeProduct:ge,onSearchProduct:ve}=function(){const{getPackagesWithPagination:e}=G(),{getProducts:a}=R(),{currentPage:l,perPage:t,search:s}=$(),r=y(),o=f(),i=h({isLoading:!1,packages:[],paginationData:void 0,purchasable:void 0,productType:void 0,productId:void 0}),c=async()=>{i.isLoading=!0;const a=await e({purchasable:i.purchasable,type:i.productType,product:i.productId,currentPage:l,perPage:t,search:s});i.isLoading=!1,a&&(i.paginationData=a)};return k((()=>{const e=o.query;(null==e?void 0:e.purchasable)&&(i.purchasable=e.purchasable),(null==e?void 0:e.type)&&(i.productType=e.type),(null==e?void 0:e.product)&&(i.productId=e.product?Number(e.product):void 0),c()})),n(u({},P(i)),{packageTableHeaders:[{key:"id",label:"ID"},{key:"packageName",label:"Package Name"},{key:"packageNameInternal",label:"Internal Name"},{key:"product",label:"Product",isRaw:!0},{key:"curriculumUrl",label:"Curriculum",isCenter:!0},{key:"type",label:"Type"},{key:"purchasable",label:"Purchasable"},{key:"price",label:"Price"},{key:"duration",label:"Duration",isCenter:!0},{key:"ticket",label:"1-1 Ticket",isCenter:!0},{key:"groupClassTicket",label:"GroupClass",isCenter:!0}],fetchAllPackages:c,onChangePurchasable:e=>{(null==o?void 0:o.name)&&r.push({name:o.name,params:o.params,query:n(u({},o.query),{purchasable:e,page:1})})},onChangeProductType:e=>{(null==o?void 0:o.name)&&r.push({name:o.name,params:o.params,query:n(u({},o.query),{type:e||void 0,product:void 0,page:1})})},onChangeProduct:e=>{const a=e?Number(e):null;(null==o?void 0:o.name)&&r.push({name:o.name,params:o.params,query:n(u({},o.query),{product:a||void 0,page:1})})},onSearchProduct:async e=>{var l,t;const s=i.productType,r=e||((null==(l=null==o?void 0:o.query)?void 0:l.product)?String(null==(t=null==o?void 0:o.query)?void 0:t.product):"");return await a(r,void 0,s)||[]}})}(),{capabilities:be,haveActionButton:ye}=W(),fe=Object.values(H).map((e=>{const a=e.replace(/(^\w|\s\w|_)/g,(e=>"_"!==e?e.toUpperCase():" "));return{value:e,label:a}})),he=[{value:void 0,text:"All"},{value:z.NOT_FOR_SALE,text:"Not for Sale"},{value:z.SALE,text:"Sale"}];return(e,s)=>{var u,n;const d=I("Multiselect"),y=i,f=c,h=p,k=m,P=g,j=I("RouterLink"),R=v,G=b;return C(),x("div",B,[V(G,{"is-loading":w(a),headers:w(l),data:(null==(u=w(t))?void 0:u.data)||[],total:(null==(n=w(t))?void 0:n.total)||0,"is-action":w(ye)},O({"custom-left":S((()=>[T("div",M,[T("div",X,[V(f,null,{default:S((()=>[Y,V(y,null,{default:S((()=>[V(d,{modelValue:w(r),"onUpdate:modelValue":[s[0]||(s[0]=e=>q(r)?r.value=e:null),w(U)],options:he,label:"text",placeholder:"All"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})]),T("div",J,[V(f,null,{default:S((()=>[K,V(y,null,{default:S((()=>[V(d,{modelValue:w(o),"onUpdate:modelValue":s[1]||(s[1]=e=>q(o)?o.value=e:null),placeholder:"Select product type",options:w(fe),onInput:w(F)},null,8,["modelValue","options","onInput"])])),_:1})])),_:1})]),T("div",Q,[V(f,null,{default:S((()=>[Z,V(y,null,{default:S((()=>[V(h,{key:w(o),modelValue:w(_),"onUpdate:modelValue":s[2]||(s[2]=e=>q(_)?_.value=e:null),"callback-search":w(ve),"label-by":"name","value-prop":"id",placeholder:"Select product",disabled:!w(o),onInput:w(ge)},null,8,["modelValue","callback-search","disabled","onInput"])])),_:1})])),_:1})])])])),packageNameInternal:S((({value:e})=>[""!==e&&null!==e?(C(),x("p",le,A(e),1)):(C(),x("p",te,"-"))])),curriculumUrl:S((({value:e})=>[e?(C(),x("a",{key:0,href:e,class:"action-link",target:"_blank"},[V(P,{icon:"feather:external-link"})],8,se)):(C(),x("span",re,"-"))])),product:S((({value:e})=>[e.productId?(C(),N(j,{key:0,to:`/products/${e.productId}`,target:"_blank",class:"link"},{default:S((()=>[D(A(`(ID: ${e.productId}) ${e.productName}`),1)])),_:2},1032,["to"])):(C(),x("p",oe,"-"))])),purchasable:S((({value:e})=>[T("div",ue,[T("span",{class:L(["tag is-rounded",["1"===e&&"is-primary","0"===e&&""]])},A("1"===e?"Sale":"Not for Sale"),3)])])),action:S((({value:e})=>[w(ye)?(C(),x("div",ne,[V(R,{spaced:"",right:""},{button:S((({toggle:e})=>[V(k,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:S((()=>[ie])),_:2},1032,["onClick"])])),content:S((()=>[w(be).canView?(C(),N(j,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"products-packages-:id",params:{id:e.id}}},{default:S((()=>[ce,pe])),_:2},1032,["to"])):E("",!0),w(be).canEdit?(C(),N(j,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"products-packages-:id",params:{id:e.id},hash:"#edit"}},{default:S((()=>[de,me])),_:2},1032,["to"])):E("",!0)])),_:2},1024)])):E("",!0)])),_:2},[w(be).canCreate?{name:"custom-right",fn:S((()=>[T("div",ee,[V(k,{color:"primary",icon:"fas fa-plus",to:{name:"products-packages-create"}},{default:S((()=>[ae])),_:1})])]))}:void 0]),1032,["is-loading","headers","data","total","is-action"])])}}});ge.__scopeId="data-v-aabe8878";export default ge;
