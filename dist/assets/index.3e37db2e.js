var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(s)for(var t of s(a))r.call(a,t)&&i(e,t,a[t]);return e},n=(e,s)=>a(e,t(s));import{_ as c}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as d,a as u}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{p,c as m,h as y}from"./index.d7dc1ff6.js";import{_ as f}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as g}from"./Datatable.aae3ef08.js";import{q as h,r as k,A as b,b as v,Y as I,ae as j,d as S,X as _,E as C,o as D,e as E,x as w,F as P,h as V,g as O,t as x,G as R,y as Y,i as $,H as A,I as L,p as M,a as T}from"./vendor.1c8b4573.js";import{u as q}from"./useOptionApi.f4dc99b9.js";import{u as U}from"./useGuardSeriesItem.794b4076.js";import{S as F,C as N}from"./series-item.enum.786b841a.js";import{u as H}from"./useSeriesItemApi.25ad4ad5.js";import{u as B}from"./usePaginationRoute.780ca235.js";import{t as G}from"./date.helper.6ae3fc87.js";import{d as z}from"./student.helper.13430dac.js";import{u as W}from"./useTextHelper.08cd3a6d.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./quiz.enum.fc8b95fc.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";import"./student.enum.ad6af513.js";import"./csv.helper.d14e8c45.js";import"./useNotyf.ddf08f06.js";M("data-v-19b7d3b4");const X={class:"page-content-inner"},J={class:"columns is-multiline filter-box"},K={class:"column is-2"},Q=V("label",null,"Challenge",-1),Z={class:"multiselect-single-label"},ee=R("Create"),ae=R("-"),te=R("-"),se=R("-"),le=R("-"),re={key:0,style:{"list-style-type":"circle"}},ie=R("-"),oe=R("-"),ne=R("-"),ce=R("-"),de=R("-"),ue={key:0,class:"dark-inverted is-flex is-justify-content-flex-end"},pe=R(" Actions "),me=V("div",{class:"icon"},[V("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),ye=V("div",{class:"meta"},[V("span",null,"View"),V("span",null,"View Series Item")],-1),fe=V("div",{class:"icon"},[V("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),ge=V("div",{class:"meta"},[V("span",null,"Edit"),V("span",null,"Edit Series Item")],-1);T();var he=S({setup(e){p.value="Series Item",_({title:"Whitehouse: Series Item"});const{capabilities:a,haveActionButton:t}=U(),{data:s,filter:l,total:r,isLoading:i,headers:S,filterChange:M,mapSourceTagColor:T}=function(){const e=h({data:[],total:0,isLoading:!0,filter:{}}),a=k([{key:"id",label:"ID"},{key:"student",label:"Student"},{key:"series",label:"Series"},{key:"challenge",label:"Challenge"},{key:"status",label:"Challenge Status",isRaw:!0},{key:"packageItems",label:"Package Items"},{key:"startDate",label:"Start Date"},{key:"completeDate",label:"Complete Date"},{key:"source",label:"Source"},{key:"sourceId",label:"Source Id",isCenter:!0,isRaw:!0}]),t=b(),s=v(),{currentPage:l,perPage:r,search:i}=B(),{getSeriesItems:c}=H(),d=async()=>{e.filter.challengeId=+t.query.challengeId,e.isLoading=!0;const a=await c({currentPage:l,perPage:r,search:i,challengeId:e.filter.challengeId?e.filter.challengeId:void 0});a&&(e.data=a.data,e.total=a.total),e.isLoading=!1};return I((async()=>{await d()})),n(o({},j(e)),{headers:a,fetchSeriesItems:d,filterChange:()=>{s.push({name:"students-series-items",params:t.params,query:n(o({},t.query),{search:e.filter.search,challengeId:e.filter.challengeId})})},mapSourceTagColor:e=>{switch(e){case F.FREEBIE:return"warning";case F.PURCHASED:return"primary";case F.REDEEM:return"purple";case F.TRIAL:return"info";default:return"solid"}}})}(),{getChallenge:he}=q(),{displayPackageItemName:ke,displaySeriesName:be,displayChallengeName:ve}=W();return(e,o)=>{const n=c,p=d,h=u,k=m,b=C("RouterLink"),v=f,I=y,j=g;return D(),E("div",X,[w(j,{"search-placeholder":"search by id, name, phone",headers:O(S),data:O(s),total:O(r),"is-action":O(t),"is-loading":!!O(i)},{custom:P((()=>[V("div",J,[V("div",K,[w(h,null,{default:P((()=>[Q,w(p,null,{default:P((()=>[w(n,{key:O(l).challengeId,modelValue:O(l).challengeId,"onUpdate:modelValue":[o[0]||(o[0]=e=>O(l).challengeId=e),O(M)],"callback-search":O(he),"value-prop":"id",placeholder:"Select challenge",onClear:o[1]||(o[1]=e=>{O(l).challengeId=void 0,O(M)()})},{singlelabel:P((({value:e})=>[V("div",Z," ("+x(e.id)+")"+x(` ${e.name} - ${e.country.toUpperCase()}`),1)])),option:P((({option:e})=>[R(" ("+x(e.id)+")"+x(` ${e.name} - ${e.country.toUpperCase()}`),1)])),_:1},8,["modelValue","callback-search","onUpdate:modelValue"])])),_:1})])),_:1})])])])),"custom-right":P((()=>[O(a).canCreate?(D(),Y(k,{key:0,color:"primary",icon:"feather:plus",class:"is-flex justify-content-end",to:{name:"students-series-items-create"}},{default:P((()=>[ee])),_:1})):$("",!0)])),student:P((({value:e})=>[e?(D(),Y(b,{key:0,to:{name:"students-:id",params:{id:`${e.id}`}},class:"link"},{default:P((()=>[R(" (ID:"+x(e.id)+") "+x(O(z)(e)),1)])),_:2},1032,["to"])):(D(),E(A,{key:1},[ae],64))])),series:P((({value:e})=>[e?(D(),E(A,{key:0},[R(x(O(be)(e)),1)],64)):(D(),E(A,{key:1},[te],64))])),challenge:P((({value:e})=>[e?(D(),E(A,{key:0},[R(x(O(ve)(e)),1)],64)):(D(),E(A,{key:1},[se],64))])),status:P((({value:e})=>{var a;return[(null==(a=e.challenge)?void 0:a.status)?(D(),Y(v,{key:0,color:e.challenge.status===O(N).ACTIVE?"success":"danger",rounded:"",label:e.challenge.status},null,8,["color","label"])):(D(),E(A,{key:1},[le],64))]})),packageItems:P((({value:e})=>[e?(D(),E("ul",re,[(D(!0),E(A,null,L(e,(e=>(D(),E("li",{key:e,class:"mb-1"},[w(b,{to:{name:"products-packages-:id",params:{id:`${e.package.id}`}},class:"link"},{default:P((()=>[R(x(O(ke)(e)),1)])),_:2},1032,["to"])])))),128))])):(D(),E(A,{key:1},[ie],64))])),startDate:P((({value:e})=>[e?(D(),E(A,{key:0},[R(x(O(G)(e,"DD/MM/YYYY")),1)],64)):(D(),E(A,{key:1},[oe],64))])),completeDate:P((({value:e})=>[e?(D(),E(A,{key:0},[R(x(O(G)(e,"DD/MM/YYYY")),1)],64)):(D(),E(A,{key:1},[ne],64))])),source:P((({value:e})=>[e?(D(),Y(v,{key:0,color:O(T)(e),rounded:"",label:e,outlined:""},null,8,["color","label"])):(D(),E(A,{key:1},[ce],64))])),sourceId:P((({value:e})=>[e.sourceId&&e.source===O(F).REDEEM?(D(),Y(b,{key:0,to:{name:"codes-redeems-:id",params:{id:`${e.sourceId}`}},class:"link"},{default:P((()=>[R(x(e.sourceId),1)])),_:2},1032,["to"])):e.sourceId?(D(),E(A,{key:1},[R(x(e.sourceId),1)],64)):(D(),E(A,{key:2},[de],64))])),action:P((({value:e})=>[O(t)?(D(),E("div",ue,[w(I,{spaced:"",right:""},{button:P((({toggle:e})=>[w(k,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:P((()=>[pe])),_:2},1032,["onClick"])])),content:P((()=>[O(a).canView?(D(),Y(b,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"students-series-items-:id",params:{id:`${e.id}`}}},{default:P((()=>[me,ye])),_:2},1032,["to"])):$("",!0),O(a).canEdit?(D(),Y(b,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"students-series-items-:id",hash:"#edit",params:{id:`${e.id}`}}},{default:P((()=>[fe,ge])),_:2},1032,["to"])):$("",!0)])),_:2},1024)])):$("",!0)])),_:1},8,["headers","data","total","is-action","is-loading"])])}}});he.__scopeId="data-v-19b7d3b4";export default he;
