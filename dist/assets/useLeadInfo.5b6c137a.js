var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,o=(a,l,n)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[l]=n,s=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&o(e,l,a[l]);if(n)for(var l of n(a))d.call(a,l)&&o(e,l,a[l]);return e};import{_ as t,a as c}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{p as r,a as p,d as u,E as m,o as f,e as y,h as v,x as I,K as h,ai as b,F as k,ao as O,ap as g,G as L,b as S,A as V,q as C,D as j,k as T,Y as _,ae as A}from"./vendor.1c8b4573.js";import{o as D,v as E}from"./index.d7dc1ff6.js";import{u as P,L as H,a as x,b as U}from"./useLeadApi.8b06d447.js";r("data-v-58d04dd1");const G={class:"form-fieldset"},w={class:"columns is-multiline"},B={class:"column is-12"},K={class:"field"},R=v("label",null,[L(" Pipeline "),v("span",{class:"red"},"*")],-1),Y={class:"control"},q={class:"control"},N={class:"column is-6"},F={class:"field"},M=v("label",null,[L(" Channel "),v("span",{class:"red"},"*")],-1),Q={class:"control"},$={class:"control"},z={class:"column is-6"},J={class:"field"},W=v("label",null,[L(" Product "),v("span",{class:"red"},"*")],-1),X={class:"control"},Z={class:"control"},ee={class:"column is-12"},ae={class:"field"},le=v("label",null,[L(" Name "),v("span",{class:"red"},"*")],-1),ne={class:"control"},ie=["readonly"],de={class:"column is-12"},oe={class:"field"},se=v("label",null,[L(" Phone "),v("span",{class:"red"},"*"),v("span",{class:"ml-2"},"(Limit 10 characters)")],-1),te={class:"control"},ce=["readonly"],re={class:"column is-12"},pe={class:"field"},ue=v("label",null," Line ID ",-1),me={class:"control"},fe=["readonly"],ye={class:"column is-12"},ve={class:"field"},Ie=v("label",null," Email ",-1),he={class:"control"},be=["readonly"],ke={class:"column is-12"},Oe={class:"field"},ge=v("label",null," Career ",-1),Le={class:"control"},Se=["readonly"],Ve={class:"column is-12"},Ce={class:"field"},je=v("label",null," Contact Time ",-1),Te={class:"control"},_e=["value","disabled"],Ae={class:"column is-12"},De={class:"field"},Ee=v("label",null,"Student ID",-1),Pe={class:"control"},He=["readonly"],xe={class:"column is-12"},Ue={class:"field"},Ge=v("label",null," Insight ",-1),we={class:"control"},Be=["readonly"];p();var Ke=u({props:{data:{type:Object,required:!0},readonly:{type:Boolean,default:!1},pipelineOptions:{type:Array,default:void 0,required:!0},channelOptions:{type:Array,default:void 0,required:!0},productOptions:{type:Array,default:void 0,required:!0}},emits:["update"],setup:(e,{emit:a})=>(l,n)=>{const i=m("Multiselect"),d=t,o=c,s=m("v-date-picker");return f(),y("div",G,[v("div",w,[v("div",B,[v("div",K,[R,v("div",Y,[v("div",q,[I(i,{modelValue:e.data.pipelineId,"onUpdate:modelValue":n[0]||(n[0]=a=>e.data.pipelineId=a),options:e.pipelineOptions,placeholder:"select a pipeline","value-prop":"key","track-by":"key",label:"name",disabled:e.readonly},null,8,["modelValue","options","disabled"])])])])]),v("div",N,[v("div",F,[M,v("div",Q,[v("div",$,[I(i,{modelValue:e.data.channelId,"onUpdate:modelValue":n[1]||(n[1]=a=>e.data.channelId=a),options:e.channelOptions,placeholder:"select a channel","value-prop":"key","track-by":"key",label:"name",disabled:e.readonly},null,8,["modelValue","options","disabled"])])])])]),v("div",z,[v("div",J,[W,v("div",X,[v("div",Z,[I(i,{modelValue:e.data.accid,"onUpdate:modelValue":n[2]||(n[2]=a=>e.data.accid=a),options:e.productOptions,placeholder:"select a product","value-prop":"key","track-by":"key",label:"name",disabled:e.readonly},null,8,["modelValue","options","disabled"])])])])]),v("div",ee,[v("div",ae,[le,v("div",ne,[h(v("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>e.data.name=a),type:"text",class:"input",placeholder:"fill name...",readonly:e.readonly},null,8,ie),[[b,e.data.name]])])])]),v("div",de,[v("div",oe,[se,v("div",te,[h(v("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>e.data.phone=a),type:"text",class:"input",placeholder:"fill phone...",readonly:e.readonly},null,8,ce),[[b,e.data.phone]])])])]),v("div",re,[v("div",pe,[ue,v("div",me,[h(v("input",{"onUpdate:modelValue":n[5]||(n[5]=a=>e.data.lineId=a),type:"text",class:"input",placeholder:"fill lineId...",readonly:e.readonly},null,8,fe),[[b,e.data.lineId]])])])]),v("div",ye,[v("div",ve,[Ie,v("div",he,[h(v("input",{"onUpdate:modelValue":n[6]||(n[6]=a=>e.data.email=a),type:"text",class:"input",placeholder:"fill email...",readonly:e.readonly},null,8,be),[[b,e.data.email]])])])]),v("div",ke,[v("div",Oe,[ge,v("div",Le,[h(v("input",{"onUpdate:modelValue":n[7]||(n[7]=a=>e.data.career=a),type:"text",class:"input",placeholder:"fill career...",readonly:e.readonly},null,8,Se),[[b,e.data.career]])])])]),v("div",Ve,[v("div",Ce,[je,v("div",Te,[I(s,{modelValue:e.data.contactTime,"onUpdate:modelValue":n[8]||(n[8]=a=>e.data.contactTime=a),color:"orange","model-config":{type:"string",mask:"YYYY-MM-DD HH:mm"},masks:{inputDateTime24hr:"DD/MM/YYYY HH:mm"},is24hr:"","trim-weeks":"",mode:"dateTime",disabled:e.readonly},{default:k((({inputValue:a,inputEvents:l})=>[I(o,null,{default:k((()=>[I(d,null,{default:k((()=>[v("input",O({class:"input",value:a,disabled:e.readonly},g(l)),null,16,_e)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","disabled"])])])]),v("div",Ae,[v("div",De,[Ee,v("div",Pe,[h(v("input",{"onUpdate:modelValue":n[9]||(n[9]=a=>e.data.studentId=a),type:"number",class:"input",placeholder:"fill student id...",readonly:e.readonly,onChange:n[10]||(n[10]=e=>a("update"))},null,40,He),[[b,e.data.studentId]])])])]),v("div",xe,[v("div",Ue,[Ge,v("div",we,[h(v("textarea",{"onUpdate:modelValue":n[11]||(n[11]=a=>e.data.insight=a),class:"textarea",rows:"10",placeholder:"fill your insight...",readonly:e.readonly},null,8,Be),[[b,e.data.insight]])])])])])])}});function Re(){const{getLeadById:e,createLead:n}=P(),i=S(),d=V(),o=[{key:H.GLOBISH_PRO,name:"Globish Pro"},{key:H.GLOBISH_KIDS,name:"Globish Kids"},{key:H.GLOBISH_CHINESE,name:"Globish Chinese"},{key:H.SPEAKING_LAB,name:"Speaking Lab"},{key:H.QKIDS,name:"QKids"}],t=[{key:x.LINEOA_CHAT,name:"Line OA Chat"},{key:x.FB_CHAT,name:"FB Chat"},{key:x.DIRECT_CALL,name:"Direct Call"},{key:x.IG_CHAT,name:"IG Chat"},{key:x.CALL_02,name:"Call: 020803992"},{key:x.REFERRAL,name:"Referral"},{key:x.RETENTION,name:"Retention"}],c=[{key:U.PRO,name:"Pro"},{key:U.KIDS,name:"Kids"},{key:U.CHINESE,name:"Chinese"},{key:U.LAB,name:"Lab"},{key:U.QKIDS,name:"Qkids"}],r=C({id:0,readonly:!0,onSaving:!1,info:{pipelineId:0,channelId:0,accid:0,name:"",phone:"",lineId:"",email:"",career:"",contactTime:j().format(),studentId:null,insight:"",json:{}}}),p=T((()=>!(r.info.pipelineId&&r.info.channelId&&r.info.accid&&r.info.name&&r.info.phone.length<=10&&r.info.phone))),u=async()=>{const a=await e(parseInt(`${d.params.id}`)),l=E(a.json)?E(a.json):null;r.id=a.id,r.info.pipelineId=a.pipelineId,r.info.channelId=a.channelId,r.info.accid=(null==l?void 0:l.accid)?l.accid:null,r.info.name=a.name,r.info.phone=a.phone,r.info.lineId=(null==l?void 0:l.lineId)?l.lineId:null,r.info.email=(null==l?void 0:l.email)?l.email:null,r.info.career=(null==l?void 0:l.career)?l.career:null,r.info.contactTime=j(r.info.contactTime).format(),r.info.studentId=l.studentId,r.info.insight=a.insight,r.info.json=l};return _((()=>{parseInt(`${d.params.id}`)&&u()})),m=s({},A(r)),a(m,l({pipelineOptions:o,channelOptions:t,productOptions:c,disabledSave:p,setStateInfo:u,clearStateInfo:()=>{r.id=0,r.info.pipelineId=0,r.info.channelId=0,r.info.accid=0,r.info.name="",r.info.phone="",r.info.lineId="",r.info.email="",r.info.career="",r.info.contactTime=j().format(),r.info.studentId=0,r.info.insight="",r.info.json={}},onSaveLead:async()=>{r.onSaving=!0;const e={pipelineId:r.info.pipelineId,channelId:r.info.channelId,accid:r.info.accid,name:r.info.name,phone:r.info.phone,lineId:r.info.lineId,email:r.info.email,career:r.info.career,contactTime:r.info.contactTime,studentId:r.info.studentId?r.info.studentId:null,insight:r.info.insight,json:r.info.json},a=await n(e);D(a,"Lead Direct was created!"),r.onSaving=!1,201===a.status&&i.push({name:"leads",query:s({},d.query)})},autofixStudentId:()=>{r.info.studentId&&r.info.studentId<0&&(r.info.studentId=0)}}));var m}Ke.__scopeId="data-v-58d04dd1";export{Ke as _,Re as u};
