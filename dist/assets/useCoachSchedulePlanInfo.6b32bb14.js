var a=Object.defineProperty,i=Object.defineProperties,m=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,e=(i,m,o)=>m in i?a(i,m,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[m]=o,t=(a,i)=>{for(var m in i||(i={}))n.call(i,m)&&e(a,m,i[m]);if(o)for(var m of o(i))l.call(i,m)&&e(a,m,i[m]);return a};import{p as s,a as u,d,o as r,e as c,h as S,K as p,ai as f,V as h,G as x,b as y,A as b,q as v,k as O,Y as M,ae as P}from"./vendor.1c8b4573.js";import{o as j}from"./index.d7dc1ff6.js";import{u as g}from"./useCoachApi.4bab1366.js";import{u as C}from"./useCoachSchedulePlanList.fc8ade39.js";s("data-v-3919c054");const w={class:"form-fieldset"},I={class:"columns is-multiline"},q={class:"column is-12"},N={class:"field"},F=S("label",null,[x("Name"),S("span",{class:"red"}," * ")],-1),L={class:"control"},V=["readonly"],T={class:"column is-6"},U={class:"field"},$=S("label",null,[x("Minimum Slot"),S("span",{class:"red"}," * ")],-1),_={class:"control"},A=["readonly"],B={class:"help is-danger"},E={class:"column is-6"},k={class:"field"},D=S("label",null,[x("Maximum Slot"),S("span",{class:"red"}," * ")],-1),G={class:"control"},K=["readonly","min"],Y={class:"help is-danger"};u();var z=d({props:{data:{type:Object,required:!0},readonly:{type:Boolean,default:!1},addOn:{type:Object,required:!0}},setup(a){const i=a;return(m,o)=>(r(),c("div",w,[S("div",I,[S("div",q,[S("div",N,[F,S("div",L,[p(S("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>a.data.name=i),type:"text",class:"input",placeholder:"fill coach schedule plan name...",readonly:null==i?void 0:i.readonly},null,8,V),[[f,a.data.name]])])])]),S("div",T,[S("div",U,[$,S("div",_,[p(S("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>a.data.minimumSlot=i),type:"number",class:"input",placeholder:"minimum slot limit 999",readonly:null==i?void 0:i.readonly,min:"0",onChange:o[2]||(o[2]=(...i)=>a.addOn.autoFixMinimumSlotNumbers&&a.addOn.autoFixMinimumSlotNumbers(...i))},null,40,A),[[f,a.data.minimumSlot]]),p(S("p",B," Minimum slot should less then maximum slot. ",512),[[h,a.addOn.isMinimumSlotLessThenMaximumSlot]])])])]),S("div",E,[S("div",k,[D,S("div",G,[p(S("input",{"onUpdate:modelValue":o[3]||(o[3]=i=>a.data.maximumSlot=i),type:"number",class:"input",placeholder:"maximum slot limit 1000",readonly:null==i?void 0:i.readonly,min:a.data.minimumSlot+1,onChange:o[4]||(o[4]=(...i)=>a.addOn.autoFixMaximumSlotNumbers&&a.addOn.autoFixMaximumSlotNumbers(...i))},null,40,K),[[f,a.data.maximumSlot]]),p(S("p",Y," Maximum slot should more then minimum slot. ",512),[[h,a.addOn.isMinimumSlotLessThenMaximumSlot]])])])])])]))}});function H(){const{createCoachScheulePlan:a,updateCoachScheulePlan:o,getCoachScheulePlanById:n}=g(),{setCoachSchedulePlanId:l}=C(),e=y(),s=b(),u=v({id:0,readonly:!0,onSaving:!1,info:{name:"",minimumSlot:0,maximumSlot:1}}),d=O((()=>!u.info.name||+u.info.minimumSlot<0||!u.info.maximumSlot||!(u.info.minimumSlot<u.info.maximumSlot))),r=O((()=>!(u.info.minimumSlot<u.info.maximumSlot))),c=async()=>{const a=await n(parseInt(`${s.params.id}`));u.id=a.id,u.info.name=a.name,u.info.minimumSlot=a.minimumSlot,u.info.maximumSlot=a.maximumSlot};return M((()=>{const a=s.hash,i=parseInt(`${s.params.id}`);u.readonly="#edit"!==a,i&&c()})),S=t({},P(u)),i(S,m({disabledSave:d,isMinimumSlotLessThenMaximumSlot:r,setStateInfo:c,onEditMode:()=>{e.push({name:"coaches-schedule-plans-:id",query:t({},s.query),params:{id:parseInt(`${s.params.id}`)},hash:"#edit"})},clearStateInfo:()=>{u.id=0,u.info.name="",u.info.minimumSlot=0,u.info.maximumSlot=1,l(0)},onSaveCoachScheulePlan:async()=>{u.onSaving=!0;const i={name:u.info.name,minimumSlot:u.info.minimumSlot,maximumSlot:u.info.maximumSlot};let m;u.id?(m=await o(t({id:u.id},i)),j(m,"Coach Scheule Plan was updated!")):(m=await a(i),j(m,"Coach Scheule Plan was created!")),e.push({name:"coaches-schedule-plans",query:t({},s.query)}),u.onSaving=!1},autoFixMaximumSlotNumbers:()=>{u.info.minimumSlot>u.info.maximumSlot&&(u.info.maximumSlot=u.info.minimumSlot+1),u.info.maximumSlot<0&&(u.info.maximumSlot=u.info.minimumSlot+1),u.info.maximumSlot>1e3&&(u.info.maximumSlot=0)},autoFixMinimumSlotNumbers:()=>{u.info.maximumSlot<u.info.minimumSlot&&u.info.minimumSlot>0&&(u.info.maximumSlot=u.info.minimumSlot+1),u.info.minimumSlot<0&&(u.info.minimumSlot=0),u.info.minimumSlot>1e3&&(u.info.minimumSlot=0,u.info.maximumSlot=1)}}));var S}z.__scopeId="data-v-3919c054";export{z as _,H as u};
