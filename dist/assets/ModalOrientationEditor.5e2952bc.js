import{_ as e}from"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import{_ as a,a as t}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{c as l}from"./index.d7dc1ff6.js";import{_ as n}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as i}from"./index.8f8d8101.js";import{u as o}from"./useNotyf.ddf08f06.js";import{p as s,a as d,d as u,av as r,o as c,y as p,F as v,h as m,t as f,K as I,e as b,x as h,i as k,r as g,k as y,S as _,D as S,E as O,V as E,g as C,G as D,ah as x,ak as N,ao as T,ap as V,ai as w}from"./vendor.1c8b4573.js";import{_ as A}from"./VModal.31b4f4ba.js";import{u as R}from"./useOptionApi.f4dc99b9.js";import{a as j}from"./student.helper.13430dac.js";s("data-v-5d8b678c");const B={key:0},P=m("span",{class:"icon is-small is-rounded"},[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:users"})],-1),Y=m("span",{class:"icon is-small is-rounded"},[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:phone-outgoing"})],-1),$={key:1};d();var W,M,U,L,q,F,H,G,K=u({props:{isDefault:{type:Boolean,required:!1},label:{type:String,default:""},link:{type:String,default:""}},setup(e){const s=e,{toClipboard:d}=i(),u=o(),g=async()=>{try{await d(s.link),u.success("Copied to clipboard")}catch(e){u.error(e)}};return(i,o)=>{const s=l,d=n,u=a,y=t,_=r("tooltip");return c(),p(y,null,{default:v((()=>[m("label",null,f(e.label),1),e.isDefault?I((c(),b("span",B,[h(s,{class:"icon-call is-rounded is-info",elevated:""},{default:v((()=>[P])),_:1})],512)),[[_,"Default version of the student"]]):k("",!0),e.link?(c(),p(s,{key:1,class:"icon-call is-rounded is-warning",href:e.link,elevated:""},{default:v((()=>[Y])),_:1},8,["href"])):k("",!0),I(h(u,{class:"link-wrapper"},{default:v((()=>[e.link?(c(),p(d,{key:0,class:"where-by-link",color:e.isDefault?"orange":"solid",label:e.link,outlined:e.isDefault,onClick:g},null,8,["color","label","outlined"])):(c(),b("p",$,"-"))])),_:1},512),[[_,"Click to copy link",void 0,{primary:!0,rounded:!0}]])])),_:1})}}});K.__scopeId="data-v-5d8b678c",(M=W||(W={})).WAIT_TO_CALL="wait_to_call",M.WAIT_TO_ORIENTATION="wait_to_orientation",M.DONE="done",(L=U||(U={})).DONE="done",L.ORIENTING="orienting",L.SKIP="skip",L.DEVICE_READY="device_ready",(F=q||(q={})).DONE="done",F.LATER="later",F.NONE="none",(G=H||(H={})).SPACE_TIGER="space_tiger",G.WHEREBY="whereby",G.TOKBOX="tokbox",s("data-v-39e3889a");const X={class:"modal-form"},z=m("label",null,"Student",-1),J=["value"],Q={class:"multiselect-single-label"},Z={class:"select-option-text"},ee=m("label",null,"Package Item",-1),ae=["value"],te={class:"multiselect-single-label"},le={class:"select-option-text"},ne=m("label",null,"Select student",-1),ie={class:"multiselect-tag"},oe=["onMousedown"],se=[m("span",{class:"multiselect-tag-remove-icon"},null,-1)],de={class:"select-option-text"},ue=m("p",{class:"help has-text-warn"},"* Can choose multiple",-1),re=m("label",null,"Operator",-1),ce=["value"],pe={class:"columns is-multiline"},ve=m("label",null,"Appointment Status",-1),me={class:"select"},fe=["disabled"],Ie=[m("option",{value:"none"},"Wait to Call",-1),m("option",{value:"done"},"Wait to Orientation",-1)],be={key:0,class:"help has-text-warn"},he=[D(" If you want to select "),m("span",{class:"bold"},"Wait to Call",-1),D(". You have to confirm that "),m("span",{class:"bold"},"Appointment Date & Time ",-1),D("will be removed. ")],ke=m("label",null,"Orientation Status",-1),ge={class:"select"},ye=["disabled"],_e=[m("option",{value:null},"-",-1),m("option",{value:"done"},"Done",-1),m("option",{value:"orienting"},"Orienting",-1)],Se={key:3,class:"columns is-multiline"},Oe={class:"column is-12"},Ee={class:"title is-5"},Ce=D(" Orientation Room: "),De={class:"is-underlined has-text-primary"},xe={class:"column is-6"},Ne={class:"column is-6"},Te={class:"column is-6"},Ve={class:"column is-6"},we=m("label",null,"Appointment Date & Time",-1),Ae=["value","disabled"],Re={key:0,class:"help has-text-warn"},je=[D(" If you select "),m("span",{class:"bold"},"Appointment Date & Time ",-1),D(" the system will automatically create "),m("span",{class:"bold"},"Orientation Room",-1),D(" and Appointement status will be "),m("span",{class:"bold"},"Wait to Orientation",-1),D(". ")],Be=m("label",null,"Note",-1),Pe=["disabled"],Ye={key:0,class:"help has-text-danger"},$e=m("br",null,null,-1),We=m("br",null,null,-1),Me=m("br",null,null,-1),Ue=m("br",null,null,-1),Le=m("br",null,null,-1),qe=m("br",null,null,-1),Fe=m("br",null,null,-1),He=m("br",null,null,-1),Ge=m("br",null,null,-1),Ke=D("Create Orientation"),Xe=D("Save Orientation");d();var ze=u({props:{openModal:{type:Boolean,required:!0,default:!1},data:{type:Object,default:void 0},orientInfo:{type:Object,default:()=>{}},isEdit:{type:Boolean,required:!1,default:!1},isCreate:{type:Boolean,required:!1,default:!1},isFromPartner:{type:Boolean,required:!1,default:!1},validation:{type:Object,default:()=>{}},batchId:{type:Number,required:!1}},emits:["toggle-close","on-change","on-create"],setup(n,{emit:i}){const o=n,{getStudents:s,getStudentPackageItems:d,getAdmins:u,getStudentsInBatch:r}=R(),B=g(o.validation),P=y((()=>{var e,a,t;return(null==(e=o.data)?void 0:e.useRoom)?(null==(a=o.data)?void 0:a.useRoom)===H.SPACE_TIGER?"Space tiger (twilio)":(null==(t=o.data)?void 0:t.useRoom)===H.TOKBOX?"Space5 (Tokbox)":"Space5 (Whereby)":"None"})),Y=y((()=>{var e;return(null==(e=o.data)?void 0:e.useRoom)===H.WHEREBY}));_((()=>o.validation),(()=>B.value=o.validation));const $=e=>{var a;(null==(a=B.value)?void 0:a[e])&&delete B.value[e]},W={id:0,package:{id:0,packageName:"Test Orientation"}},M=g([W]);_((()=>{var e;return null==(e=o.orientInfo)?void 0:e.studentId}),(async()=>{var e,a;if(null==(e=o.orientInfo)?void 0:e.studentId){const e=await d(null==(a=o.orientInfo)?void 0:a.studentId);M.value=[W].concat(e)}})),_((()=>{var e;return null==(e=o.orientInfo)?void 0:e.datetime}),(()=>{var e;o.orientInfo&&!(null==(e=o.orientInfo)?void 0:e.datetime)?(o.orientInfo.appointStatus=q.NONE,o.orientInfo.datetime=void 0):o.orientInfo&&o.orientInfo.datetime&&(o.orientInfo.appointStatus=q.DONE)})),_((()=>{var e;return null==(e=o.orientInfo)?void 0:e.appointStatus}),(()=>{o.orientInfo&&o.orientInfo.appointStatus==q.NONE?o.orientInfo.datetime=void 0:o.orientInfo&&o.orientInfo.appointStatus==q.DONE&&(o.orientInfo.datetime=S(o.orientInfo.datetime).set({minute:0,second:0,millisecond:0}).toDate())}));const U=()=>{$("studentId"),$("packageItemId"),$("packageItemId"),$("userId"),$("appointStatus"),$("datetime"),i("toggle-close")};return(o,d)=>{var g,y;const _=e,S=a,R=t,W=O("Multiselect"),L=K,q=O("v-date-picker"),F=l,H=A;return c(),p(H,{open:n.openModal,title:n.isEdit?`Edit Orientation Info: ID ${null==(g=n.data)?void 0:g.id}`:n.isCreate?"Create Orientation":`View Detail Orientation: ID ${null==(y=n.data)?void 0:y.id}`,size:"medium",actions:"right",onClose:U},{content:v((()=>{var e,a,t,l,i,o,g,y;return[m("form",X,[n.isFromPartner?k("",!0):(c(),p(R,{key:0,class:"is-autocomplete-select"},{default:v((()=>{var e;return[z,h(S,{"has-error":!!(null==(e=B.value)?void 0:e.studentId),icon:"feather:user"},{default:v((()=>{var e,a,t,l,i,o;return[n.data?(c(),b("input",{key:0,value:`(${null==(a=null==(e=n.data)?void 0:e.student)?void 0:a.id}) ${null==(l=null==(t=n.data)?void 0:t.student)?void 0:l.fullnameTh}`,type:"text",class:"input",placeholder:"Student Name",disabled:""},null,8,J)):k("",!0),I(h(_,{modelValue:n.orientInfo.studentId,"onUpdate:modelValue":[d[0]||(d[0]=e=>n.orientInfo.studentId=e),d[1]||(d[1]=e=>$("studentId"))],"callback-search":C(s),searchable:!0,"label-by":"fullnameTh","more-label-by":"fullnameEn","value-prop":"id",placeholder:"Select student (Search by name)"},{singlelabel:v((({value:e})=>[m("div",Q,f(C(j)(e)),1)])),option:v((({option:e})=>[m("span",Z,f(C(j)(e)),1)])),_:1},8,["modelValue","callback-search"]),[[E,n.isCreate]]),I(m("p",{class:"help has-text-danger"},f(null==(i=B.value)?void 0:i.studentId),513),[[E,null==(o=B.value)?void 0:o.studentId]])]})),_:1},8,["has-error"])]})),_:1})),n.isFromPartner?k("",!0):(c(),p(R,{key:1,class:"is-autocomplete-select"},{default:v((()=>{var e;return[ee,h(S,{"has-error":!!(null==(e=B.value)?void 0:e.packageItemId),icon:"feather:package"},{default:v((()=>{var e,a,t,l,i,o,s;return[n.data?(c(),b("input",{key:0,value:""+((null==(e=n.data)?void 0:e.package)?`(${null==(t=null==(a=n.data)?void 0:a.package)?void 0:t.id}) ${null==(i=null==(l=n.data)?void 0:l.package)?void 0:i.packageName}`:"Test Orientation"),type:"text",class:"input",placeholder:"Package Name",disabled:""},null,8,ae)):k("",!0),I(h(W,{modelValue:n.orientInfo.packageItemId,"onUpdate:modelValue":[d[2]||(d[2]=e=>n.orientInfo.packageItemId=e),d[3]||(d[3]=e=>$("packageItemId"))],searchable:!1,options:M.value,placeholder:"Select student's package","track-by":"id","value-prop":"id"},{singlelabel:v((({value:e})=>{var a,t;return[m("div",te,f(""+(e.id?`(Package Item ID: ${e.id}) (${null==(a=e.package)?void 0:a.id})`:""))+" "+f(null==(t=e.package)?void 0:t.packageName),1)]})),option:v((({option:e})=>{var a,t;return[m("span",le,f(""+(e.id?`(Package Item ID: ${e.id}) (${null==(a=e.package)?void 0:a.id})`:""))+" "+f(null==(t=e.package)?void 0:t.packageName),1)]})),_:1},8,["modelValue","options"]),[[E,n.isCreate]]),I(m("p",{class:"help has-text-danger"},f(null==(o=B.value)?void 0:o.packageItemId),513),[[E,null==(s=B.value)?void 0:s.packageItemId]])]})),_:1},8,["has-error"])]})),_:1})),n.isFromPartner&&n.batchId?(c(),p(R,{key:2,class:"is-autocomplete-select"},{default:v((()=>[ne,h(S,{icon:"feather:users"},{default:v((()=>[h(W,{modelValue:n.orientInfo.studentIds,"onUpdate:modelValue":d[5]||(d[5]=e=>n.orientInfo.studentIds=e),mode:"tags",filterResults:!1,delay:0,searchable:!0,"can-clear":!0,"create-tag":!1,options:e=>C(r)(e,n.batchId),"tag-by":"id","value-prop":"id",label:"",placeholder:"Select Student"},{tag:v((({option:e,handleTagRemove:a,disabled:t})=>[m("div",ie,[D(f(C(j)(e))+" ",1),t?k("",!0):(c(),b("span",{key:0,class:"multiselect-tag-remove",onClick:d[4]||(d[4]=x((()=>{}),["prevent"])),onMousedown:x((t=>a(e,t)),["prevent","stop"])},se,40,oe))])])),option:v((({option:e})=>[m("span",de,f(C(j)(e)),1)])),_:1},8,["modelValue","options"]),ue])),_:1})])),_:1})):k("",!0),h(R,{class:"is-autocomplete-select"},{default:v((()=>{var e;return[re,h(S,{"has-error":!!(null==(e=B.value)?void 0:e.userId),icon:"feather:user"},{default:v((()=>{var e,a,t,l,i,o,s;return[n.isCreate||n.isEdit?k("",!0):(c(),b("input",{key:0,value:""+((null==(e=n.data)?void 0:e.admin)?`(${null==(t=null==(a=n.data)?void 0:a.admin)?void 0:t.id}) ${null==(i=null==(l=n.data)?void 0:l.admin)?void 0:i.fullname}`:"-"),type:"text",class:"input",placeholder:"Operator",disabled:""},null,8,ce)),I(h(_,{modelValue:n.orientInfo.userId,"onUpdate:modelValue":[d[6]||(d[6]=e=>n.orientInfo.userId=e),d[7]||(d[7]=e=>$("userId"))],"callback-search":C(u),searchable:!0,"label-by":"fullname","value-prop":"id",placeholder:"Select admin (Search by fullname)"},null,8,["modelValue","callback-search"]),[[E,n.isCreate||n.isEdit]]),I(m("p",{class:"help has-text-danger"},f(null==(o=B.value)?void 0:o.userId),513),[[E,null==(s=B.value)?void 0:s.userId]])]})),_:1},8,["has-error"])]})),_:1}),m("div",pe,[h(R,{class:"is-autocomplete-select column"},{default:v((()=>[ve,h(S,{icon:"feather:briefcase"},{default:v((()=>{var e,a;return[m("div",me,[I(m("select",{"onUpdate:modelValue":d[8]||(d[8]=e=>n.orientInfo.appointStatus=e),disabled:!n.isCreate&&!n.isEdit,onSelect:d[9]||(d[9]=e=>$("appointStatus"))},Ie,40,fe),[[N,n.orientInfo.appointStatus]])]),I(m("p",{class:"help text-dangerr"},f(null==(e=B.value)?void 0:e.appointStatus),513),[[E,null==(a=B.value)?void 0:a.appointStatus]])]})),_:1}),"none"===n.orientInfo.appointStatus&&(n.isEdit||n.isCreate)?(c(),b("p",be,he)):k("",!0)])),_:1}),n.data?(c(),p(R,{key:0,class:"is-autocomplete-select column"},{default:v((()=>[ke,h(S,{icon:"feather:headphones"},{default:v((()=>{var e,a;return[m("div",ge,[I(m("select",{"onUpdate:modelValue":d[10]||(d[10]=e=>n.orientInfo.orientedStatus=e),disabled:!n.isCreate&&!n.isEdit},_e,8,ye),[[N,n.orientInfo.orientedStatus]])]),I(m("p",{class:"help has-text-danger"},f(null==(e=B.value)?void 0:e.appointStatus),513),[[E,null==(a=B.value)?void 0:a.appointStatus]])]})),_:1})])),_:1})):k("",!0)]),n.data&&!n.isEdit?(c(),b("div",Se,[m("div",Oe,[m("h4",Ee,[Ce,m("span",De,f(C(P)),1)])]),m("div",xe,[h(L,{"is-default":!C(Y),label:"Observation link",link:null==(a=null==(e=n.data)?void 0:e.link)?void 0:a.observeLink},null,8,["is-default","link"])]),m("div",Ne,[h(L,{"is-default":C(Y),label:"Observation link (whereby)",link:null==(l=null==(t=n.data)?void 0:t.link)?void 0:l.observeLinkWhereBy},null,8,["is-default","link"])]),m("div",Te,[h(L,{"is-default":!C(Y),label:"Student link",link:null==(o=null==(i=n.data)?void 0:i.link)?void 0:o.studentLink},null,8,["is-default","link"])]),m("div",Ve,[h(L,{"is-default":C(Y),label:"Student link (whereby)",link:null==(y=null==(g=n.data)?void 0:g.link)?void 0:y.studentLinkWhereBy},null,8,["is-default","link"])])])):k("",!0),h(q,{modelValue:n.orientInfo.datetime,"onUpdate:modelValue":d[12]||(d[12]=e=>n.orientInfo.datetime=e),is24hr:"","model-config":{type:"string",mask:"YYYY-MM-DD HH:mm"},masks:{inputDateTime24hr:"DD/MM/YYYY HH:mm"},mode:"dateTime",color:"orange","minute-increment":30,popover:{visibility:n.isEdit||n.isCreate?"click":""}},{default:v((({inputValue:e,inputEvents:a})=>[h(R,null,{default:v((()=>{var t,l,i;return[we,h(S,{icon:"feather:calendar","has-error":!!(null==(t=B.value)?void 0:t.datetime)},{default:v((()=>[m("input",T({class:"input",type:"text",placeholder:"Select Date & Time",value:e,disabled:!n.isEdit&&!n.isCreate},V(a),{onClick:d[11]||(d[11]=e=>$("datetime"))}),null,16,Ae)])),_:2},1032,["has-error"]),I(m("p",{class:"help has-text-danger"},f(null==(l=B.value)?void 0:l.datetime),513),[[E,null==(i=B.value)?void 0:i.datetime]])]})),_:2},1024),n.isEdit||n.isCreate?(c(),b("p",Re,je)):k("",!0)])),_:1},8,["modelValue","popover"]),h(R,null,{default:v((()=>[Be,h(S,{icon:"feather:edit"},{default:v((()=>{var e,a;return[I(m("textarea",{"onUpdate:modelValue":d[13]||(d[13]=e=>n.orientInfo.note=e),type:"textarea",class:"textarea is-primary-focus",rows:"10",placeholder:"Note",disabled:!n.isEdit&&!n.isCreate},null,8,Pe),[[w,n.orientInfo.note]]),(null==(e=B.value)?void 0:e.note)?(c(),b("p",Ye,f(null==(a=B.value)?void 0:a.note),1)):k("",!0)]})),_:1})])),_:1}),$e,We,Me,Ue,Le,qe,Fe,He,Ge])]})),action:v((()=>[I(h(F,{color:"primary",raised:"",onClick:d[14]||(d[14]=e=>i("on-create",n.orientInfo))},{default:v((()=>[Ke])),_:1},512),[[E,n.isCreate]]),I(h(F,{color:"primary",raised:"",onClick:d[15]||(d[15]=e=>i("on-change",n.orientInfo))},{default:v((()=>[Xe])),_:1},512),[[E,n.isEdit]])])),_:1},8,["open","title"])}}});ze.__scopeId="data-v-39e3889a";export{q as A,U as O,ze as _};
