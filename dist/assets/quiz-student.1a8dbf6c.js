var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,r=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&d(e,a,t[a]);if(i)for(var a of i(t))s.call(t,a)&&d(e,a,t[a]);return e},n=(e,i)=>t(e,a(i));import{_ as o}from"./QuizStudentsForm.vue_vue&type=script&setup=true&lang.ad4ba8a2.js";import{m as l,e as c,c as p}from"./index.d7dc1ff6.js";import{_ as m}from"./VModal.31b4f4ba.js";import{_ as z}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{_ as S}from"./DropdownAction.vue_vue&type=script&setup=true&lang.ced09d37.js";import{_ as v}from"./Datatable.aae3ef08.js";import{u as f}from"./useGuardStudent.237f12b5.js";import{A as b,q as y,D as g,k as q,Y as j,ae as Q,d as k,z as I,E as h,o as _,e as D,x as O,F as C,h as P,g as w,y as M,i as E,G as x,t as A,H as V,I as Y,p as F,a as L}from"./vendor.1c8b4573.js";import{u as R}from"./useStudentApi.e8de2a80.js";import{u as B}from"./usePaginationRoute.780ca235.js";import{u as G}from"./useNotyf.ddf08f06.js";import{t as N}from"./date.helper.6ae3fc87.js";import{q as H,d as T}from"./quiz.helper.1fae50f8.js";import"./ValidateMessageBox.vue_vue&type=script&setup=true&lang.ac2d19e3.js";import"./VMessage.vue_vue&type=script&setup=true&lang.1bdbe413.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VSwitchSegment.vue_vue&type=script&setup=true&lang.43f673db.js";import"./SelectOption.vue_vue&type=script&setup=true&lang.934e0be4.js";import"./useOptionApi.f4dc99b9.js";import"./quiz.enum.fc8b95fc.js";import"./student.helper.13430dac.js";import"./student.enum.ad6af513.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./index.ec15dc7d.js";import"./lodash.0a1ccad5.js";F("data-v-439c6ec8");const U={class:"account-box"},J={class:"modal-form"},K=x("Create"),W=x("Edit"),X={class:"header"},Z=P("h2",{class:"title is-5 is-narrow is-bolder"},"Quiz Student",-1),$=x("Create"),ee={key:0},te={key:1,class:"light-text"},ae={key:0},ie={key:1,class:"light-text"},ue=["onClick"],se=[P("div",{class:"icon"},[P("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),P("div",{class:"meta"},[P("span",null,"Edit"),P("span",null,"Edit Quiz Student")],-1)];L();var de=k({setup(e){const{quizStudent:t,header:a,isOpenAddQuizStudent:i,quiz:u,quizList:s,total:d,validate:k,currentStudentQuiz:F,canSubmitQuiz:L,openModalCreateQuizStudent:de,createQuizStudent:re,openModalEditQuizStudent:ne,closeModal:oe,editQuizStudent:le}=function(){const e=G(),t=b().params.id,a=y({quizStudent:[],isOpenAddQuizStudent:!1,quizList:[],total:0,validate:{},currentStudentQuiz:void 0,quiz:{studentId:0,quizId:0,productId:void 0,name:"แบบทดสอบบทเรียน",startDate:g().toISOString(),endDate:g().add(7,"days").toISOString()}}),i=q((()=>!!a.quiz.quizId)),{currentPage:u,perPage:s,search:d}=B(),{getQuizStudentByStudentId:o,createQuizStudentApi:p,editQuizStudentApi:m}=R(),z=async()=>{const e=await o({currentPage:u,perPage:s,search:d,studentId:+t});a.total=(null==e?void 0:e.total)||0,a.quizStudent=(null==e?void 0:e.data)||[]},S=()=>{a.isOpenAddQuizStudent=!1,a.currentStudentQuiz=void 0,a.quiz={studentId:+t,quizId:0,productId:void 0,name:"แบบทดสอบบทเรียน",startDate:g().toISOString(),endDate:g().add(7,"days").toISOString()},a.validate={}};return j((()=>{z()})),n(r({},Q(a)),{canSubmitQuiz:i,header:[{key:"name",label:"Name"},{key:"startDate",label:"StartDate"},{key:"endDate",label:"EndDate"},{key:"quizSubmitted",label:"Quiz Submitted",isRaw:!0},{key:"quizSubmits",label:"Score",isCenter:!0},{key:"status",label:"Status",isRaw:!0}],openModalCreateQuizStudent:()=>{a.isOpenAddQuizStudent=!0},createQuizStudent:async()=>{if(i.value){const i=await p(n(r({},a.quiz),{studentId:+t}));l(i)?(e.success("success!"),S(),z()):"object"==typeof i.message?a.validate=i.message:e.error(c(i.message))}else e.error("Please select quiz")},editQuizStudent:async()=>{if(i.value&&a.currentStudentQuiz){const i=await m(n(r({},a.quiz),{studentId:+t,quizStudentId:a.currentStudentQuiz.id}));l(i)?(e.success("success!"),S(),z()):"object"==typeof i.message?a.validate=i.message:e.error(c(i.message))}else e.error("Please select quiz")},openModalEditQuizStudent:e=>{a.currentStudentQuiz=e,a.quiz={quizId:a.currentStudentQuiz.quiz.id,productId:a.currentStudentQuiz.productId,name:a.currentStudentQuiz.name,startDate:g(a.currentStudentQuiz.startDate).toISOString(),endDate:g(a.currentStudentQuiz.endDate).toISOString()}},closeModal:S})}(),{quiz:ce}=f(),pe=N,me=I("studentInfo");return(e,s)=>{const r=o,n=p,l=m,c=h("RouterLink"),f=z,b=S,y=v;return _(),D("div",U,[O(l,{open:w(i)||!!w(F),title:w(i)?"Create Quiz Student":"Edit Quiz Student",size:"medium",actions:"right","cancel-label":"Close",onClose:w(oe)},{content:C((()=>[P("form",J,[w(i)||w(F)?(_(),M(r,{key:0,"quiz-student":w(u),"student-info":w(me),validate:w(k),"onUpdate:quizStudent":s[0]||(s[0]=e=>u.value=e)},null,8,["quiz-student","student-info","validate"])):E("",!0)])])),action:C((()=>[w(i)?(_(),M(n,{key:0,color:"primary",disabled:!w(L),onClick:w(re)},{default:C((()=>[K])),_:1},8,["disabled","onClick"])):E("",!0),w(F)?(_(),M(n,{key:1,color:"primary",disabled:!w(L),onClick:w(le)},{default:C((()=>[W])),_:1},8,["disabled","onClick"])):E("",!0)])),_:1},8,["open","title","onClose"]),P("div",X,[Z,w(ce).canCreate?(_(),M(n,{key:0,color:"primary",onClick:w(de)},{default:C((()=>[$])),_:1},8,["onClick"])):E("",!0)]),O(y,{headers:w(a),data:w(t),"can-searchable":!0,total:w(d),"is-action":w(ce).canEdit},{startDate:C((({value:e})=>[x(A(w(pe)(e,"DD/MM/YYYY")),1)])),endDate:C((({value:e})=>[x(A(w(pe)(e,"DD/MM/YYYY")),1)])),quizSubmitted:C((({value:e})=>[e.quizSubmits.length>0?(_(),D("div",ee,[(_(!0),D(V,null,Y(e.quizSubmits,(t=>(_(),M(c,{key:t,to:{name:"quizzes-submits-:id",params:{id:t.id}},class:"link"},{default:C((()=>[x(" ("+A(t.id)+") "+A(e.quiz.name),1)])),_:2},1032,["to"])))),128))])):(_(),D("div",te,A(e.quiz.name),1))])),quizSubmits:C((({value:e})=>[e.length>0?(_(),D("ul",ae,[(_(!0),D(V,null,Y(e,(e=>(_(),D("li",{key:e.id},A(e.score>0?e.score:"-"),1)))),128))])):(_(),D("div",ie,"-"))])),status:C((({value:e})=>[(_(!0),D(V,null,Y(e.quizSubmits,(e=>(_(),D("div",{key:e.id,class:"is-flex gap-2"},[O(f,{color:w(H)(e.status),label:w(T)(e.status),outlined:""},null,8,["color","label"])])))),128))])),action:C((({value:e})=>[O(b,null,{content:C((()=>[w(ce).canEdit?(_(),D("a",{key:0,role:"menuitem",class:"dropdown-item is-media",onClick:t=>w(ne)(e)},se,8,ue)):E("",!0)])),_:2},1024)])),_:1},8,["headers","data","total","is-action"])])}}});de.__scopeId="data-v-439c6ec8";export default de;
