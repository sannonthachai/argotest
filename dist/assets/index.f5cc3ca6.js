var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i;import{e as r,p as l,c,h as d}from"./index.d7dc1ff6.js";import{_ as m}from"./Datatable.aae3ef08.js";import{_ as p}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{_ as u}from"./VModal.31b4f4ba.js";import{b as v,A as f,q as g,Y as y,ae as b,N as P,d as h,X as j,E as k,o as w,e as _,x as R,au as x,g as C,F as A,h as I,y as O,i as D,t as V,p as L,G as E,a as F}from"./vendor.1c8b4573.js";import{u as N}from"./usePermissionApi.9e405600.js";import{u as T}from"./usePaginationRoute.780ca235.js";import{u as G}from"./useGuardRole.ebe65201.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";const H=new P({duration:2e3,position:{x:"center",y:"top"}});function S(){const{getRolePagination:e,deleteRole:l}=N(),{currentPage:c,perPage:d,search:m}=T();v(),f();const p=g({rolePagination:{currentPage:1,data:[],nextPage:void 0,perPage:10,previousPage:void 0,total:0,totalPage:1},isLoading:!1,deleteActionItem:void 0}),u=async()=>{p.isLoading=!0;const a=await e({currentPage:c,perPage:d,search:m});p.rolePagination=a,p.isLoading=!1};return y((()=>{u()})),P=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(i)for(var t of i(a))o.call(a,t)&&n(e,t,a[t]);return e})({},b(p)),a(P,t({roleTableHeaders:[{key:"id",label:"ID"},{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"teamName",label:"Team"}],onDeleteRole:async()=>{var e;if(null==(e=p.deleteActionItem)?void 0:e.id){const{status:e,message:a}=await l(p.deleteActionItem.id);200===e?(await u(),H.open({type:"success",message:"Role was removed!"})):H.open({message:r(a),type:"error"})}p.deleteActionItem=void 0}}));var P}L("data-v-cb80b47a");const $={class:"page-content-inner"},q={class:"is-flex is-justify-content-flex-end pt-4"},B=E(" Create "),M={key:0,class:"is-flex is-justify-content-flex-end"},W=E(" Actions "),X=I("div",{class:"icon"},[I("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Y=I("div",{class:"meta"},[I("span",null,"View"),I("span",null,"View details")],-1),z=I("div",{class:"icon"},[I("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),J=I("div",{class:"meta"},[I("span",null,"Edit"),I("span",null,"Edit this item")],-1),K={key:2,class:"dropdown-divider"},Q=["onClick"],U=[I("div",{class:"icon"},[I("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),I("div",{class:"meta"},[I("span",null,"Remove"),I("span",null,"Remove from list")],-1)],Z={class:"text-center"},ee=E(" Please make sure that you are going to remove the role named "),ae=E(". "),te=E("Confirm");F();var ie=h({setup(e){l.value="Role Information",j({title:"Whitehouse: Role & Permission"});const{isLoading:a,rolePagination:t,deleteActionItem:i,roleTableHeaders:s,onDeleteRole:o}=S(),{capabilities:n,haveActionButton:r}=G();return(e,l)=>{const v=c,f=k("RouterLink"),g=d,y=m,b=p,P=u;return w(),_("div",$,[R(y,{"is-loading":C(a),headers:C(s),data:C(t).data,total:C(t).total,"is-action":C(r)},x({action:A((({value:e})=>[C(r)?(w(),_("div",M,[R(g,{spaced:"",right:""},{button:A((({toggle:e})=>[R(v,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:A((()=>[W])),_:2},1032,["onClick"])])),content:A((()=>[C(n).canView?(w(),O(f,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"permissions-roles-:id",params:{id:`${e.id}`}}},{default:A((()=>[X,Y])),_:2},1032,["to"])):D("",!0),C(n).canEdit?(w(),O(f,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"permissions-roles-:id-edit",params:{id:`${e.id}`}}},{default:A((()=>[z,J])),_:2},1032,["to"])):D("",!0),C(n).canDelete?(w(),_("hr",K)):D("",!0),C(n).canDelete?(w(),_("a",{key:3,role:"menuitem",class:"dropdown-item is-media",onClick:a=>i.value=e},U,8,Q)):D("",!0)])),_:2},1024)])):D("",!0)])),_:2},[C(n).canCreate?{name:"custom-right",fn:A((()=>[I("div",q,[R(v,{color:"primary",icon:"fas fa-plus",to:"roles/create"},{default:A((()=>[B])),_:1})])]))}:void 0]),1032,["is-loading","headers","data","total","is-action"]),R(P,{open:void 0!==C(i),title:"Confirm Remove",actions:"center",onClose:l[0]||(l[0]=e=>i.value=void 0)},{content:A((()=>[R(b,{title:"Are you sure ?"}),I("p",Z,[ee,I("b",null,'"'+V(C(i)&&C(i).name)+'"',1),ae])])),action:A((()=>[R(v,{color:"primary",raised:"",onClick:C(o)},{default:A((()=>[te])),_:1},8,["onClick"])])),_:1},8,["open"])])}}});ie.__scopeId="data-v-cb80b47a";export default ie;
