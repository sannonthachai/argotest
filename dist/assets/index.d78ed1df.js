import{p as e,c as a,h as s}from"./index.d7dc1ff6.js";import{_ as i}from"./Datatable.aae3ef08.js";import{d as t,X as o,Y as n,E as d,o as c,e as l,x as u,au as r,g as p,F as m,G as f,t as g,H as v,I as k,h,i as y,D as b,K as j,V as C,y as _,p as P,a as D}from"./vendor.1c8b4573.js";import{u as V}from"./useDiscountCodeTable.0c775daa.js";import{u as w}from"./useGuardDiscountCode.24f2dbd1.js";import"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import"./VFlexPagination.86ce707c.js";import"./search-4-dark.fb3880a5.js";import"./usePaginationRoute.780ca235.js";import"./useDiscountCodeApi.241c4e94.js";import"./useOptionApi.f4dc99b9.js";import"./quiz.enum.fc8b95fc.js";import"./useNotyf.ddf08f06.js";import"./discount-code.enum.6e9d29f6.js";P("data-v-216b10b3");const x={class:"page-content-inner"},F=f("Create"),A={key:0},L={key:0},T=["onClick"],Y=h("p",null,"ไม่สามารถใช้ได้กับ Package",-1),E=f(" Actions "),I=h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),M=h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View details")],-1),N=h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),$=h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit this coupon")],-1);D();var q=t({setup(t){e.value="Coupon Management",o({title:"Whitehouse: Codes"});const{fetchAllDiscountCode:P,displaydiscountType:D,displayInstallment:q,discountCodeTableHeaders:G,discountCodeList:H,viewDetail:R,isLoading:S,total:z}=V(),{capabilities:B,haveActionButton:K}=w();return n((()=>{P()})),(e,t)=>{const o=a,n=d("RouterLink"),P=s,V=i;return c(),l("div",x,[u(V,{headers:p(G),data:p(H),total:p(z),"search-placeholder":"search by id, code, expire date, packages name packages id","is-action":p(B).canViewList,"is-loading":p(S)},r({partner:m((({value:e})=>[f(g(null==e?void 0:e.partnerName),1)])),couponPackages:m((({value:e})=>[e.discount?(c(),l("h6",A,g(e.discount)+" "+g(p(D)(e.discountType)),1)):(c(!0),l(v,{key:1},k(e.couponPackages,((a,s)=>(c(),l("ul",{key:`addon-${a.id}`,class:"addon-list"},[s<5?(c(),l("li",L,[f(" ["+g(a.packageId)+"] "+g(a.packageName)+" ",1),h("span",null,"("+g(a.discount)+" "+g(p(D)(a.discountType))+") ",1)])):y("",!0),5===s?(c(),l("a",{key:1,class:"link",onClick:a=>p(R)(e.id)},"View more",8,T)):y("",!0)])))),128))])),used:m((({value:e})=>[f(g(e.usedCoupons)+"/"+g(e.availableCoupons),1)])),expireDate:m((({value:e})=>[f(g(p(b)(e).format("DD MMM YYYY")),1)])),notForPackage:m((({value:e})=>[j(h("h2",null,[Y,(c(!0),l(v,null,k(e.notForPackage,(e=>(c(),l("span",{key:e},g(e)+"  ",1)))),128))],512),[[C,e.notForPackage]]),j(h("h6",null,"บังคับใช้ทุก Package",512),[[C,"0"===e.requireSomePackage]])])),installment:m((({value:e})=>[f(g(p(q)(e)),1)])),action:m((({value:e})=>[u(P,{spaced:"",right:""},{button:m((({toggle:e})=>[u(o,{icon:"feather:more-vertical",class:"is-trigger",onClick:e},{default:m((()=>[E])),_:2},1032,["onClick"])])),content:m((()=>[p(B).canView?(c(),_(n,{key:0,role:"menuitem",class:"dropdown-item is-media",to:{name:"codes-discount-codes-:id",params:{id:`${e.id}`}}},{default:m((()=>[I,M])),_:2},1032,["to"])):y("",!0),p(B).canEdit?(c(),_(n,{key:1,role:"menuitem",class:"dropdown-item is-media",to:{name:"codes-discount-codes-:id-edit",params:{id:`${e.id}`}}},{default:m((()=>[N,$])),_:2},1032,["to"])):y("",!0)])),_:2},1024)])),_:2},[p(B).canCreate?{name:"custom-right",fn:m((()=>[u(o,{color:"primary",icon:"feather:plus",class:"is-flex justify-content-end",to:{name:"codes-discount-codes-create"}},{default:m((()=>[F])),_:1})]))}:void 0]),1032,["headers","data","total","is-action","is-loading"])])}}});q.__scopeId="data-v-216b10b3";export default q;
