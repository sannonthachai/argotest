var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{u as n,d as c,i as l,e as p}from"./index.d7dc1ff6.js";import{k as d,q as O,A as u,b as m,ae as y}from"./vendor.1c8b4573.js";import{u as C}from"./useNotyf.ddf08f06.js";import{u as f}from"./usePaginationRoute.780ca235.js";function g(){const e=d((()=>({canView:n(["VIEW_CLOSE_OPERATION"]),canCreate:n(["CREATE_CLOSE_OPERATION"]),canEdit:n(["EDIT_CLOSE_OPERATION"]),canDelete:n(["DELETE_CLOSE_OPERATION"])}))),t=d((()=>e.value.canView&&e.value.canEdit&&e.value.canDelete));return{capabilities:e,haveActionButton:t}}function b(){const e=O({closeOperationList:[],closeOperationDetail:void 0,isLoading:!0,total:0,validate:{},confirmRemoveId:void 0}),{createCloseOperation:n,getAllCloseOperation:g,deleteCloseOperation:b,getCloseOperationById:v,editCloseOperationApi:E}=function(){const e=c();return{getAllCloseOperation:async t=>{const a=await e.get("/CloseOperations",{params:t});return l(a)},getCloseOperationById:async t=>{const a=await e.get(`/CloseOperations/${t}`);return l(a)},createCloseOperation:t=>e.post("/CloseOperations",t),deleteCloseOperation:t=>e.delete(`/CloseOperations/${t}`),editCloseOperationApi:(t,a)=>e.put(`/CloseOperations/${t}`,a)}}(),I=u(),w=m(),{perPage:P,currentPage:D,search:j}=f(),A=C(),R=I.params.id,h=d((()=>"#edit"===I.hash)),L=async()=>{e.isLoading=!0;const t=await g({currentPage:D,perPage:P,search:j});e.closeOperationList=t.data,e.total=t.total,e.isLoading=!1};return T=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&i(e,a,t[a]);return e})({},y(e)),t(T,a({isEdit:h,createCloseOperation:async t=>{const a=await n(t);201===a.status?(A.success("success!"),e.validate={},w.push({name:"settings-close-operations"})):"object"==typeof a.message?e.validate=a.message:A.error(p(a.message))},closeOperationTableHeaders:[{key:"id",label:"ID"},{key:"description",label:"Description"},{key:"startDate",label:"Start Date"},{key:"endDate",label:"End Date"},{key:"studentCountry",label:"Country"},{key:"createdBy",label:"Creator",isRaw:!0}],editCloseOperation:async t=>{const a=await E(+R,t);200===a.status?(A.success("success!"),e.validate={},w.push({name:"settings-close-operations-:id",params:{id:R}})):"object"==typeof a.message?e.validate=a.message:A.error(p(a.message))},deleteCloseOperation:async()=>{if(!e.confirmRemoveId)return;const t=await b(e.confirmRemoveId);200===t.status?(A.success("success!"),e.confirmRemoveId=void 0,L()):A.error(p(t.message))},fetchCloseOperationById:async()=>{const t=await v(+R);e.closeOperationDetail=t},fetchAllCloseOperation:L}));var T}export{g as a,b as u};
