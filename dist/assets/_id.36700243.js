var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,a=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&u(e,i,t[i]);if(s)for(var i of s(t))n.call(t,i)&&u(e,i,t[i]);return e},l=(e,s)=>t(e,i(s));import{_ as d}from"./VTag.vue_vue&type=script&setup=true&lang.b31af8ee.js";import{o as r,c,p as m}from"./index.d7dc1ff6.js";import{_ as p}from"./VMessage.vue_vue&type=script&setup=true&lang.1bdbe413.js";import{_ as b,a as S}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{u as v}from"./useGuardQuiz.5f9ebd22.js";import{m as y}from"./index.ec15dc7d.js";import{q as f,A as q,b as h,k as z,r as g,ae as Q,d as x,E as I,o as k,e as w,g as C,x as O,F as V,i as _,h as D,t as E,ao as j,ap as R,y as L,G as N,p as T,a as $,n as B,Y as U,H as A,I as M,K as H,V as Y,ai as P,T as K,X as F}from"./vendor.1c8b4573.js";import{t as G}from"./date.helper.6ae3fc87.js";import{c as W,w as X}from"./quiz.helper.1fae50f8.js";import{a as J,Q as Z,F as ee,A as te}from"./quiz.enum.fc8b95fc.js";import{u as ie}from"./useQuizApi.3259bcc4.js";import{u as se}from"./useStudentApi.e8de2a80.js";import{e as oe,d as ne}from"./student.helper.13430dac.js";import{_ as ue}from"./VCard.vue_vue&type=script&setup=true&lang.27754e87.js";import{_ as ae}from"./VCardAdvanced.vue_vue&type=script&setup=true&lang.00e81e62.js";import{_ as le}from"./VLoader.vue_vue&type=script&setup=true&lang.a96d7daf.js";import{_ as de}from"./VPlaceholderSection.vue_vue&type=script&setup=true&lang.35b0ad2a.js";import{_ as re}from"./VModal.31b4f4ba.js";import{_ as ce}from"./ConfirmRemoveModal.3ba4d6d1.js";import{u as me}from"./useNotyf.ddf08f06.js";import"./lodash.0a1ccad5.js";import"./student.enum.ad6af513.js";function pe(){const e=f({id:0,isLoading:!1,quizSubmit:void 0,openQuestionScore:!1,questionScores:[],sections:[],student:void 0,isLoadingQuizSubmitScore:!1,isLoadingQuizSubmitInfo:!1,deleteSubmitSection:{isLoading:!1,deleteSubmitSectionId:0,isOpen:!1,name:""},deleteSubmitQuestion:{isLoading:!1,deleteSubmitQuestionId:0,isOpen:!1,name:""}}),t=q(),i=h(),{getQuizSubmitById:s,updateQuizSubmitById:o,removeQuizSubmitSectionById:n,removeQuizSubmitQuestionById:u,updateQuizSubmitScore:d,getQuizStudent:c}=ie(),{getStudentInfoById:m}=se(),p=z((()=>{var t,i;return!(null==(t=e.quizSubmit)?void 0:t.id)||!(null==(i=e.quizSubmit)?void 0:i.status)})),b=async()=>{e.isLoading=!0;const t=await s(null==e?void 0:e.id);if(e.quizSubmit=t,e.quizSubmit){if(![ee.VERSION1,ee.VERSION2].includes(e.quizSubmit.quiz.formatVersion)){const t=await c(e.quizSubmit.quizId,e.quizSubmit.studentId);e.quizSubmit.endDate=G(null==t?void 0:t.endDate,"YYYY-MM-DD HH:mm")||""}const t=await m(e.quizSubmit.studentId);e.student=t,e.isLoading=!1}},S=z((()=>"#edit"!==t.hash)),v=g(Object.entries(J).map((([e,t])=>({label:e[0].toUpperCase()+e.slice(1).toLowerCase(),value:t})))),x=g(Object.values(Z).map((e=>({label:W(e),value:e})))),I=()=>{e.deleteSubmitSection.deleteSubmitSectionId=0,e.deleteSubmitSection.name="",e.deleteSubmitSection.isOpen=!1},k=()=>{e.deleteSubmitQuestion.deleteSubmitQuestionId=0,e.deleteSubmitQuestion.name="",e.deleteSubmitQuestion.isOpen=!1},w=()=>{e.questionScores.forEach((t=>{e.sections.includes(t.sectionName)||e.sections.push(t.sectionName)}))},C=()=>{e.openQuestionScore=!1},O=()=>{var t,i;const s=e.questionScores.map((e=>e.id)),o=[];return null==(i=null==(t=e.quizSubmit)?void 0:t.quiz.sections)||i.forEach((e=>{var t;null==(t=e.questions)||t.forEach((t=>{var i;s.includes(t.id)||o.push({questionId:t.id,score:t.submitQuestions&&(null==(i=t.submitQuestions[0])?void 0:i.score)||0,questionIndex:t.index,sectionId:e.id,sectionIndex:e.index,type:t.answerType})}))})),o};return l(a({},Q(e)),{readonly:S,disabledSave:p,quizSubmitStatusOption:v,quizSubmitType:x,onSaveQuizSubmitInfo:async()=>{var s,n,u,a,l;const d={id:e.quizSubmit?null==(s=e.quizSubmit)?void 0:s.id:0,status:null==(n=e.quizSubmit)?void 0:n.status,type:null==(u=e.quizSubmit)?void 0:u.type,endDate:(null==(a=e.quizSubmit)?void 0:a.quiz.formatVersion)!==ee.VERSION1?y(null==(l=e.quizSubmit)?void 0:l.endDate).toISOString():void 0};e.isLoadingQuizSubmitInfo=!0;const c=await o(d);r(c,"Update Quiz Submit Info Success!"),e.isLoadingQuizSubmitInfo=!1,i.push({name:"quizzes-submits-:id",params:{id:t.params.id}})},onCloseSubmitSection:I,setSubmitSection:t=>{e.deleteSubmitSection.deleteSubmitSectionId=t.submitSectionId,e.deleteSubmitSection.name=t.name,e.deleteSubmitSection.isOpen=!0},onDeleteSubmitSection:async()=>{e.deleteSubmitSection.isLoading=!0;const t=await n(null==e?void 0:e.id,e.deleteSubmitSection.deleteSubmitSectionId);r(t,"Delete Quiz Submit Section Success!"),I(),await b(),e.deleteSubmitSection.isLoading=!1},onCloseSubmitQuestion:k,setSubmitQuestion:t=>{e.deleteSubmitQuestion.deleteSubmitQuestionId=t.submitQuestionId,e.deleteSubmitQuestion.name=t.name,e.deleteSubmitQuestion.isOpen=!0},onDeleteSubmitQuestion:async()=>{e.deleteSubmitQuestion.isLoading=!0;const t=await u(null==e?void 0:e.id,e.deleteSubmitQuestion.deleteSubmitQuestionId);r(t,"Delete Quiz Submit Question Success!"),k(),await b(),e.deleteSubmitQuestion.isLoading=!1},onUpdateSubmitQuestionScore:async t=>{e.questionScores=[...e.questionScores.filter((e=>e.id!==t.id)),t].sort(((e,t)=>e.index<t.index?-1:1)),w()},onSaveSubmitQuestionScore:()=>{e.openQuestionScore=!0},clearQuestionScore:C,onConfirmSubmitQuestionScore:async()=>{var s,o,n;if(null==(s=e.quizSubmit)?void 0:s.quiz){const s={id:e.id,scores:[...O(),...e.questionScores.map((e=>({questionId:e.id,questionIndex:e.index,score:e.score,type:e.type,sectionId:e.sectionId,sectionIndex:e.sectionIndex})))].sort(((e,t)=>e.questionId<t.questionId?-1:1)),version:null==(o=e.quizSubmit)?void 0:o.quiz.formatVersion,remark:null==(n=e.quizSubmit)?void 0:n.comments},u=await d(s);r(u,"Update Quiz Submit Score Success!"),I(),i.push({name:"quizzes-submits-:id",params:{id:t.params.id}}),C()}},fetchQuizSubmitById:b})}const be={class:"columns is-multiline is-align-items-center"},Se={key:0,class:"column is-12"},ve=N(" Quiz Submit has been "),ye=D("span",{class:"has-text-weight-semibold"},'"APPROVED"',-1),fe=N(" , if you want to change score the status would change to"),qe=D("span",{class:"has-text-weight-semibold"},'"CHECKED"',-1),he={class:"column is-6"},ze=D("h4",{class:"subtitle"},"Quiz Submit Details",-1),ge={class:"is-flex"},Qe=D("span",{class:"has-text-weight-bold"},"Student ",-1),xe={class:"has-text-weight-medium"},Ie={class:"is-flex"},ke=D("span",{class:"has-text-weight-bold"},"Quiz ",-1),we={class:"has-text-weight-medium"},Ce={class:"is-flex"},Oe=D("span",{class:"has-text-weight-bold mr-2"},"Quiz type",-1),Ve={key:0,class:"has-text-weight-bold"},_e={key:1},De={class:"columns mt-2"},Ee={class:"column columns is-multiline is-12"},je={class:"column is-6-widescreen is-12"},Re=D("label",null,"Quiz Submit Type",-1),Le={class:"column is-6-widescreen is-12"},Ne=D("label",null,"Quiz Submit Status",-1),Te={key:0,class:"column is-12"},$e=D("label",null,"End Date",-1),Be=["value","disabled"],Ue={class:"column is-6"},Ae={class:"column is-12 has-text-centered m-auto"},Me=D("h3",{class:"is-size-3 has-text-weight-medium"},"SCORE",-1),He={class:"is-size-1 has-text-weight-bold"},Ye=["innerHTML"],Pe={class:"columns column is-12 is-centered"},Ke=N("Save Details");var Fe=x({props:{quizSubmit:{type:Object,required:!0},questionScores:{type:Object,required:!0},readonly:{type:Boolean,required:!1,default:!1},disabledSave:{type:Boolean,required:!1,default:!1},student:{type:Object,required:!0},isLoading:{type:Boolean,default:!1},version:{type:Number,required:!0}},emits:["update:quizSubmit"],setup(e,{emit:t}){const i=e,{quizSubmit:s}=v(),{quizSubmitStatusOption:o,quizSubmitType:n}=pe(),u=g(i.quizSubmit.status),l=g(oe(i.student)?`(${oe(i.student)})`:""),d=z((()=>i.quizSubmit.quiz.sections&&i.quizSubmit.quiz.sections.map((e=>{var t;return(null==(t=e.questions)?void 0:t.map((e=>{var t;return(null==(t=e.submitQuestions)?void 0:t.length)&&e.submitQuestions[0].score||0})).reduce(((e,t)=>e+t||0)))||0})).reduce(((e,t)=>e+t))));return(r,m)=>{const v=p,y=I("RouterLink"),f=I("Multiselect"),q=b,h=S,z=b,g=S,Q=I("v-date-picker"),x=c;return k(),w("section",be,[u.value===C(J).APPROVED?(k(),w("div",Se,[O(v,{color:"primary"},{default:V((()=>[ve,ye,fe,qe])),_:1})])):_("",!0),D("div",he,[ze,D("div",ge,[Qe,O(y,{to:{name:"students-:id",params:{id:e.quizSubmit.studentId}},target:"_blank",class:"link-profile mx-2"},{default:V((()=>[D("p",xe,E(`(ID:${e.quizSubmit.studentId} ) ${C(ne)(e.student)} ${l.value}`),1)])),_:1},8,["to"])]),D("div",Ie,[ke,O(y,{to:{name:"quizzes-:id",params:{id:e.quizSubmit.quiz.id}},target:"_blank",class:"link-profile mx-2"},{default:V((()=>[D("p",we,E(`(ID:${e.quizSubmit.quiz.id}) ${e.quizSubmit.quiz.name} `),1)])),_:1},8,["to"])]),D("div",Ce,[Oe,e.quizSubmit.quiz.type?(k(),w("p",Ve,E(`${C(W)(e.quizSubmit.quiz.type)}`),1)):(k(),w("p",_e,"-"))]),D("div",De,[D("div",Ee,[D("div",je,[O(h,null,{default:V((()=>[Re,O(q,null,{default:V((()=>[O(f,{modelValue:i.quizSubmit.type,"onUpdate:modelValue":m[0]||(m[0]=e=>i.quizSubmit.type=e),searchable:!0,options:C(n),placeholder:"Quiz Submit Type",delay:0,disabled:i.readonly||![C(ee).VERSION1,C(ee).VERSION3].includes(i.version),"no-options-text":"search..."},null,8,["modelValue","options","disabled","no-options-text"])])),_:1})])),_:1})]),D("div",Le,[O(h,null,{default:V((()=>[Ne,O(q,null,{default:V((()=>[O(f,{modelValue:i.quizSubmit.status,"onUpdate:modelValue":m[1]||(m[1]=e=>i.quizSubmit.status=e),"can-clear":!1,"allow-empty":!1,options:C(o),placeholder:"Quiz Submit Status",delay:0,disabled:i.readonly||![C(ee).VERSION1,C(ee).VERSION3].includes(i.version),"no-options-text":"search..."},null,8,["modelValue","options","disabled","no-options-text"])])),_:1})])),_:1})]),[C(ee).VERSION1,C(ee).VERSION2].includes(i.version)?_("",!0):(k(),w("div",Te,[O(Q,{modelValue:i.quizSubmit.endDate,"onUpdate:modelValue":m[2]||(m[2]=e=>i.quizSubmit.endDate=e),color:"orange","model-config":{type:"string",mask:"YYYY-MM-DD"},masks:{input:"DD/MM/YYYY"},is24hr:"","trim-weeks":"",mode:"date",disabled:e.readonly},{default:V((({inputValue:e,inputEvents:t})=>[O(g,null,{default:V((()=>[$e,O(z,{icon:"feather:calendar"},{default:V((()=>[D("input",j({class:"input",type:"text",value:e,disabled:i.readonly},R(t)),null,16,Be)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","disabled"])]))])])]),D("div",Ue,[D("div",Ae,[Me,D("h1",He,E(`${C(d)} ${i.quizSubmit.maxScore>0?` / ${i.quizSubmit.maxScore}`:""} `),1),[C(J).DOING,C(J).CHECKED,C(J).DONE].includes(u.value)?(k(),w("span",{key:0,innerHTML:C(X)(u.value)},null,8,Ye)):_("",!0)])]),D("div",Pe,[!e.readonly&&C(s).canUpdateInfo&&[C(ee).VERSION1,C(ee).VERSION3].includes(i.version)?(k(),L(x,{key:0,icon:"lnir lnir-save rem-100",color:"primary",raised:"",disabled:e.disabledSave,loading:e.isLoading,onClick:m[3]||(m[3]=e=>t("update:quizSubmit",a({},i.quizSubmit)))},{default:V((()=>[Ke])),_:1},8,["disabled","loading"])):_("",!0)])])}}});const Ge={class:"my-3"},We={controls:""},Xe=["src"],Je=N(" Your browser does not support the audio element. ");var Ze=x({props:{file:{type:String,default:""}},setup:e=>(t,i)=>(k(),w("div",Ge,[D("audio",We,[D("source",{src:e.file},null,8,Xe),Je])]))});T("data-v-0ae72900");const et={key:0},tt=["src"],it={key:1},st={controls:""},ot=["src"],nt=N(" Your browser does not support the audio element. "),ut={key:2,class:"text-choice"},at={key:3,class:"answer-status"},lt=["data-icon"],dt={class:"ml-1"};$();var rt=x({props:{index:{type:Number,default:1},text:{type:String,default:"Answer"},file:{type:String,default:null},type:{type:String,default:"text"},isCorrect:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},setup(e){const t=e,i=z((()=>t.isCorrect&&t.isSelected));return(t,s)=>(k(),w("div",{class:B(["answer-wrapper",[e.isCorrect&&"correct",e.isSelected&&"selected"]])},[D("p",null,E(`${e.index}. `),1),"picture"===e.type&&e.file?(k(),w("div",et,[D("img",{src:e.file},null,8,tt)])):"audio"===e.type&&e.file?(k(),w("div",it,[D("audio",st,[D("source",{src:e.file},null,8,ot),nt])])):(k(),w("p",ut,E(e.text),1)),e.isSelected?(k(),w("div",at,[D("i",{class:"iconify","data-icon":C(i)?"feather:check":"feather:x"},null,8,lt),D("p",dt,E(C(i)?"Correct":"Wrong"),1)])):_("",!0)],2))}});rt.__scopeId="data-v-0ae72900",T("data-v-b815e708");const ct={class:"answer-choices"};$();var mt=x({props:{choices:{type:Array,default:()=>[]},selectedIds:{type:Array,default:()=>[]},checked:{type:Boolean,default:!1},version:{type:Number,default:0}},emits:["autoCheckScore"],setup(e,{emit:t}){const i=e;return U((()=>{const e=[ee.VERSION3];!i.checked&&e.includes(i.version)&&i.choices.forEach((e=>{e.answer&&i.selectedIds.some((t=>t===e.id))&&t("autoCheckScore")}))})),(t,i)=>{const s=rt;return k(),w("div",ct,[(k(!0),w(A,null,M(e.choices,((t,i)=>(k(),L(s,{key:`c-${t.id}`,index:i+1,type:t.choiceType,text:t.name,file:t.file,"is-correct":!!t.answer,"is-selected":e.selectedIds.some((e=>e===t.id)),class:"choice"},null,8,["index","type","text","file","is-correct","is-selected"])))),128))])}}});mt.__scopeId="data-v-b815e708";const pt=["value","readonly"],bt=["value","readonly"];var St=x({props:{text:{type:String,default:""},type:{type:String,default:"input"},readonly:{type:Boolean,default:!1}},setup:e=>(t,i)=>(k(),w("div",null,["textarea"===e.type?(k(),w("textarea",{key:0,value:e.text,type:"text",class:"textarea","read-only":"",readonly:e.readonly},null,8,pt)):(k(),w("input",{key:1,value:e.text,type:"text",class:"input",readonly:e.readonly},null,8,bt))]))});T("data-v-d395ac22");const vt={class:"is-flex is-align-items-center"},yt={key:0,class:"title is-5 mb-0 mr-auto"},ft={class:"has-text-centered mx-auto"},qt=["max","disabled"],ht={class:"subtitle is-5"},zt={key:1,class:"operator"},gt=[D("span",null,"Or",-1)],Qt={key:0,class:"--col"},xt=N("Remove");$();var It=x({props:{question:{type:Object,required:!0},showRemove:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["remove","update:score"],setup(e,{emit:t}){const i=e,{quizSubmit:s}=v(),o=g(0),n=g(!1),u=z((()=>i.question.choices&&"checkbox"===i.question.answerType?i.question.choices.reduce(((e,t)=>e+t.answer),0):i.question.score)),a=()=>{t("remove",i.question.id)},l=()=>{var e;o.value<0?o.value=0:o.value>u.value&&(o.value=u.value),t("update:score",{id:i.question.id,type:i.question.answerType,score:o.value}),(null==(e=i.question.submitQuestions)?void 0:e.length)&&(i.question.submitQuestions[0].score=o.value)},d=()=>{i.readonly||m.value||(n.value=!0)},r=()=>{n.value=!1},m=z((()=>{var e;return i.question.submitQuestions&&((null==(e=i.question.submitQuestions)?void 0:e.length)<=0||(i.question.answerType===te.CHECKBOX||i.question.answerType===te.RADIO)&&!i.question.submitQuestions.some((e=>e.submitQuestionChoices)))}));return U((()=>{var e;o.value=i.question.submitQuestions&&(null==(e=i.question.submitQuestions[0])?void 0:e.score)||0})),(t,i)=>{const p=c,b=ue;return k(),L(b,{class:"score-card"},{default:V((()=>[D("div",vt,[D("div",{class:B(["max-score --col",[e.showRemove&&"with-border"]])},[e.showRemove?_("",!0):(k(),w("h5",yt,"Score")),D("div",ft,[D("div",{class:B(["score-edit",[n.value&&"expanded",e.readonly&&"readonly"]]),onMouseleave:r,onMouseover:d},[H(D("p",null,E(o.value),513),[[Y,!n.value]]),H(D("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e),type:"number",class:"score-field input",placeholder:"Score",min:"0",max:C(u),disabled:C(m)||!C(s).canUpdateScore,onChange:l},null,40,qt),[[Y,n.value],[P,o.value]])],34),D("h6",ht," Max "+E(C(u)),1)]),e.showRemove&&!e.readonly?(k(),w("div",zt,gt)):_("",!0)],2),e.showRemove&&!e.readonly?(k(),w("div",Qt,[O(p,{icon:"feather:trash",color:"danger",class:"btn-remove-answer",disabled:C(m),outlined:C(m),onClick:a},{default:V((()=>[xt])),_:1},8,["disabled","outlined"])])):_("",!0)])])),_:1})}}});It.__scopeId="data-v-d395ac22",T("data-v-13ec8c14");const kt={class:"is-flex is-flex-direction-column is-align-items-center"},wt={class:"section-header"},Ct={class:"title is-4"},Ot=N("Delete answer this section"),Vt={key:0,class:"content p-3"},_t=["innerHTML"],Dt={class:"columns is-multiline is-align-items-end"},Et={class:"column is-12 is-7-desktop is-8-widescreen"},jt={key:0,class:"content p-3"},Rt=["innerHTML"],Lt={key:2,class:"has-text-weight-medium has-text-primary"},Nt={class:"column is-12 is-5-desktop is-4-widescreen answer-score"};$();var Tt=x({props:{sections:{type:Array,required:!0},readonly:{type:Boolean,default:!1},version:{type:Number,default:0}},emits:["delete:section","delete:question","update:questionScore"],setup(e,{emit:t}){const i=e,{quizSubmit:s}=v();return(o,n)=>{const u=c,d=Ze,r=mt,m=St,p=It,b=ae;return k(),w("div",kt,[(k(!0),w(A,null,M(e.sections,(o=>(k(),L(b,{key:o.id,class:"section-wrapper"},{"header-left":V((()=>[D("div",wt,[D("h3",Ct,"Section: "+E(o.name),1)])])),"header-right":V((()=>[!e.readonly&&C(s).canDeleteSection?(k(),L(u,{key:0,color:"danger",icon:"feather:trash",disabled:o.questions&&!o.questions.some((e=>{var t;return e.submitQuestions&&(null==(t=e.submitQuestions)?void 0:t.length)>0})),onClick:e=>t("delete:section",{submitSectionId:o.id,name:o.name})},{default:V((()=>[Ot])),_:2},1032,["disabled","onClick"])):_("",!0)])),content:V((()=>[o.describe?(k(),w("div",Vt,[D("blockquote",null,[D("div",{innerHTML:o.describe},null,8,_t)])])):_("",!0),(k(!0),w(A,null,M(o.questions,(n=>{var u;return k(),w("div",{key:`q-${n.id}`,class:"question-wrapper"},[D("div",Dt,[D("div",Et,[D("h4",null,E(`${n.index}. `)+E(n.name),1),n.describe?(k(),w("div",jt,[D("blockquote",null,[D("div",{innerHTML:n.describe},null,8,Rt)])])):_("",!0),(null==(u=n.submitQuestions)?void 0:u.length)?(k(),w(A,{key:1},["audio"===n.answerType?(k(!0),w(A,{key:0},M(n.submitQuestions,(e=>(k(),L(d,{key:e.id,file:e.submitQuestionAudio||""},null,8,["file"])))),128)):"radio"===n.answerType||"checkbox"===n.answerType?(k(),L(r,{key:1,checked:!!n.submitQuestions[0].checked,"selected-ids":n.submitQuestions[0].submitQuestionChoices||[],choices:n.choices,version:i.version,onAutoCheckScore:e=>((e,i)=>{var s;(null==(s=i.submitQuestions)?void 0:s.length)&&(i.submitQuestions[0].score=i.score,t("update:questionScore",{id:i.id,score:i.score,index:i.index,name:i.name,sectionName:e.name,sectionId:e.id,sectionIndex:e.index,type:i.answerType}))})(o,n)},null,8,["checked","selected-ids","choices","version","onAutoCheckScore"])):"input"===n.answerType||"textarea"===n.answerType?(k(),L(m,{key:2,type:n.answerType,readonly:e.readonly,text:n.submitQuestions[0].submitQuestionText},null,8,["type","readonly","text"])):_("",!0)],64)):(k(),w("p",Lt," *Student have no Answer. "))]),D("div",Nt,[O(p,{question:n,"show-remove":!e.readonly&&C(s).canDeleteQuestion,readonly:e.readonly,onRemove:e=>t("delete:question",{submitQuestionId:e,name:n.name}),"onUpdate:score":e=>t("update:questionScore",l(a({},e),{index:n.index,name:n.name,sectionName:o.name,sectionId:o.id,sectionIndex:o.index,type:n.answerType}))},null,8,["question","show-remove","readonly","onRemove","onUpdate:score"])])])])})),128))])),_:2},1024)))),128))])}}});Tt.__scopeId="data-v-13ec8c14",T("data-v-0293f3fe");const $t={class:"is-flex is-flex-direction-column is-align-items-center"},Bt=D("div",{class:"section-header"},[D("h3",{class:"title is-4"},"Student remark")],-1),Ut=["readonly"];$();var At=x({props:{quizSubmit:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},setup(e){const t=e;return(i,s)=>{const o=ae;return k(),w("div",$t,[O(o,{class:"section-wrapper"},{"header-left":V((()=>[Bt])),content:V((()=>[H(D("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>t.quizSubmit.comments=e),class:"textarea",rows:"10",placeholder:"fill student remark...",readonly:e.readonly},null,8,Ut),[[P,t.quizSubmit.comments]])])),_:1})])}}});At.__scopeId="data-v-0293f3fe",T("data-v-e8dfacce");const Mt={class:"content"},Ht={key:0,class:"text-center"},Yt={class:"sub"},Pt=["innerHTML"],Kt=D("div",{class:"is-divider"},null,-1),Ft=N(" The score has not changed. "),Gt={key:3},Wt=D("span",{class:"has-text-weight-medium"},"Remark :",-1),Xt=D("span",{class:"has-text-danger"},[N(" The status would change to "),D("span",{class:"has-text-weight-semibold"},'"CHECKED"')],-1),Jt=N("Confirm");$();var Zt=x({props:{title:{type:String,required:!1,default:"Are you sure ?"},subtitle:{type:String,required:!1,default:void 0},open:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!0,default:!1},questionScores:{type:Array,required:!0},sections:{type:Array,required:!0},quizSubmit:{type:null,required:!1}},emits:["confirm","close"],setup(e,{emit:t}){const i=e;return(s,o)=>{const n=de,u=c,a=re;return k(),L(a,{open:e.open,title:"Confirm",actions:"center",size:"big",onClose:o[1]||(o[1]=e=>t("close"))},{content:V((()=>[O(n,{title:e.title},null,8,["title"]),D("div",Mt,[e.subtitle?(k(),w("p",Ht,E(e.subtitle),1)):_("",!0),e.questionScores.length>0&&e.sections.length>0?(k(!0),w(A,{key:1},M(i.sections,(t=>(k(),w(A,{key:`section-${t}`},[D("h5",Yt,E(`Section : ${t}`),1),(k(!0),w(A,null,M(e.questionScores.filter((e=>e.sectionName===t)),(e=>(k(),w("div",{key:`question-${e.id}`,class:"sub-content"},[D("span",{innerHTML:`${e.index}. ${e.name} to <span class='has-text-primary'>${e.score}</span> score`},null,8,Pt)])))),128)),Kt],64)))),128)):(k(),w(A,{key:2},[Ft],64)),i.quizSubmit&&i.quizSubmit.comments?(k(),w("p",Gt,[Wt,N(" "+E(i.quizSubmit.comments),1)])):_("",!0),Xt])])),action:V((()=>[O(u,{color:"primary",raised:"",loading:e.isLoading,onClick:o[0]||(o[0]=e=>t("confirm"))},{default:V((()=>[Jt])),_:1},8,["loading"])])),_:1},8,["open"])}}});Zt.__scopeId="data-v-e8dfacce";const ei={class:"page-content-inner"},ti={class:"quiz-submit-page"},ii={key:0,class:"form-layout is-quiz-student-submit"},si={class:"form-outer"},oi={class:"form-header-inner"},ni={class:"left is-flex"},ui={class:"my-auto"},ai={class:"right"},li={class:"buttons"},di=N("Back"),ri=N("Edit"),ci=N("Save Score"),mi={key:0,class:"form-body"};var pi=x({setup(e){const{y:t}=K(),i=h(),s=q(),{id:o,isLoading:n,quizSubmit:u,openQuestionScore:l,questionScores:r,student:p,sections:b,isLoadingQuizSubmitScore:S,isLoadingQuizSubmitInfo:y,deleteSubmitSection:f,onCloseSubmitSection:g,deleteSubmitQuestion:Q,onCloseSubmitQuestion:x,disabledSave:I,readonly:j,onSaveQuizSubmitInfo:R,setSubmitSection:N,onDeleteSubmitSection:T,setSubmitQuestion:$,onDeleteSubmitQuestion:A,onUpdateSubmitQuestionScore:M,onSaveSubmitQuestionScore:H,clearQuestionScore:Y,onConfirmSubmitQuestionScore:P,fetchQuizSubmitById:G}=pe(),{quizSubmit:W}=v(),X=z((()=>W.value.canDeleteQuestion||W.value.canDeleteSection||W.value.canUpdateInfo||W.value.canUpdateScore));m.value="Quiz Submits",F({title:"Whitehouse: Quizzes"});const J=me(),Z=z((()=>t.value>30)),te=()=>{i.push({name:"quizzes-submits",query:a({},s.query)})},ie=()=>{i.push({name:"quizzes-submits-:id",params:{id:s.params.id},hash:"#edit"})},se=e=>{switch(e){case ee.VERSION1:return"primary";case ee.VERSION2:return"secondary";case ee.VERSION3:return"success"}return"info"};return U((async()=>{var e;o.value=parseInt(s.params.id),await G(),(null==(e=null==u?void 0:u.value)?void 0:e.quiz.formatVersion)!==ee.VERSION2||j.value||(J.info("Quiz version 2 allows viewing only"),i.back())})),(e,t)=>{const i=d,s=c,o=Fe,a=Tt,m=At,v=le,q=Zt,h=ce;return k(),w("div",ei,[O(v,{size:"large",translucent:"",active:C(n)},{default:V((()=>{var e,t,n,l,d,c,b;return[D("div",ti,[C(u)?(k(),w("form",ii,[D("div",si,[D("div",{class:B([[C(Z)&&"is-stuck"],"form-header stuck-header"])},[D("div",oi,[D("div",ni,[D("h3",ui,E(`(ID:${null==(e=C(u))?void 0:e.id}) ${null==(t=C(u))?void 0:t.quiz.name}`),1),O(i,{key:"`quiz-version`",label:`ver. ${null==(n=C(u))?void 0:n.quiz.formatVersion}`,class:"mx-2",color:se((null==(l=C(u))?void 0:l.quiz)?C(u).quiz.formatVersion:0)},null,8,["label","color"]),C(j)?(k(),L(i,{key:0,label:"readonly",class:"mx-2",color:"danger"})):(k(),L(i,{key:1,label:"editing",class:"mx-2",color:"orange"}))]),D("div",ai,[D("div",li,[O(s,{icon:"lnir lnir-arrow-left rem-100",class:"custom-btn","dark-outlined":"",light:"",onClick:te},{default:V((()=>[di])),_:1}),C(j)&&C(X)&&[C(ee).VERSION1,C(ee).VERSION3].includes(C(u).quiz.formatVersion)?(k(),L(s,{key:0,icon:"lnir lnir-pencil rem-100",color:"primary",raised:"",onClick:ie},{default:V((()=>[ri])),_:1})):!C(j)&&C(X)&&[C(ee).VERSION1,C(ee).VERSION3].includes(C(u).quiz.formatVersion)?(k(),L(s,{key:1,icon:"lnir lnir-save rem-100",color:"primary",raised:"",onClick:C(H)},{default:V((()=>[ci])),_:1},8,["onClick"])):_("",!0)])])])],2),C(p)&&C(u)?(k(),w("div",mi,[O(o,{"question-scores":C(r),"disabled-save":C(I),student:C(p),"quiz-submit":C(u),readonly:C(j),"is-loading":C(y),version:C(u).quiz.formatVersion,"onUpdate:quizSubmit":C(R)},null,8,["question-scores","disabled-save","student","quiz-submit","readonly","is-loading","version","onUpdate:quizSubmit"])])):_("",!0)])])):_("",!0),(null==(b=null==(c=null==(d=C(u))?void 0:d.quiz)?void 0:c.sections)?void 0:b.length)?(k(),L(a,{key:1,sections:C(u).quiz.sections,readonly:C(j),class:"mt-5",version:C(u).quiz.formatVersion,"onDelete:section":C(N),"onDelete:question":C($),"onUpdate:questionScore":C(M)},null,8,["sections","readonly","version","onDelete:section","onDelete:question","onUpdate:questionScore"])):_("",!0),C(u)?(k(),L(m,{key:2,"quiz-submit":C(u),readonly:C(j)||!C(W).canUpdateScore},null,8,["quiz-submit","readonly"])):_("",!0)])]})),_:1},8,["active"]),O(q,{sections:C(b),open:C(l),title:"Update Quiz Submit score","question-scores":C(r),"quiz-submit":C(u),"is-loading":C(S),onClose:C(Y),onConfirm:C(P)},null,8,["sections","open","question-scores","quiz-submit","is-loading","onClose","onConfirm"]),O(h,{open:C(f).isOpen,title:`Are you sure to delete this quiz section (ID:${C(f).deleteSubmitSectionId}) ${C(f).name} ?`,"is-loading":C(f).isLoading,onConfirm:C(T),onClose:C(g)},null,8,["open","title","is-loading","onConfirm","onClose"]),O(h,{open:C(Q).isOpen,title:`Are you sure to delete this quiz question (ID:${C(Q).deleteSubmitQuestionId})${C(Q).name} ?`,"is-loading":C(Q).isLoading,onConfirm:C(A),onClose:C(x)},null,8,["open","title","is-loading","onConfirm","onClose"])])}}});export default pi;
