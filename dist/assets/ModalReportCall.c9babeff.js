var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&r(e,a,l[a]);if(t)for(var a of t(l))s.call(l,a)&&r(e,a,l[a]);return e},p=(e,t)=>l(e,a(t));import{_ as u,a as d}from"./VField.vue_vue&type=script&setup=true&lang.ef5e6c86.js";import{_ as i}from"./VRadio.89eaf975.js";import{e as c,c as f}from"./index.d7dc1ff6.js";import{_ as m}from"./VModal.31b4f4ba.js";import{ae as y,q as C,b as I,A as v,D as b,k as S,Y as V,p as _,a as O,d as g,E as h,o as R,y as D,F as T,h as j,x as E,K as k,ai as U,n as w,ao as A,ap as Y,g as x,e as L,I as M,H as P,G}from"./vendor.1c8b4573.js";import{b as q,c as H,d as B,e as F}from"./student.enum.ad6af513.js";import{u as N}from"./useLogApi.90f2b872.js";import{u as z}from"./useNotyf.ddf08f06.js";const K=C({type:[],validate:{}});function J(){const e=z(),{createReportCall:l,updateReportCall:a,getReportCallType:t}=N();return p(n({},y(K)),{saveReportCall:async a=>{const t=await l(a);201===(null==t?void 0:t.status)?e.success("Craete report call completed!"):("object"==typeof(null==t?void 0:t.message)&&(K.validate=null==t?void 0:t.message),e.error(c(null==t?void 0:t.message)))},editReportCall:async l=>{const{status:t,message:o}=await a(l);200===t?e.success("Update report call completed!"):e.error(c(o))},fetchReportCallType:async()=>{const e=await t();e&&(K.type=e)}})}function Q(){const{type:e,saveReportCall:l,fetchReportCallType:a}=J();I(),v();const t=C({reportCallInfo:{topic:"",datetime:b().set("m",0).set("s",0).toISOString(),type:"",classType:"",classId:null,detail:"",status:q.SOLVED,satisfaction:H.GOOD,studentId:0},isLoading:!1}),o=S((()=>Object.values([t.reportCallInfo.topic,t.reportCallInfo.type]).every((e=>e)))),s=S((()=>!(t.reportCallInfo.topic&&t.reportCallInfo.type&&t.reportCallInfo.datetime&&t.reportCallInfo.type&&t.reportCallInfo.classType&&t.reportCallInfo.classId&&t.reportCallInfo.status&&t.reportCallInfo.studentId))),r=[q.SOLVED,q.UNSOLVED],u=[H.GOOD,H.EVERAGE,H.POOR],d=["PRIVATE_CLASS","GROUP_CLASS"].map((e=>({key:B[e],value:F[e]}))),i=()=>{t.reportCallInfo.topic="",t.reportCallInfo.datetime=b().set("m",0).set("s",0).toISOString(),t.reportCallInfo.type="",t.reportCallInfo.classType="",t.reportCallInfo.classId=null,t.reportCallInfo.detail="",t.reportCallInfo.status=q.SOLVED,t.reportCallInfo.satisfaction=H.GOOD,t.reportCallInfo.studentId=0};return V((async()=>{Array.isArray(e.value)&&0===e.value.length&&await a(),i()})),p(n({},y(t)),{studentReportCallStatus:r,studentReportCallStatisfaction:u,studentReportCallClassType:d,type:e,onSaveStudentReportCall:async()=>{if(o.value){const e=n({},t.reportCallInfo);e.classId?e.classId=e.classId:delete e.classId,e.detail||delete e.detail,e.classType||delete e.classType,await l(e),i()}},clearStateInfo:i,disabledSave:s})}_("data-v-ce63e25c");const W={class:"modal-form"},X=j("label",null,"Topic",-1),Z=j("label",null,"Date",-1),$=["value"],ee={class:"columns"},le={class:"column is-half"},ae=j("label",null,"Type",-1),te={class:"column is-half"},oe=j("label",null,"Class Type",-1),se=j("p",{class:"help"},"*If you fill classId, this field is required",-1),re=j("label",null,"Class ID",-1),ne=["disabled"],pe=j("label",null,"Detail",-1),ue=j("label",null,"Status",-1),de=j("label",null,"Satisfaction",-1),ie=G("Save");O();var ce=g({props:{openModal:{type:Boolean,required:!0,default:!1},reportCallInfo:{type:Object,required:!0},disabledSave:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1}},emits:["toggle-close","on-create"],setup(e,{emit:l}){const a=e,{type:t,studentReportCallClassType:o,studentReportCallStatus:s,studentReportCallStatisfaction:r}=Q();return(n,p)=>{const c=u,y=d,C=h("v-date-picker"),I=h("Multiselect"),v=i,b=f,S=m;return R(),D(S,{open:null==a?void 0:a.openModal,size:"medium",actions:"right",title:e.isEdit?"Edit student's report call":"Create student's report call",onClose:p[9]||(p[9]=e=>l("toggle-close"))},{content:T((()=>[j("form",W,[E(y,null,{default:T((()=>[X,E(c,{icon:"feather:archive"},{default:T((()=>[k(j("input",{"onUpdate:modelValue":p[0]||(p[0]=l=>e.reportCallInfo.topic=l),type:"text",class:w(["input",[e.reportCallInfo.topic?"is-primary-focus":"is-danger-focus"]]),placeholder:"Topic"},null,2),[[U,e.reportCallInfo.topic]])])),_:1})])),_:1}),E(C,{modelValue:e.reportCallInfo.datetime,"onUpdate:modelValue":p[1]||(p[1]=l=>e.reportCallInfo.datetime=l),"model-config":{type:"string",mask:"DD/MM/YYYY HH:mm"},masks:{inputDateTime24hr:"DD/MM/YYYY HH:mm"},mode:"dateTime",color:"orange","trim-weeks":"",popover:{visibility:"click"},is24hr:""},{default:T((({inputValue:e,inputEvents:l})=>[E(y,null,{default:T((()=>[Z,E(c,{icon:"feather:calendar"},{default:T((()=>[j("input",A({class:"input",type:"text",value:e},Y(l)),null,16,$)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue"]),j("div",ee,[j("div",le,[E(y,null,{default:T((()=>[ae,E(c,null,{default:T((()=>[E(I,{modelValue:e.reportCallInfo.type,"onUpdate:modelValue":p[2]||(p[2]=l=>e.reportCallInfo.type=l),options:x(t),label:"key","value-prop":"value",placeholder:"Select type","can-clear":!1},null,8,["modelValue","options"])])),_:1})])),_:1})]),j("div",te,[E(y,null,{default:T((()=>[oe,E(c,null,{default:T((()=>[E(I,{modelValue:e.reportCallInfo.classType,"onUpdate:modelValue":p[3]||(p[3]=l=>e.reportCallInfo.classType=l),options:x(o),label:"key","value-prop":"value",placeholder:"Select class type",disabled:null==a?void 0:a.readonly},null,8,["modelValue","options","disabled"]),se])),_:1})])),_:1})])]),E(y,null,{default:T((()=>[re,E(c,{icon:"feather:book-open"},{default:T((()=>[k(j("input",{"onUpdate:modelValue":p[4]||(p[4]=l=>e.reportCallInfo.classId=l),type:"number",class:"input is-primary-focus",placeholder:"Class ID",disabled:null==a?void 0:a.readonly},null,8,ne),[[U,e.reportCallInfo.classId]])])),_:1})])),_:1}),E(y,null,{default:T((()=>[pe,E(c,null,{default:T((()=>[k(j("textarea",{"onUpdate:modelValue":p[5]||(p[5]=l=>e.reportCallInfo.detail=l),type:"textarea",class:"textarea is-primary-focus",rows:"4",placeholder:"Detail"},null,512),[[U,e.reportCallInfo.detail]])])),_:1})])),_:1}),E(y,null,{default:T((()=>[ue,E(c,null,{default:T((()=>[(R(!0),L(P,null,M(x(s),(l=>(R(),D(v,{key:l,modelValue:e.reportCallInfo.status,"onUpdate:modelValue":p[6]||(p[6]=l=>e.reportCallInfo.status=l),value:l,label:l.charAt(0).toUpperCase()+l.slice(1),name:l,color:"primary"},null,8,["modelValue","value","label","name"])))),128))])),_:1})])),_:1}),E(y,null,{default:T((()=>[de,E(c,null,{default:T((()=>[(R(!0),L(P,null,M(x(r),(l=>(R(),D(v,{key:l,modelValue:e.reportCallInfo.satisfaction,"onUpdate:modelValue":p[7]||(p[7]=l=>e.reportCallInfo.satisfaction=l),class:"satisfaction",value:l,label:l.charAt(0).toUpperCase()+l.slice(1),name:l,square:!0},null,8,["modelValue","value","label","name"])))),128))])),_:1})])),_:1})])])),action:T((()=>[E(b,{color:"primary",raised:"",disabled:e.disabledSave,onClick:p[8]||(p[8]=e=>l("on-create"))},{default:T((()=>[ie])),_:1},8,["disabled"])])),_:1},8,["open","title"])}}});ce.__scopeId="data-v-ce63e25c";export{ce as _,Q as a,J as u};
